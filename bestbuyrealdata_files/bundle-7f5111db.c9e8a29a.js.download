(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[717],{94717:(t,e,o)=>{"use strict";o.d(e,{Z:()=>v});o(35666);var i=o(47389),n=o(67294),r=o(21101),a=o(37424),s=o(82522),c=o(55763),d=o(91502),l=o(47139),u=o(43476),S=o(48694),E=o(8187),y=function(t,e,o,i){return new(o||(o=Promise))(function(n,r){function a(t){try{c(i.next(t))}catch(t){r(t)}}function s(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?n(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,s)}c((i=i.apply(t,e||[])).next())})};const v=(0,a.connect)(t=>{var e;return{adobeScriptUrl:(null===(e=(0,s.mtC)(t))||void 0===e?void 0:e.adobeScriptUrl)||"",locale:(0,s.eYU)(t),routing:t.routing}},t=>({dynamicContentActions:(0,i.bindActionCreators)(c.gk,t),userActions:(0,i.bindActionCreators)(c.jc,t)}))(({adobeScriptUrl:t,children:e,dynamicContentActions:o,locale:i,routing:s,store:c,userActions:v})=>{const[p,_]=n.useState(!1);return(0,d.n)(function(t,e){o.setLivePreviewHash(t),e&&o.setPreviewTimestamp(e);(0,l.p)(c,s.pageKey,s.locationBeforeTransitions)}),n.useEffect(()=>{if(t&&!1===p){const e=document.createElement("script");e.src=t,e.async=!0,document.head.appendChild(e),_(!0)}},[t,p]),n.useEffect(()=>{!function(){y(this,void 0,void 0,function*(){yield v.locate(!0),v.fetchAndEnhanceFavouriteList()})}()},[]),n.createElement(a.Provider,{store:c},n.createElement(r.Pj,{locale:i,textComponent:n.Fragment},n.createElement(S.I,{locale:i},n.createElement(E.KD,null,n.createElement(u.d,null),e))))})},78810:(t,e,o)=>{"use strict";o.d(e,{q:()=>g,y:()=>A});var i=o(43722),n=o(32806),r=o(18597),a=o(36458),s=o(57666),c=o(60800),d=o(36279),l=o(85862),u=o(84450),S=o(83675),E=o(8436),y=o(33311),v=o(82522),p=o(12890),_=o(79318),T=function(t,e,o,i){return new(o||(o=Promise))(function(n,r){function a(t){try{c(i.next(t))}catch(t){r(t)}}function s(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?n(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,s)}c((i=i.apply(t,e||[])).next())})};const g={loadProductContent:"addOnsPage/loadProductContent",updateParentItemJustAdded:"UPDATE_PARENT_ITEM_JUST_ADDED"},A=(()=>{const t=t=>e=>T(void 0,void 0,void 0,function*(){e({type:g.updateParentItemJustAdded,parentItemJustAdded:t})});return{loadProductContent:t=>({type:g.loadProductContent,payload:t}),onLoad:t=>(e,o)=>T(void 0,void 0,void 0,function*(){const n=o(),d=(0,v.TpL)(n),u=(0,p.b6)(n),S=(0,v.wzj)(n);!u&&S&&(yield e(a.ZP.syncProductStateWithLocation(S.locationBeforeTransitions,!1))),yield e((0,c.ANB)(t,d?{credentials:"include"}:null));const y=yield(0,E.Vh)(n.config.dataSources.offerApiUrl,d).getOffers(t,(0,v.TEy)(n),(0,s.vf)(n),(0,v.Ojf)(n));e(l.f.setOffers(y,t)),e((0,c.P2k)());(0,i.Gb)(t)(o())||e(r.s.fetchWarrantyBenefits(t))}),fetchCartShipments:()=>(t,e)=>T(void 0,void 0,void 0,function*(){yield t((0,c.dvI)())}),updateParentItemJustAdded:t,updateWarrantyForSku:(t,e)=>(o,i)=>T(void 0,void 0,void 0,function*(){yield o(u.jc.locate(!0));const r=i(),a=(0,c.Smc)(r.cart,t);if(null==a?void 0:a.id)try{if(e){const t={sku:e.sku,lineItemType:c.SMi.Psp,quantity:1};yield o((0,c.Xmv)(a.id,t)),o(u.jc.updateCartCount())}else{const e=(0,n.TL)(t)(r);e&&e.id&&(yield o((0,c.Hkf)(a.id,e.id)))}}catch(t){throw yield o(d.g.error(t)),t}}),goToRequiredProducts:(e,o)=>i=>{i(t(!0)),i(y.JM.push({pathname:_.Z.getPathByKey(o,"requiredParts",e)}))},updateServicesForSku:(t,e,o)=>(i,n)=>T(void 0,void 0,void 0,function*(){var r,a;yield i(u.jc.locate(!0));const s=n(),{productRelatedProducts:d}=s,l=s.cart&&(0,c.Smc)(s.cart,t);if(l){const n={},s=null===(a=null===(r=l.children)||void 0===r?void 0:r.reduce)||void 0===a?void 0:a.call(r,(t,e)=>{const{sku:{id:o},lineItemType:i}=e;return n[o]=e,i===c.SMi.Service&&t.push(o),t},[]),[u]=(0,S.Z)(s,e);if(u&&-1!==e.indexOf(u)){const t={sku:u,lineItemType:c.SMi.Service,quantity:1};yield i((0,c.Xmv)(l.id,t))}else if(u)if(d&&Object.keys(d).length&&Object.values(d.products[t]).length){let r;const a=d.products[t][u],s=Object.values(d.products[t]).find(t=>t.childProducts[u]),S=null==s?void 0:s.childProducts;if(u&&a&&Object.keys(d.products[t]).some(t=>u.includes(t))?r=a.childProducts&&Object.keys(a.childProducts).some(t=>e.includes(t))?[u,...Object.keys(a.childProducts)]:[a.id]:u&&S&&(r=(null==S?void 0:S.childProducts)&&Object.keys(null==S?void 0:S.childProducts).some(t=>e.includes(t))?[u,...Object.keys(S.childProducts)]:Object.keys(S)),(null==r?void 0:r.length)>1){o(!0);const t=r.map((t,e)=>new Promise(o=>setTimeout(()=>T(void 0,void 0,void 0,function*(){return o(yield i((0,c.Hkf)(l.id,n[t].id)))}),3e3*e)));yield Promise.all(t).then(()=>{o(!1)})}else yield i((0,c.Hkf)(l.id,n[u].id))}else yield i((0,c.Hkf)(l.id,n[u].id))}})}})()},20785:(t,e,o)=>{"use strict";o.d(e,{Og:()=>w,p_:()=>N,tX:()=>M});var i=o(84524),n=o(60800),r=o(13412),a=o(55763),s=o(36279),c=o(84450),d=o(74693),l=o(86916),u=o(11198),S=o(34620),E=o(83675),y=o(28542),v=o(8436),p=o(33311),_=o(27907),T=o(82522),g=o(38745),A=o(75224),C=o(16978),f=o(79318),P=o(36458),R=o(24374),L=o(41015),h=o(49951),I=o(97281),O=o(54836),m=o(10459),U=o(11148),D=o(91202),b=o(82681),k=function(t,e,o,i){return new(o||(o=Promise))(function(n,r){function a(t){try{c(i.next(t))}catch(t){r(t)}}function s(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?n(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,s)}c((i=i.apply(t,e||[])).next())})};const w={ANALYTICS_CART_LOADED:"cart/ANALYTICS_CART_LOADED",ANALYTICS_CART_PAYPAL_CLICKED:"analytics-paypal-click",ANALYTICS_CART_VISA_CLICKED:"analytics-visa-click",ANALYTICS_CART_ITEM_REMOVED:"cart/ANALYTICS_ITEM_REMOVED",ANALYTICS_CART_ITEM_SAVED:"cart/ANALYTICS_ITEM_SAVED",ANALYTICS_CART_QUANTITY_UPDATED:"cart/ANALYTICS_QUANTITY_UPDATED",ANALYTICS_WARRANTY_ADDED:"cart/ANALYTICS_WARRANTY_ADDED",FETCH_CART_SUCCESS:"cartPage/FETCH_CART_SUCCESS",CART_ERROR:"cartPage/CART_ERROR",CLEAR_CART_ERROR:"cartPage/CLEAR_CART_ERROR",MERGE_BASKET_SUCCESS:"cart/MERGE_BASKET_SUCCESS",MERGE_BASKET_ERROR:"cart/MERGE_BASKET_ERROR",UPDATE_LINE_ITEM:"cartPage/UPDATE_LINE_ITEM",CLEAN_UP:"cartPage/CLEAN_UP",UPDATE_CART:"cart/UPDATE_CART",CART_PROCESSING:"cartPage/CART_PROCESSING",CART_PROCESSING_DONE:"cartPage/CART_PROCESSING_DONE",CART_PROCESSING_TYPE:"cartPage/CART_PROCESSING_TYPE",CHILD_ITEM_REMOVED:"cart/CHILD_ITEM_REMOVED",REMOVE_ITEM_ERROR:"cartPage/REMOVE_ITEM_ERROR",SAVE_FOR_LATER_ERROR:"cartPage/SAVE_FOR_LATER_ERROR",SAVE_FOR_LATER_LIST_FULL:"cartPage/SAVE_FOR_LATER_LIST_FULL",UPDATE_CHECKOUT_FLOW:"cartPage/UPDATE_CHECKOUT_FLOW",CLEAR_CART_MESSAGES:"cartPage/CLEAR_CART_MESSAGES",UPDATE_PICKUP_STORE_WITH_AVAILABILITY_SUCCESS:"UPDATE_PICKUP_STORE_WITH_AVAILABILITY_SUCCESS",UPDATE_PICKUP_STORE_WITH_AVAILABILITY_LOADING:"UPDATE_PICKUP_STORE_WITH_AVAILABILITY_LOADING",UPDATE_PICKUP_STORE_WITH_AVAILABILITY_FAILED:"UPDATE_PICKUP_STORE_WITH_AVAILABILITY_FAILED",UPDATE_PICKUP_STORE_LOCATIONS_SUCCESS:"cartPage/UPDATE_PICKUP_STORE_LOCATIONS_SUCCESS",UPDATE_PICKUP_STORE_LOCATIONS_FAILED:"cartPage/UPDATE_PICKUP_STORE_LOCATIONS_FAILED",UPDATE_SELECTED_STORE:"cartPage/UPDATE_SELECTED_STORE",TOGGLE_PICKUP_STORE_SIDE_SHEET:"cartPage/TOGGLE_PICKUP_STORE_SIDE_SHEET",IS_LOADING_STORES:"cartPage/IS_LOADING_STORES",RESET_PICKUP_STORES:"cartPage/RESET_PICKUP_STORES",CLEAN_UP_PICKUP_DATA:"cartPage/CLEAN_UP_PICKUP_DATA",STORE_LIST_ERROR:"cartPage/STORE_LIST_ERROR"},M={UPDATE_POSTAL_CODE:"UPDATE_POSTAL_CODE"},N=(()=>{const t=t=>({type:w.FETCH_CART_SUCCESS,payload:t}),e=t=>({type:w.UPDATE_LINE_ITEM,payload:t}),o=t=>({type:w.CART_ERROR,payload:t}),N=()=>(t,e)=>{const o=e(),i=(0,g.M_)(o);return i&&(0,r.lQ)({data:Object.assign(Object.assign({},i),{event:r.o5.ViewCart}),dataLayerName:r.lE}),t({type:w.ANALYTICS_CART_LOADED})},B=t=>(e,o)=>k(void 0,void 0,void 0,function*(){const i=o(),n=(0,T.G2o)(i);yield e(a.routingActionCreators.setAltLangHrefs({altLangUrl:f.Z.getAltLangPathByKey(n,"basket"),curLangUrl:f.Z.getCurrLang(t.pathname)}))}),F=e=>(o,i,{cookieCartProvider:r})=>k(void 0,void 0,void 0,function*(){var s;const c=i(),l=(0,R.iJ)(c),u=r.getCartId(),S=(0,T.vfp)(c),E=(0,T.TEy)(c),y=(0,T.eYU)(c),v=(0,R.Hy)(c),p=(0,T.TFH)(d.Sq.isVhdEhfCart)(c);if(v!==n.qTh){if((0,m.Z)(e))o(Q(0)),r.deleteCartId(),o(a.eG.cleanUpStoreMessages()),o(a.Tz.cleanUpStoresStatus()),o(tt());else{let i={};try{o($(!0));const t=new h.Lv(l,p),e=(0,T.jWZ)(c);i=yield t.getCart(y,S,E,null!=u?u:"",e)}catch(t){}finally{const n=(null===(s=null==i?void 0:i.summary)||void 0===s?void 0:s.quantity)||0;o(Q(n)),e=j(e,i.lineItems),o(t(Object.assign(Object.assign({},i),{lineItems:e})))}}(0,R.B9)(i())||(0,L.u)(!1)}}),j=(t,e)=>{if(!e||e.length<=0)return t;return t.map(t=>{const o=e.find(e=>t.id===e.id);if(o){const e=Object.assign(Object.assign({},t),o);return o.promotions||delete e.promotions,e}return t})},G=(t,e)=>{i.utils.pushEventToDataLayer({event:t,payload:{saveForLaterProducts:[{id:e.product.sku,name:e.product.name,nameAndSku:`${e.product.name} : ${e.product.sku}`}]}})},Y=(t,e)=>(o,i)=>k(void 0,void 0,void 0,function*(){const n=i(),r=(0,R.M4)(n),s=(0,R.Vd)(n);if(!r&&!e)return void o(x(!1));o(x(!0));const c=n.storesStatus,d=n.storeMessages;if(0===Object.keys(null==c?void 0:c.statuses).length){let t;if(t=yield o((t,e,{storesStatusProvider:o})=>k(void 0,void 0,void 0,function*(){try{t({type:a.SX.getStoresStatus});const e=yield o.getStoresStatus();return Object.keys(e).length>0?t({type:a.SX.storesStatusSuccess,storesStatus:e}):t({type:a.SX.storesStatusSuccess,storesStatus:{}}),e}catch(e){return t({type:a.SX.storeStatusFailure}),{}}})),0===Object.keys(t).length)return void o(x(!1))}0===Object.keys(null==d?void 0:d.messages).length&&!1===(null==d?void 0:d.hasFetched)&&(yield o(a.eG.getStoreMessages())),t||0===s.length?yield o(V(t)):yield o(H(s))}),V=t=>(e,o)=>k(void 0,void 0,void 0,function*(){e(x(!0));const i=o(),n=(0,R.K7)(i),r=(0,R.eo)(i).length===n.length;let a=[];try{let o=[];const n=(0,T.ZUd)(i)||"",s=(0,T.eYU)(i),c=(0,T.vfp)(i),d=t||c,l=new v.P6(n,s);o=yield l.getStoresUsingProximityAndPostalCode(d,100),a=o.map(D.I),e(W(a)),a.length>0?yield e(H(a)):(e(et((0,b.Z)(Object.assign(Object.assign({},b.$),{storeLocations:a,nothingDTHable:r})))),e(x(!1)))}catch(t){return e(z()),e(et((0,b.Z)(Object.assign(Object.assign({},b.$),{apiErrorOccurred:!0})))),e(x(!1)),[]}}),H=t=>(e,o)=>k(void 0,void 0,void 0,function*(){const i=o(),n=(0,R.K7)(i),r=(0,R.eo)(i).length===n.length;let a=[];try{const n=(0,R.qY)(i).map(t=>t.product.sku),s=(0,T.nle)(i)||"",c=new v.Nk(s,i.intl.locale,v.g3.standard),d=yield c.getStoreAvailabilities({skus:n,pickupStoreLocations:t});if(d.length>0&&(0,D._I)(d)){const i=(0,D.rc)(t,d).filter(t=>(0,T.F6p)(t.id)(o()));a=(0,R.Nn)(i)(o()),e(K(a))}else e(et((0,b.Z)(Object.assign(Object.assign({},b.$),{storeLocations:t,storesWithAvailability:a,nothingDTHable:r}))))}catch(o){e(Z()),e(et((0,b.Z)(Object.assign(Object.assign({},b.$),{apiErrorOccurred:!0,storeLocations:t,storesWithAvailability:a,nothingDTHable:r}))))}finally{e(x(!1))}}),x=t=>({type:w.IS_LOADING_STORES,payload:t}),K=t=>({type:w.UPDATE_PICKUP_STORE_WITH_AVAILABILITY_SUCCESS,payload:t}),Z=()=>({type:w.UPDATE_PICKUP_STORE_WITH_AVAILABILITY_FAILED}),W=t=>({type:w.UPDATE_PICKUP_STORE_LOCATIONS_SUCCESS,payload:t}),z=()=>({type:w.UPDATE_PICKUP_STORE_LOCATIONS_FAILED}),q=e=>(o,i,{cookieCartProvider:n})=>k(void 0,void 0,void 0,function*(){var r,a;const s=i(),c=(0,T.TFH)(d.Sq.isVhdEhfCart)(s),l=n.getCartId(),u=(0,R.iJ)(s),S=new h.Lv(u,c),E=yield S.getCart((0,T.eYU)(s),(0,T.vfp)(s),(0,T.TEy)(s),null!=l?l:"",(0,T.jWZ)(s));null===(r=null==E?void 0:E.lineItems)||void 0===r||r.forEach(t=>k(void 0,void 0,void 0,function*(){return yield P.ZP.getContent(t.product.sku,1e4)(o,i)})),o(t(E));const y=E&&E.summary&&E.summary.quantity||0;return e&&void 0!==y&&o(Q(y)),null!==(a=null==E?void 0:E.lineItems)&&void 0!==a?a:[]}),J=()=>(t,e,{cookieCartProvider:o})=>k(void 0,void 0,void 0,function*(){try{const i=(yield t(c.jc.getCustomerId())).replace("{","").replace("}","").toLowerCase(),n=o.getCartId();if(!n)return void o.setCartId(i);if(n.toLowerCase()!==i){const r=e(),a=(0,R.iJ)(r),s=new h.sl(a,(0,T.eYU)(r));return yield s.mergeBasket((0,T.vfp)(r),(0,T.TEy)(r),n,i),yield o.setCartId(i),t({type:w.MERGE_BASKET_SUCCESS})}}catch(e){return t({type:w.MERGE_BASKET_ERROR})}}),$=(t,e)=>({type:t?w.CART_PROCESSING:w.CART_PROCESSING_DONE,payload:{loadingType:e||""}}),Q=t=>({type:w.UPDATE_CART,payload:{totalQuantity:t}}),X=(t,e)=>(o,i)=>k(void 0,void 0,void 0,function*(){if("undefined"==typeof window)return;const n=i(),r=v.y7.getItem("user");let a;if(window.location&&(a=(0,c.YD)(window.location)),r&&!n.user.isGoogleUser&&!a&&!r.isGoogleUser)return o(Object.assign({type:c.cw.locateFromSession},r));{const i=new v.PG(n.config.dataSources.locationApiUrl,(0,T.eYU)(n));try{let r;o({type:c.cw.fetchLocation}),r=n.user.isGoogleUser&&!e?n.user.shippingLocation:yield i.locate(t,void 0,a);const s=l.g[y.du.ON],d=(0,C.zO)(r.postalCode),u=d?r.postalCode:s.postalCode,S=t?yield(0,c.M4)(n.config.dataSources.storeLocationApiUrl,(0,T.eYU)(n),u):[],E={shippingLocation:Object.assign(Object.assign({},s),{nearbyStores:S,postalCode:u}),favouriteList:Object.assign({},n.user.favouriteList)};d&&(E.shippingLocation=Object.assign(Object.assign({},r),{nearbyStores:S,postalCode:u,regionName:n.intl.messages[`regionNames.${r.regionCode}`]})),n.user.geoLocation&&(E.geoLocation=n.user.geoLocation),n.user.isGoogleUser&&(E.isGoogleUser=n.user.isGoogleUser),v.y7.setItem("user",E),o(Object.assign({type:c.cw.getLocationSuccess},E))}catch(e){e instanceof S.Gg&&o({type:c.cw.getLocationFailure}),yield o(s.g.error(e,()=>c.jc.getLocation(t)))}}}),tt=()=>t=>{t({type:w.CLEAN_UP_PICKUP_DATA})},et=t=>e=>{e({type:w.STORE_LIST_ERROR,storeListError:t})};return{onLoadCartPage:()=>(t,e,{cookieCartProvider:o})=>k(void 0,void 0,void 0,function*(){const i=e(),n=(0,T.NOT)(i),r=(0,R.yC)(i);let a=[];yield t(X(!0)),n&&(yield B(n)),t($(!0)),yield t(J());const s=o.getCartId();try{s&&(a=yield t(q(!0)))}catch(t){}t($(!1)),yield t(U.S.fetchProductList()),t(N());const c=(0,R.qY)(e());c&&(0,A.bP)(c),a.length>0&&r===_.bD.pickUpAtAStore&&(yield t(Y(void 0,!0)))}),analyticsCartLoaded:N,analyticsPaypalClicked:()=>({type:w.ANALYTICS_CART_PAYPAL_CLICKED}),analyticsVisaClicked:()=>({type:w.ANALYTICS_CART_VISA_CLICKED}),cartProcessing:$,changePostalCode:t=>(e,i)=>k(void 0,void 0,void 0,function*(){const r=i(),a=(0,R.vb)(r);let s;e($(!0,M.UPDATE_POSTAL_CODE));try{yield e(c.jc.getLocation(!0,t,!0));i().user.isGetLocationError||(s=yield e(q(!0)),s.length>0&&(yield e(Y(t))))}catch(t){e(o({errorType:n.ZdT})),a&&e(et((0,b.Z)(Object.assign(Object.assign({},b.$),{apiErrorOccurred:!0}))))}e($(!1))}),cleanUp:()=>({type:w.CLEAN_UP}),getCart:q,mergeBasket:J,removeChildItem:(t,e)=>(r,a,{cookieCartProvider:s})=>k(void 0,void 0,void 0,function*(){r($(!0));try{const o=a(),c=(0,R.iR)(e)(o),d=(0,R.iJ)(o),l=new h.sl(d,(0,T.eYU)(o)),u=s.getCartId(),S=yield l.removeChildItem((0,T.vfp)(o),(0,T.TEy)(o),null!=u?u:"",t,e);(c&&c.type)!==n.SMi.Psp||(0,R.B9)(o)||(0,L.u)(!1),yield r({type:w.UPDATE_CART,payload:S}),i.utils.pushEventToDataLayer({event:"analytics-child-remove",payload:c&&c.product&&c.product.sku}),yield r(q(!0))}catch(t){r(o({errorType:n.qTh}))}r($(!1))}),removeItem:(t,i)=>(r,a,{cookieCartProvider:s})=>k(void 0,void 0,void 0,function*(){r($(!0));const c=a(),d=(0,R.iJ)(c),l=s.getCartId(),u=(0,T.vfp)(c),S=(0,T.TEy)(c),E=(0,T.eYU)(c),v=(0,R.qY)(c);let p;try{const o=new h.sl(d,E);yield o.removeLineItem(u,S,null!=l?l:"",t),p=v.find(e=>e.id===t),p&&(r(e({lineItem:Object.assign(Object.assign({},p),{messageType:y.iA.CART_ITEM_REMOVE_SUCCESS})})),r({type:w.ANALYTICS_CART_ITEM_REMOVED,payload:{lineItem:{product:{sku:i},childLineItems:p.childLineItems}}})),v.length>1&&(yield r(Y()))}catch(t){r({type:w.REMOVE_ITEM_ERROR,payload:{lineItem:p}}),r(o({errorType:n.qTh}))}yield r(F((0,R.qY)(a()))),r($(!1))}),syncBasketStateWithLocation:B,syncRequiredPartsStateWithLocation:t=>(e,o)=>k(void 0,void 0,void 0,function*(){const i=o(),n=(0,T.G2o)(i),{sku:r}=f.Z.getParams(n,t.pathname);yield e(a.routingActionCreators.setAltLangHrefs({altLangUrl:f.Z.getAltLangPathByKey(n,"requiredParts",r),curLangUrl:f.Z.getCurrLang(t.pathname)}))}),updateLineItemQuantity:(t,e)=>(i,r,{cookieCartProvider:a})=>k(void 0,void 0,void 0,function*(){i($(!0));const s=r(),c=a.getCartId(),d=(0,R.iJ)(s),l=(0,T.vfp)(s),u=(0,T.TEy)(s),S=(0,T.eYU)(s),E=(0,R.Xm)(t)(s);try{const o=new h.sl(d,S);yield o.updateItemQuantity(t,e,null!=c?c:"",u,l),i({payload:{lineItem:E,newQuantity:e},type:w.ANALYTICS_CART_QUANTITY_UPDATED});(yield i(q(!0))).length>0&&(yield i(Y()))}catch(t){i(o({errorType:n.eId}))}i($(!1))}),updateWarrantyForSku:(t,e)=>(i,r,{cookieCartProvider:a})=>k(void 0,void 0,void 0,function*(){i($(!0));const s=r(),{id:c}=(0,R.Sm)(t)(s),d=(0,R.iJ)(s),l=new h.sl(d,(0,T.eYU)(s)),u=a.getCartId(),S=(0,T.vfp)(s),E=(0,T.TEy)(s);try{let o;if(e){const t={sku:e.sku,lineItemType:n.SMi.Psp,quantity:1};o=yield l.addChildItem(S,E,c,null!=u?u:"",t),(0,n.ybC)({lineItem:t})}else{const{id:e}=(0,R.xd)(t)(s);o=yield l.removeChildItem(S,E,null!=u?u:"",c,e)}yield i({type:w.UPDATE_CART,payload:o}),yield i(q(!1))}catch(t){i(o({errorType:e?n.A6w:n.Oo8}))}i($(!1))}),locate:X,goToCartPage:()=>(t,e)=>{const o=e(),i=(0,T.G2o)(o),n=f.Z.getPathByKey(i,"basket");return t(p.JM.push({pathname:n}))},saveItemForLater:(t,o)=>(i,n,{cookieCartProvider:r,productListProvider:a})=>k(void 0,void 0,void 0,function*(){var s;i($(!0));const c=n(),d=(0,O.Z)(),l=r.getCartId(),E=(0,T.vfp)(c),v=(0,T.TEy)(c),p=[...(0,R.qY)(c)],_=p.find(e=>e.id===t);try{if(!_)throw new Error("Error saving item for later.");const n=yield a.saveItemForLater({postalCode:E,regionCode:v,lineItemId:t,basketId:null!=l?l:"",sku:o,productListId:d});if(n){if(!d){(new I.Z).setProductListId(n.id)}i(e({lineItem:Object.assign(Object.assign({},_),{messageType:y.iA.CART_ITEM_SAVE4LATER_SUCCESS})})),G("save-for-later-success",_),p.length>1&&(yield i(Y()))}else i({type:w.SAVE_FOR_LATER_ERROR,payload:{lineItem:_}}),G("save-for-later-error",_)}catch(t){if(!_)return void i($(!1));t.status===S.GL.BadRequest&&(null===(s=t.errorPayload)||void 0===s?void 0:s.status)===u.LO.SaveForLaterListFull?(i({type:w.SAVE_FOR_LATER_LIST_FULL,payload:{lineItem:_}}),G("save-for-later-list-full",_)):(i({type:w.SAVE_FOR_LATER_ERROR,payload:{lineItem:_}}),G("save-for-later-error",_)),i($(!1))}yield i(F((0,R.qY)(n()))),i(U.S.fetchProductList())}),updateCheckoutFlow:t=>({type:w.UPDATE_CHECKOUT_FLOW,payload:{selectedCheckoutFlow:t}}),updateServicesForSku:(t,e)=>(i,r,{cookieCartProvider:a})=>k(void 0,void 0,void 0,function*(){var s,c;i($(!0));const l=r(),u=(0,T.TFH)(d.Sq.addServiceInCart)(l),S=l.cartPage&&(0,R.Sm)(t)(l),y=(0,R.iJ)(l),v=new h.sl(y,(0,T.eYU)(l)),_=a.getCartId(),g=(0,T.vfp)(l),A=(0,T.TEy)(l);if(S){const r={},a=null===(c=null===(s=S.childLineItems)||void 0===s?void 0:s.reduce)||void 0===c?void 0:c.call(s,(t,e)=>{const{type:o,product:{sku:i}}=e;return r[i]=e,o===n.SMi.Service&&t.push(i),t},[]),[d]=(0,E.Z)(a,e);let y;if(d&&-1!==e.indexOf(d))if(u){const t={sku:d,lineItemType:n.SMi.Service,quantity:1};try{y=yield v.addChildItem(g,A,S.id,null!=_?_:"",t)}catch(t){return void i(o({errorType:n.ABy}))}i((0,n.ybC)({lineItem:Object.assign(Object.assign({},t),{parent:S})}))}else{const e=(0,T.G2o)(l);i(p.JM.push({pathname:f.Z.getPathByKey(e,"requiredParts",t)}))}else if(d){try{y=yield v.removeChildItem(g,A,null!=_?_:"",S.id,r[d].id)}catch(t){return void i(o({errorType:n.TOw}))}i((0,n.CLt)({lineItem:Object.assign(Object.assign({},r[d]),{parent:S})}))}y&&(yield i({type:w.UPDATE_CART,payload:y}),yield i(q(!1)))}}),dismissCartError:()=>t=>{t((0,n.W6I)()),t({type:w.CLEAR_CART_ERROR})},clearCartMessages:()=>t=>{t({type:w.CLEAR_CART_MESSAGES})},getPickupStoreLocations:V,getPickupAvailability:H,updateSelectedStore:t=>({type:w.UPDATE_SELECTED_STORE,payload:t}),togglePickupStoreSideSheet:(t=!1)=>({type:w.TOGGLE_PICKUP_STORE_SIDE_SHEET,payload:t}),setStoreIsLoading:x,resetPickupStore:()=>({type:w.RESET_PICKUP_STORES}),getStoreStatusAndPickupAvailability:Y,setStoreListError:et}})()},66200:(t,e,o)=>{"use strict";o.d(e,{f:()=>i,h:()=>n});const i={loadedProductReviewsJS:"bazaarVoice/LOADED_PRODUCT_REVIEWS_BV_JS",loadedSellerReviewsJS:"bazaarVoice/LOADED_SELLER_REVIEWS_BV_JS"},n={loadedProductReviewsJS:()=>({type:i.loadedProductReviewsJS}),loadedSellerReviewsJS:()=>({type:i.loadedSellerReviewsJS})}},18597:(t,e,o)=>{"use strict";o.d(e,{s:()=>l,x:()=>i});var i,n=o(39851),r=o(60800),a=o(8436),s=o(28542),c=o(57470),d=function(t,e,o,i){return new(o||(o=Promise))(function(n,r){function a(t){try{c(i.next(t))}catch(t){r(t)}}function s(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?n(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,s)}c((i=i.apply(t,e||[])).next())})};!function(t){t.FETCH_WARRANTY_BENEFITS="bbp/FETCH_WARRANTY_BENEFITS",t.FETCH_WARRANTY_BENEFITS_SUCCESS="bbp/FETCH_WARRANTY_BENEFITS_SUCCESS",t.FETCH_WARRANTY_BENEFITS_ERROR="bbp/FETCH_WARRANTY_BENEFITS_ERROR"}(i||(i={}));const l=(()=>{const t=t=>({type:i.FETCH_WARRANTY_BENEFITS_SUCCESS,payload:t}),e=t=>({type:i.FETCH_WARRANTY_BENEFITS_ERROR,payload:t});return{fetchWarrantyBenefits:o=>(i,l)=>d(void 0,void 0,void 0,function*(){return new Promise((u,S)=>d(void 0,void 0,void 0,function*(){if(!o)return S(new Error("sku is a required parameter"));const d=l(),E=(0,c.sM)(o)(d),y=E===r.APY.PSP;try{const e=(0,a.EK)(d.config.dataSources.contentApiUrl,d.intl.locale,d.user.shippingLocation.regionCode,o),r=yield e.getContent();if(E){const e=`contexts.${(y?s.ef.PSP:s.ef.PRP).toLowerCase()}.items[0]`,a={body:(0,n.Z)(r,e).body,warrantyType:y?s.zc.PSP:s.zc.PRP};return i(t({sku:o,data:a})),u(a)}}catch(n){if(E){const e={body:"",warrantyType:y?s.zc.PSP:s.zc.PRP};return i(t({sku:o,data:e})),u(e)}return i(e({sku:o,error:n})),S(n)}return S("unable to fetch warranty benefits")}))}),fetchWarrantyBenefitsSuccess:t,fetchWarrantyBenefitsError:e}})()},89557:(t,e,o)=>{"use strict";o.d(e,{yp:()=>M.y,c5:()=>G,p_:()=>m.p_,h6:()=>B.h,Qg:()=>O,EH:()=>I,s:()=>N.s,o3:()=>S,bm:()=>i.b,Qu:()=>k,Bi:()=>V.B,WG:()=>W,J5:()=>Z,K_:()=>Y.K_,nL:()=>h,Pd:()=>L,zF:()=>f,Tz:()=>w.T,SX:()=>w.S});var i=o(76912),n=o(82522),r=o(8436),a=o(87670),s=function(t,e,o,i){return new(o||(o=Promise))(function(n,r){function a(t){try{c(i.next(t))}catch(t){r(t)}}function s(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?n(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,s)}c((i=i.apply(t,e||[])).next())})};const c="GET_PRODUCT_OFFERS",d="GET_PRODUCT_SPECIAL_OFFERS",l="SPECIAL_OFFER_CLICK",u="GET_PRODUCT_SPECIAL_OFFERS_FAILURE",S=(()=>{const t=t=>(e,o)=>s(void 0,void 0,void 0,function*(){var i,s;e({type:c});const d=o();t=null!=t?t:null===(s=null===(i=d.product)||void 0===i?void 0:i.product)||void 0===s?void 0:s.sku;try{const o=(0,n.Ojf)(d),i=yield(0,r.Vh)(d.config.dataSources.offerApiUrl,(0,n.TpL)(d)).getOffers(t,(0,n.TEy)(d),(0,n.vfp)(d),o);e((0,a.gU)(i))}catch(t){e((0,a.wO)())}});return{getOffers:()=>t(),getOffersBySku:t,getSpecialOffers:()=>(t,e)=>s(void 0,void 0,void 0,function*(){var o,i;t({type:d});const s=e(),c=null===(i=null===(o=s.product)||void 0===o?void 0:o.product)||void 0===i?void 0:i.sku;try{if(!c)throw new Error("No sku");const e=yield(0,r.L3)(s.config.dataSources.specialOfferApiUrl,(0,n.TpL)(s)).getSpecialOffers(c,(0,n.eYU)(s),(0,n.Ojf)(s),(0,n.vfp)(s));t((0,a.LH)(e))}catch(e){t({type:u})}}),trackSpecialOfferClick:t=>({type:l,discountId:t})}})();var E=o(58439),y=o(66709),v=o(37600),p=o(34620),_=o(79318),T=o(55763),g=o(57470),A=function(t,e,o,i){return new(o||(o=Promise))(function(n,r){function a(t){try{c(i.next(t))}catch(t){r(t)}}function s(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?n(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,s)}c((i=i.apply(t,e||[])).next())})};const C="stores/STORE_LOCATOR_PAGE_LOAD",f=(()=>{const t=(t,e)=>(o,i)=>{const r=i(),a=(0,g.k5)(r),s=e||"productRpu";if(!a)return void console.error("Sku is undefined when resolving SEO friendly URL");let c=_.Z.getAltLangPathByKey((0,n.G2o)(r),s,a);t&&t.search&&(c+=t.search),o(T.routingActionCreators.setAltLangHrefs({altLangUrl:c,curLangUrl:_.Z.getCurrLang(t.pathname)}))};return{getStores:()=>(t,e)=>A(void 0,void 0,void 0,function*(){yield t(T.jc.locate(!0,!0));const o=e(),i=new v.b(o.config.dataSources.storeLocationApiUrl),n=(0,y.r)(i);try{yield t(n.getNearbyStores(o.user.shippingLocation.postalCode))}catch(e){if(e instanceof E.Z){const o=new p.hY(p.zi.StoreLocationApiUrl,e.uri,"Failed to fetch stores",e);t(T.gt.error(o,()=>f.getStores()))}else t(T.gt.error(e))}}),updateStores:t=>e=>A(void 0,void 0,void 0,function*(){e((0,a.kz)()),yield e(T.c5.getAvailability(t))}),trackStoreLocatorPageView:()=>({type:C}),syncProductStoreLocatorStateWithLocation:(e,o)=>i=>A(void 0,void 0,void 0,function*(){yield i(T.bm.syncProductStateWithLocation(e)),yield i(t(e,o))})}})();var P=o(3941),R=function(t,e,o,i){return new(o||(o=Promise))(function(n,r){function a(t){try{c(i.next(t))}catch(t){r(t)}}function s(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?n(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,s)}c((i=i.apply(t,e||[])).next())})};const L={getSeller:"SELLER_SUCCESS",sellerProfilePageLoad:"SELLER_PROFILE_PAGE_LOAD",setInitialPageLoad:"SELLER_INITAL_PAGE_LOAD"},h=(()=>{const t=t=>(e,o)=>R(void 0,void 0,void 0,function*(){const i=o(),n=new r.Uh(i.config.dataSources.sellerApiUrl,i.intl.locale),a=new r.Of(i.config.dataSources.reviewApiUrl,i.intl.locale);try{const[o,i]=yield Promise.all([n.getSeller(t),a.getSellerReviewStats(t)]);e({seller:Object.assign(Object.assign({},o),{rating:i?{score:i.averageRating,reviewsCount:i.reviewCount}:null}),sellerId:t,type:L.getSeller})}catch(t){e(T.gt.error(t))}});return{getSeller:t,syncSellerProfileStateWithLocation:e=>(o,i)=>R(void 0,void 0,void 0,function*(){let n=i();const r=_.Z.getParams(n.intl.language,e.pathname);n.sellers!==P.Wo&&n.sellers[r.id]||(yield o(t(r.id)),n=i()),n.routing&&n.routing.curLangUrl===e.pathname||o(T.routingActionCreators.setAltLangHrefs({altLangUrl:_.Z.getAltLangPathByKey(n.intl.language,"sellerProfile",r.id),curLangUrl:_.Z.getCurrLang(e.pathname)}))}),sellerProfilePageLoad:()=>t=>{t({type:L.sellerProfilePageLoad})}}})(),I={open:"BB_PROTECTION_MEMBERSHIP_SUBSCRIPTION_DIALOG_OPEN",close:"BB_PROTECTION_MEMBERSHIP_SUBSCRIPTION_DIALOG_CLOSE"},O={open:()=>({type:I.open}),close:()=>({type:I.close})};var m=o(20785);const U="MOBILE_PREORDER_PAGELOAD",D="MOBILE_PREORDER_PAGELOAD_ERROR",b="PRE_ORDER_ADD_TO_CART",k={sendPageloadAnalytics:t=>e=>{e({type:U,payload:{products:t}})},sendAnalytics:t=>e=>{e({type:b,payload:{product:{name:t.name,sku:t.sku,price:t.price,options:{carrier:t.options.carrier,model:t.options.model,color:t.options.color.en,capacity:t.options.capacity}}}})},sendErrorAnalytics:()=>t=>{t({type:D})}};var w=o(82556),M=o(78810),N=o(18597),B=o(66200),F=o(16845),j=function(t,e,o,i){return new(o||(o=Promise))(function(n,r){function a(t){try{c(i.next(t))}catch(t){r(t)}}function s(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?n(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,s)}c((i=i.apply(t,e||[])).next())})};const G=(()=>{const t=(e,o)=>(i,a)=>j(void 0,void 0,void 0,function*(){const s=a(),c=s.product.product,d=c&&c.sku?c.sku:e||null,l=c&&c.seller&&c.seller.id;if(null===d)return;let u=s.user.shippingLocation.postalCode;c.isSpecialDelivery&&u&&u.length>=3&&u.length<6&&(u=u.substr(0,3)+"0A1");const S=new r.Nk(s.config.dataSources.availabilityApiUrl,s.intl.locale);try{i((0,F.Xp)());const t=yield S.getAvailability({postalCode:u,sellerId:l,sku:d,storeLocations:(0,n.jWZ)(s)},o);let e=[];t.pickup&&t.pickup.stores&&t.pickup.stores.length&&(e=t.pickup.stores.map(t=>{const e=s.user.shippingLocation.nearbyStores.find(({locationId:e})=>e===t.locationId);return Object.assign(Object.assign({},e||[]),t)})),i((0,F.aF)(Object.assign(Object.assign({},t),{pickup:Object.assign(Object.assign({},t.pickup),{stores:e})})))}catch(e){i((0,F.GO)()),yield i(T.gt.error(e,()=>T.bm.setProductDetailState(d),()=>t()))}});return{clearAvailability:()=>t=>{t((0,F.zz)())},getAvailability:t,getProductAvailabilitySellerCount:()=>e=>j(void 0,void 0,void 0,function*(){yield e(T.o3.getOffers()),yield e(t())})}})();var Y=o(24110),V=o(81402),H=o(99458),x=o(28542),K=function(t,e,o,i){return new(o||(o=Promise))(function(n,r){function a(t){try{c(i.next(t))}catch(t){r(t)}}function s(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?n(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,s)}c((i=i.apply(t,e||[])).next())})};const Z={fetchProductRelatedProducts:"FETCH_PRODUCT_RELATED_PRODUCTS",fetchProductRelatedProductsSuccess:"FETCH_PRODUCT_RELATED_PRODUCTS_SUCCESS",fetchProductRelatedProductsChildrenSuccess:"FETCH_PRODUCT_RELATED_PRODUCTS_CHILDREN_SUCCESS",fetchProductRelatedProductsFailure:"FETCH_PRODUCT_RELATED_PRODUCTS_FAILURE",fetchRelatedProduct:"FETCH_RELATED_PRODUCT",fetchRelatedProductSuccess:"FETCH_RELATED_PRODUCT_SUCCESS",fetchRelatedProductFailure:"FETCH_RELATED_PRODUCT_FAILURE"},W=(()=>{const t=(t=x.GS.REQUIRED_PRODUCT,e,o=[e,""])=>(i,n,{relatedProductsProvider:a})=>K(void 0,void 0,void 0,function*(){var s;try{i({type:Z.fetchProductRelatedProducts,payload:{relationshipType:t,sku:e}});const{config:{dataSources:{contentApiUrl:c}={}}={},intl:{language:d,locale:l="en-CA"}={},user:{shippingLocation:{regionCode:u="",postalCode:S=""}={}}={}}=n(),{error:E,productsPromises:y,result:v}=yield a.getRelatedProducts(t,e,d,u);i({type:Z.fetchProductRelatedProductsSuccess,payload:Object.assign(Object.assign({},v),{sku:e,productServiceSkuArray:o})});const p=null===(s=null==v?void 0:v.items)||void 0===s?void 0:s.map(({id:t})=>t);let _;(null==p?void 0:p.length)>0&&(_=yield a.availabilityProvider.getAvailabilitiesIndexedBySku({skus:p,postalCode:S,excludePickup:!0,storeLocations:[]})),y.forEach((t,n)=>K(void 0,void 0,void 0,function*(){var s,d,S;const E=p[n];try{i({type:Z.fetchRelatedProduct,payload:null===(s=null==v?void 0:v.items)||void 0===s?void 0:s[n]});const y=yield t,p=yield y.json(),[T]=yield a.offerProvider.getOffers(E),g=null==_?void 0:_[E],A=(0,r.EK)(c,l,u,E);let C;try{C=yield A.getContent()}catch(t){(0,H.Z)().error(t)}i({type:Z.fetchRelatedProductSuccess,payload:{product:p,offer:T,availability:g,content:null===(S=null===(d=null==C?void 0:C.contexts.product_service)||void 0===d?void 0:d.items)||void 0===S?void 0:S[0],parentSKU:e,productServiceSkuArray:o}})}catch(t){i({type:Z.fetchRelatedProductFailure,payload:{error:t,sku:E,parentSKU:e,productServiceSkuArray:o}}),(0,H.Z)().error(t)}})),E&&i({type:Z.fetchProductRelatedProductsFailure,payload:{error:E,parentSKU:e,productServiceSkuArray:o}})}catch(t){i({type:Z.fetchProductRelatedProductsFailure,payload:{error:t,parentSKU:e,productServiceSkuArray:o}}),(0,H.Z)().error(t)}});return{getRelatedProducts:t,getRelatedRequiredProducts:e=>t(x.GS.REQUIRED_PRODUCT,e),getRelatedServices:e=>(o,i,n)=>K(void 0,void 0,void 0,function*(){var r,a;yield t(x.GS.SERVICE,e)(o,i,n),(null===(r=i().productRelatedProducts)||void 0===r?void 0:r.products)&&Object.entries(null===(a=i().productRelatedProducts)||void 0===a?void 0:a.products).forEach(([e,r])=>Object.entries(r).forEach(([r,a])=>K(void 0,void 0,void 0,function*(){yield t(x.GS.SERVICE,r,[e,r])(o,i,n)})))}),getRelatedBBPs:e=>t(x.GS.BBP,e)}})()},16390:(t,e,o)=>{"use strict";o.d(e,{V:()=>a,s:()=>r});var i=o(87670),n=function(t,e,o,i){return new(o||(o=Promise))(function(n,r){function a(t){try{c(i.next(t))}catch(t){r(t)}}function s(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?n(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,s)}c((i=i.apply(t,e||[])).next())})};const r={trackMobileActivationPageView:"cellphonePlan/MOBILE_ACTIVATION_PAGE_LOAD"},a={fetchCellPhonePlan:t=>(e,o,{cellPhonePlanPricingProvider:r})=>n(void 0,void 0,void 0,function*(){try{e((0,i.tl)());const o=yield r.fetchCellPhonePlan(t);e((0,i.no)(o))}catch(t){}}),trackMobileActivationPageView:()=>t=>{t({type:r.trackMobileActivationPageView})}}},76912:(t,e,o)=>{"use strict";o.d(e,{b:()=>r});var i=o(36458),n=o(16390);Object.assign(Object.assign({},i.Gr),n.s);const r=Object.assign(Object.assign({},i.bm),n.V)},36458:(t,e,o)=>{"use strict";o.d(e,{Gr:()=>f,ZP:()=>L,bm:()=>R});var i=o(17673),n=o(1742),r=o(55763),a=o(99458),s=o(34620),c=o(28542),d=o(8436),l=o(79318),u=o(90305),S=o(87670),E=o(57470),y=o(18597),v=o(47070),p=o(73878),_=o(77277),T=o(12890),g=o(31330),A=o(48604),C=function(t,e,o,i){return new(o||(o=Promise))(function(n,r){function a(t){try{c(i.next(t))}catch(t){r(t)}}function s(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?n(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,s)}c((i=i.apply(t,e||[])).next())})};const f={rpuRequest:"RPU_REQUEST",resetProductState:"RESET_PRODUCT_STATE",trackDeliveryPromise:"PRODUCT_DELIVERY_PROMISE"},P=({specialOffers:t,hasMyBBYOffers:e,isSignedIn:o})=>{const i=t.reduce((t,e)=>{var o;return(null===(o=e.custGroupIds)||void 0===o?void 0:o.includes(A.V.MYBBY))?t.myBBY+=1:t.special+=1,t},{special:0,myBBY:0});let n=e?"Y":0;return o&&(n=i.myBBY),`Special: ${i.special}| MyBBY: ${n}`},R=(()=>{const t=(t,e,o,i)=>({payload:{sku:t,offer:e,warrantySku:o,rpuFrom:i},type:f.rpuRequest}),e=t=>i=>C(void 0,void 0,void 0,function*(){try{const e=c.C$.relevancy;yield i((0,S.hY)({sku:t})),"undefined"==typeof window?yield Promise.all([i(L(t)),i(o()),i((0,S.mz)({sortOption:e})),i((0,S.Sx)()),i(S.kL.getProductVariants({sku:t}))]):(i(L(t)),i(o()),i((0,S.mz)({sortOption:e})),i((0,S.Sx)()),i(S.kL.getProductVariants({sku:t})))}catch(o){i(r.gt.error(o,()=>e(t),()=>r.jc.setGeoLocation(),()=>r.c5.getAvailability()))}}),o=()=>(t,e)=>C(void 0,void 0,void 0,function*(){const o=e(),{product:i}=o.product;i&&i.isMarketplace&&t(r.nL.getSeller(i.seller.id))}),R=()=>(t,e)=>C(void 0,void 0,void 0,function*(){const o=e(),i=o.product.product,n=i&&i.sku?i.sku:null;if(null===n)return;const a=new d.aU(o.config.dataSources.contentApiUrl,o.intl.locale,n);try{const e=yield a.getContent();yield t((0,S.Zn)(e))}catch(e){yield t(r.gt.error(e,()=>R()))}}),L=(t,e=3e3)=>(o,i)=>C(void 0,void 0,void 0,function*(){const n=i(),r=(0,d.EK)(n.config.dataSources.contentApiUrl,n.intl.locale,n.user.shippingLocation.regionCode,t);try{const i=yield r.getContent(void 0,void 0,e),a=(0,E._S)(n);o((0,S.n0)(i));const s=(0,v.K)(i&&i.contexts,a);s&&o(y.s.fetchWarrantyBenefitsSuccess({sku:t,data:s}))}catch(t){return}}),h=(t,e)=>{for(let o=0;o<e.quantity;o++)t.push(e.sku);return t},I=()=>n.Z.getItem(p.kW.reported_bad_translations);return{resetProductState:()=>t=>{t((0,S.px)())},trackRpu:t,trackDeliveryPromise:t=>({type:f.trackDeliveryPromise,payload:{days:t}}),syncProductStateWithLocation:(t,o=!0)=>(i,n)=>C(void 0,void 0,void 0,function*(){let a=n(),c=a.product.product;const d=l.Z.getParams(a.intl.language,t.pathname);if(c===S.eN.product||(null==c?void 0:c.sku)!==d.sku||a.product.loadingProduct){d.sku&&(yield i(e(d.sku))),a=n();if(a.errors.statusCode===s.GL.NotFound)return;c=a.product.product,(null==c?void 0:c.primaryParentCategoryId)&&(yield i((0,S.OV)({categoryId:c.primaryParentCategoryId})))}c&&c.sku&&(i(r.o3.getSpecialOffers()),yield i(r.c5.getAvailability(c.sku,o)),t.search?i(r.routingActionCreators.setAltLangHrefs({altLangUrl:l.Z.getPathByKeyWithQueryParams("en"===a.intl.language?"fr":"en","product",t.search,c.altLangSeoText,c.sku),curLangUrl:l.Z.getCurrLang(t.pathname)})):i(r.routingActionCreators.setAltLangHrefs({altLangUrl:l.Z.getAltLangPathByKey(a.intl.language,"product",c.altLangSeoText,c.sku),curLangUrl:l.Z.getCurrLang(t.pathname)})),d.seoName&&d.seoName===c.seoText||(0,s.h_)(l.Z.getPathByKeyWithQueryParams(a.intl.language,"product",t.search,c.seoText,c.sku)))}),reserveInStore:(e,o)=>(n,r)=>C(void 0,void 0,void 0,function*(){var s;const c=r(),d=e.items.reduce(h,[]),l=e.items.map(t=>t.selectedWarrantySku).join("");o.rpuFrom&&n(t(d[0],void 0,l,o.rpuFrom));const u=Object.assign(Object.assign(Object.assign(Object.assign({},e),{sku:d}),l?{warranty:l}:{}),{returnUrl:window&&window.location&&window.location.pathname||"/"});delete u.items;const S=(null===(s=c.config.remoteConfig)||void 0===s?void 0:s.isQueueItEnabled)?"?qit=1":"",E=`${c.config.appPaths.checkout}${S}#/${c.intl.locale}/reserve-pickup?${i.stringify(u)}`;(0,a.Z)().info(`Navigating to reserve in store URI: ${E}`),setTimeout(()=>window.location.assign(E),300)}),setProductDetailState:e,trackPageView:()=>(t,e)=>{var o,i,n,r;const a=e(),{onLoginCustGroupIds:s,specialOffers:c}=(0,T.wv)(a),d=s.includes(A.V.MYBBY),{referrer:l}=a.routing.locationBeforeTransitions.query,y=null!=l?l:(0,u.gy)(a.intl.language,a.routing),v=(0,_.oI)(null!==(r=null===(n=null===(i=null===(o=null==a?void 0:a.product)||void 0===o?void 0:o.availability)||void 0===i?void 0:i.pickup)||void 0===n?void 0:n.stores)&&void 0!==r?r:[]);t((0,S.rV)({pdpFindingMethod:y,stores:v,isStoreListShown:(0,E.Y5)(a),myBBYAnalyticString:P({specialOffers:c,hasMyBBYOffers:d,isSignedIn:g.jx.isUserSignedIn()})}))},getShowcaseBannerContent:R,getContent:L,reportWrongFRTranslation:t=>(e,o,{productDomainProvider:i})=>C(void 0,void 0,void 0,function*(){let e;const{config:r}=o();e=i||(0,d._y)({baseUrl:r.dataSources.productDomainApi});const a=yield e.reportWrongFRTranslation(t);a.status!==s.GL.Delete&&a.status!==s.GL.OK||n.Z.setItem(p.kW.reported_bad_translations,Object.assign(Object.assign({},I()),{[t]:!0}))}),getReportedBadTranslations:I,getProductAndItsCategories:t=>(e,o)=>C(void 0,void 0,void 0,function*(){var i;if(!t)return;yield e((0,S.hY)({sku:t}));const n=o(),r=null===(i=null==n?void 0:n.product)||void 0===i?void 0:i.product;(null==r?void 0:r.primaryParentCategoryId)&&(yield e((0,S.OV)({categoryId:r.primaryParentCategoryId})))}),setWhichMediaGalleryModalOpen:t=>e=>{e((0,S.cB)(t))}}})(),L=R},11148:(t,e,o)=>{"use strict";o.d(e,{I:()=>E,S:()=>y});var i=o(84524),n=o(57666),r=o(42374),a=o(20785),s=o(54836),c=o(57470),d=o(24374),l=o(31330),u=o(34620),S=function(t,e,o,i){return new(o||(o=Promise))(function(n,r){function a(t){try{c(i.next(t))}catch(t){r(t)}}function s(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?n(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,s)}c((i=i.apply(t,e||[])).next())})};const E={FETCH_PRODUCT_LIST_LOADING:"productList/FETCH_PRODUCT_LIST_LOADING",FETCH_PRODUCT_LIST_SUCCESS:"productList/FETCH_PRODUCT_LIST_SUCCESS",FETCH_PRODUCT_LIST_ERROR:"productList/FETCH_PRODUCT_LIST_ERROR",FETCH_PRODUCT_LIST_RESET:"productList/FETCH_PRODUCT_LIST_RESET",MOVE_SAVED_ITEM_SUCCESS:"productList/MOVE_SAVED_ITEM_SUCCESS",MOVE_SAVED_ITEM_ERROR:"productList/MOVE_SAVED_ITEM_ERROR",REMOVE_SAVED_ITEM_SUCCESS:"productList/REMOVE_SAVED_ITEM_SUCCESS",REMOVE_SAVED_ITEM_ERROR:"productList/REMOVE_SAVED_ITEM_ERROR",CLEAR_SAVED_MESSAGES:"productList/CLEAR_SAVED_MESSAGES"},y=(()=>{const t=()=>({type:E.FETCH_PRODUCT_LIST_LOADING}),e=t=>({type:E.MOVE_SAVED_ITEM_SUCCESS,payload:{product:t}}),o=t=>({type:E.MOVE_SAVED_ITEM_ERROR,payload:{product:t}}),y=t=>({type:E.REMOVE_SAVED_ITEM_SUCCESS,payload:{product:t}}),v=t=>({type:E.REMOVE_SAVED_ITEM_ERROR,payload:{product:t}});return{fetchProductList:()=>(e,o,{productListProvider:a})=>S(void 0,void 0,void 0,function*(){var c;const d=o();if(null===(c=d.user)||void 0===c?void 0:c.isGetLocationError)return;e(t());const S=(0,s.Z)(),y=(0,r.eY)(d),v=(0,n.TE)(d),p=(0,n.vf)(d);if(S)try{const t=yield a.getSaveForLaterLists(y,v,p,S);return e((_=t,{type:E.FETCH_PRODUCT_LIST_SUCCESS,payload:{data:_}}))}catch(t){const o=l.jx.getCustomerIdCookie(),n=o&&o.authenticationState===l.zG.AUTHENTICATED,r=t;if(!n||n&&r.statusCode!==u.GL.NotFound)return i.utils.pushEventToDataLayer({event:"save-for-later-section-load-error"}),e((t=>({type:E.FETCH_PRODUCT_LIST_ERROR,payload:{error:t}}))(r))}var _}),moveSavedItemToCart:(r,l)=>(u,E,{productListProvider:y,cookieCartProvider:v})=>S(void 0,void 0,void 0,function*(){u(t());const S=E(),p=(0,s.Z)(),_=(0,c.lx)(S).find(t=>t.sku===r);if(p)try{const t=(0,n.TE)(S),o=(0,n.vf)(S),s=(0,d.UC)(S);u(a.p_.cartProcessing(!0));const c=(yield y.moveProductToCart({regionCode:t,postalCode:o,destinationBasketId:s,sku:r,productListId:p})).basketId,E=v.getCartId();s&&(null==E?void 0:E.length)||v.setCartId(c),_&&(u(e(_)),i.utils.pushEventToDataLayer({event:"move-saved-item-to-cart-success",payload:{moveToCartItems:[{id:_.sku,name:_.name,nameAndSku:`${_.name} : ${_.sku}`,purchasePrice:_.purchasePrice,location:"saved"}]}}));(yield u(a.p_.getCart(!0))).length>0&&u(a.p_.getStoreStatusAndPickupAvailability()),l()}catch(t){u(a.p_.cartProcessing(!1)),u(o(_)),i.utils.pushEventToDataLayer({event:"move-saved-item-to-cart-error",payload:{moveToCartItems:[{id:_.sku,name:_.name,nameAndSku:`${_.name} : ${_.sku}`,purchasePrice:_.purchasePrice}]}})}}),resetProductListState:()=>t=>S(void 0,void 0,void 0,function*(){t({type:E.FETCH_PRODUCT_LIST_RESET})}),removeSavedItem:e=>(o,n,{productListProvider:r})=>S(void 0,void 0,void 0,function*(){o(t());const a=n(),d=(0,c.lx)(a),l=(0,s.Z)();if(!l)return;const u=d.find(t=>t.sku===e);if(u)try{yield r.removeSavedItem({sku:e,productListId:l}),o(y(u)),i.utils.pushEventToDataLayer({event:"remove-saved-item-success",payload:{moveToCartItems:[{id:u.sku,name:u.name,nameAndSku:`${u.name} : ${u.sku}`}]}})}catch(t){o(v(u))}}),removeSavedItemSuccess:y,removeSavedItemError:v,moveSavedItemToCartSuccess:e,moveSavedItemToCartError:o,clearSavedMessages:()=>t=>S(void 0,void 0,void 0,function*(){t({type:E.CLEAR_SAVED_MESSAGES})})}})()},81402:(t,e,o)=>{"use strict";o.d(e,{B:()=>c});var i=o(33311),n=o(79318),r=o(87670),a=o(36518),s=function(t,e,o,i){return new(o||(o=Promise))(function(n,r){function a(t){try{c(i.next(t))}catch(t){r(t)}}function s(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?n(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,s)}c((i=i.apply(t,e||[])).next())})};const c=(()=>{const t=t=>(e,o)=>{const i=o(),n=i.search.searchResult&&i.search.searchResult.products.find(e=>e.sku===t);if(n){const o=i.search.availabilities[t],a=Object.assign(Object.assign({additionalImages:[n.thumbnailImage500]},n),{placeholderImage:i.app.screenSize.greaterThan.extraSmall?n.thumbnailImage250:n.thumbnailImage150,seoText:n.seoName});e((0,r.OR)({product:a,availability:o}))}},e=({sku:t,seoText:e,queryString:o,state:r,hash:a})=>(s,c)=>{const d=c(),l=n.Z.getPathByKey(d.intl.language,"product",e,t);s(i.JM.push(Object.assign(Object.assign({pathname:l},o?{search:o}:null),{state:r,hash:a||""})))};return{loadProduct:o=>i=>s(void 0,void 0,void 0,function*(){const{sku:n,seoText:r,sponsoredInfo:s,state:c,favourites:d,hash:l,query:u}=o;i(t(n));let S="";if(s?S=s?(0,a.Ie)(s):"":d&&(S=`?favourites=${d.slot}&referringPage=${encodeURIComponent(d.referringPage)||""}`),u){S=`${S?`${S}&`:"?"}${new URLSearchParams(u).toString()}`}yield i(e({sku:n,seoText:r,queryString:S,state:c,hash:l}))}),initialLoad:t,route:e}})()},24110:(t,e,o)=>{"use strict";o.d(e,{K_:()=>S,ZP:()=>E});var i=o(55763),n=o(28542),r=o(8436),a=o(62779),s=o(37424),c=o(87670),d=function(t,e,o,i){return new(o||(o=Promise))(function(n,r){function a(t){try{c(i.next(t))}catch(t){r(t)}}function s(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?n(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,s)}c((i=i.apply(t,e||[])).next())})};const l="FETCH_TARGET",u="REMOVE_UNAVAILABLE_BOUGHT_ALSO_BOUGHT",S=(()=>{const t=(t,e="boughtAlsoBought",o)=>(s,l)=>d(void 0,void 0,void 0,function*(){const d=l(),u=new r.Nk(d.config.dataSources.availabilityApiUrl,d.intl.locale);let S={};const E=d.product.recommendations[e];if(o){const t=E.map(t=>Object.assign(Object.assign({},t),{isAvailable:!0,isPreOrder:!1,isAvailabilityLoaded:!0}));return void s((0,c.NL)({key:e,products:t}))}try{S=yield u.getAvailabilities({postalCode:d.user.shippingLocation.postalCode,skus:t,storeLocations:[]})}catch(t){s(i.gt.error(new a.Y(t.code,t.message)))}const y=S.availabilities||[],v=E.map(t=>{const e=y.find(e=>e.sku===t.sku);let o=!1,i=!1;return e&&e.shipping&&(o=[n.Gw.InStock,n.Gw.InStockOnlineOnly,n.Gw.BackOrder,n.Gw.Preorder].includes(e.shipping.status),i=e.shipping.status===n.Gw.Preorder),Object.assign(Object.assign({},t),{isAvailable:o,isPreOrder:i,isAvailabilityLoaded:!!e})});s((0,c.$k)({key:e,productsWithAvailabilities:v}))});return{getRecommendationAvailabilities:t,getRecommendations:()=>({type:l}),getRecommendationAvailabilitiesAndRemoveUnavailable:(e,o="boughtAlsoBought")=>i=>d(void 0,void 0,void 0,function*(){(0,s.batch)(()=>d(void 0,void 0,void 0,function*(){switch(yield i(t(e,o)),o){case"boughtAlsoBought":i((0,c.ie)());break;case"buyStackRecommendations":i((0,c.OI)())}}))}),resetBoughtAlsoBought:()=>({type:c.zX.type}),setSponsoredProductsAvailable:t=>({type:c.Jp.type,payload:t}),removeUnavailableBoughtAlsoBought:()=>({type:u})}})(),E=S},66709:(t,e,o)=>{"use strict";o.d(e,{r:()=>r,y:()=>n});var i=function(t,e,o,i){return new(o||(o=Promise))(function(n,r){function a(t){try{c(i.next(t))}catch(t){r(t)}}function s(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?n(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,s)}c((i=i.apply(t,e||[])).next())})};const n={getNearbyStores:"scm/stores/getNearbyStores",onError:"scm/stores/onError",setNearbyStores:"scm/stores/setNearbyStores"};function r(t){const e={getNearbyStores:o=>r=>i(this,void 0,void 0,function*(){try{r({type:n.getNearbyStores});const i=yield t.getNearbyStores(o);r(e.setNearbyStores(i))}catch(t){throw r(e.onError()),t}}),onError:()=>({type:n.onError}),setNearbyStores:t=>({nearbyStores:t,type:n.setNearbyStores})};return e}},82556:(t,e,o)=>{"use strict";o.d(e,{S:()=>n,T:()=>r});var i=function(t,e,o,i){return new(o||(o=Promise))(function(n,r){function a(t){try{c(i.next(t))}catch(t){r(t)}}function s(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?n(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,s)}c((i=i.apply(t,e||[])).next())})};const n={getStoresStatus:"GET_STORES_STATUS",storesStatusSuccess:"STORES_STATUS_SUCCESS",storeStatusFailure:"STORE_STATUS_FAILURE",cleanUpStoresStatus:"CLEAN_UP_STORES_STATUS"},r={getStoresStatus:()=>(t,e,{storesStatusProvider:o})=>i(void 0,void 0,void 0,function*(){try{t({type:n.getStoresStatus});const e=yield o.getStoresStatus();Object.keys(e).length>0?t({type:n.storesStatusSuccess,storesStatus:e}):t({type:n.storesStatusSuccess,storesStatus:{}})}catch(e){t({type:n.storeStatusFailure})}}),cleanUpStoresStatus:()=>t=>{t({type:n.cleanUpStoresStatus})}}},33654:(t,e,o)=>{"use strict";o.d(e,{o:()=>v,f:()=>a});var i=o(82522),n=o(77720),r=o(37424);const a=()=>{const t=(0,r.useSelector)(i.oiq);return(0,n.DJ)(t)};var s=o(67294),c=o(97132),d=o(28542),l=o(52510);const u=(0,c.defineMessages)({title:{id:"search.components.youMightAlsoLike.title"}});var S=o(36691);const E="YOU_MIGHT_ALSO_LIKE",y="SKELETON_LOADERS",v=({className:t,isShowTitle:e=!0,loaderClassName:o})=>{const[n,a]=s.useState(!0),v=(0,r.useSelector)(i.tEB),p=(0,c.useIntl)(),_=(0,r.useSelector)(i.JKu);return s.useEffect(()=>{const t=setTimeout(()=>{a(!1)},8999);return()=>clearTimeout(t)},[]),n?s.createElement("div",{className:o,"data-testid":y},s.createElement(S.Vl,{width:200,count:5,hasAddToCartButton:!0,hasTitle:!0})):_&&0!==_.length?s.createElement("div",{"data-testid":E},s.createElement(l.f,{className:t,products:_,screenSize:v,language:(0,d.DC)(p.locale),title:e?p.formatMessage(u.title):"",isShowAddToCartButton:!0,noConversion:!0})):null}},73878:(t,e,o)=>{"use strict";var i;o.d(e,{kW:()=>i,zk:()=>n}),function(t){t.reported_bad_translations="reported_bad_translations"}(i||(i={}));const n="PDP Combo"},2892:t=>{t.exports="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzMiAzMiI+PGRlZnM+PHN0eWxlPi5jbHMtMXtmaWxsOiNmZmY7b3BhY2l0eTowLjY0O30uY2xzLTJ7ZmlsbDojMDA0NmJlO2ZpbGwtcnVsZTpldmVub2RkO308L3N0eWxlPjwvZGVmcz48dGl0bGU+TmF2aWdhdGlvbi1NZWRpYVBsYXk8L3RpdGxlPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTE2LDJBMTQsMTQsMCwxLDAsMzAsMTYsMTQsMTQsMCwwLDAsMTYsMloiLz48cGF0aCBjbGFzcz0iY2xzLTIiIGQ9Ik0xMywyMS4yNVYxMC43NWEuNzEuNzEsMCwwLDEsMS4xMy0uNmw2LjU4LDUuMjVhLjc2Ljc2LDAsMCwxLDAsMS4ybC02LjU4LDUuMjVBLjcxLjcxLDAsMCwxLDEzLDIxLjI1WiIvPjwvc3ZnPg=="}}]);