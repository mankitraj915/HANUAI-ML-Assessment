"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[7101],{20755:(e,t,n)=>{n.d(t,{Nk:()=>d,g3:()=>i});var i,r,o=n(8575),s=n(34620),a=n(99321),c=n(16978),u=n(91202),l=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})};!function(e){e.simple="application/vnd.bestbuy.simpleproduct.v1+json",e.standard="application/vnd.bestbuy.standardproduct.v1+json"}(i||(i={})),function(e){e.standard="application/vnd.bestbuy.standardpickup.v1+json"}(r||(r={}));class d{constructor(e,t,n=i.simple){this.baseUrl=e,this.locale=t,this.accept=n,this.MAX_SKUS_PER_REQUEST=96}getAvailability(e,t){return l(this,void 0,void 0,function*(){let n;const r=e.storeLocations.join("|"),u=e.postalCode&&(0,c.zO)(e.postalCode)?(0,c.pw)(e.postalCode):"",l=o.parse(this.baseUrl,!0),d=e.sku.concat(e.sellerId?`;${e.sellerId}`:"");l.query={accept:t?i.simple:i.standard,"accept-language":this.locale,locations:e.excludePickup?void 0:r,postalCode:u,skus:d};const h=o.format(l),p=yield(0,a.Z)(h,s.zi.AvailabilityApi),f=(yield p.text()).trim(),v=JSON.parse(f);if(v&&v.availabilities){const t=v.availabilities[0],i=t.shipping,r=t.pickup;n={pickup:e.excludePickup?void 0:{purchasable:r&&r.purchasable,status:r&&r.status,stores:this._getStores(r)},shipping:{levelsOfServices:this._getLevelsOfServices(t.shipping.levelsOfServices),purchasable:i&&i.purchasable,quantityRemaining:i&&i.quantityRemaining,status:i&&i.status},sku:t.sku,isGiftCard:t.isGiftCard,isService:t.isService,scheduledDelivery:t.scheduledDelivery}}return n})}getAvailabilities(e){var t,n;return l(this,void 0,void 0,function*(){const i=null===(n=null===(t=null==e?void 0:e.skus)||void 0===t?void 0:t.join)||void 0===n?void 0:n.call(t,"|"),r=null==e?void 0:e.storeLocations.join("|"),u=(0,c.zO)(null==e?void 0:e.postalCode)?(0,c.pw)(null==e?void 0:e.postalCode):"",l=o.parse(this.baseUrl,!0);l.query={accept:this.accept,"accept-language":this.locale,locations:(null==e?void 0:e.excludePickup)?void 0:r,postalCode:u,skus:i};const d=o.format(l);return(yield(0,a.Z)(d,s.zi.AvailabilityApi)).json()})}chunkedGetAvailabilitiesIndexedBySku(e){var t;return l(this,void 0,void 0,function*(){try{if(0===(null===(t=e.skus)||void 0===t?void 0:t.length))return{};const n=this.chunkSkuList(e.skus,this.MAX_SKUS_PER_REQUEST),i=yield Promise.all(n.map(t=>this.fetchAvailabilityChunk(Object.assign(Object.assign({},e),{skus:t})))),r={};return i.forEach(t=>{if(null==t?void 0:t.availabilities)for(const n of t.availabilities){const t=n.shipping,i=n.pickup,o=n.scheduledDelivery,s={pickup:(null==e?void 0:e.excludePickup)?void 0:{purchasable:i&&i.purchasable,status:i&&i.status},shipping:{levelsOfServices:this._getLevelsOfServices(n.shipping.levelsOfServices),purchasable:t&&t.purchasable,quantityRemaining:t&&t.quantityRemaining,status:t&&t.status},sku:n.sku,scheduledDelivery:o,isGiftCard:n.isGiftCard,isService:n.isService};r[n.sku]=s}}),r}catch(e){return null}})}getStoreAvailabilities(e){var t,n;return l(this,void 0,void 0,function*(){try{const i=null===(n=null===(t=null==e?void 0:e.skus)||void 0===t?void 0:t.join)||void 0===n?void 0:n.call(t,"|"),c=(0,u.r_)(e.pickupStoreLocations).map(e=>e.id).join("|"),l=o.parse(this.baseUrl,!0);l.query={accept:r.standard,"accept-language":this.locale,locations:c,skus:i};const d=o.format(l),h=yield(0,a.Z)(d,s.zi.AvailabilityApi);return(yield h.json()).availabilities}catch(e){return Promise.reject(e)}})}getAvailabilitiesIndexedBySku(e){return l(this,void 0,void 0,function*(){const t={},n=yield this.getAvailabilities(e);if(n&&n.availabilities)for(const i of n.availabilities){const n=i.shipping,r=i.pickup,o=i.scheduledDelivery,s={pickup:(null==e?void 0:e.excludePickup)?void 0:{purchasable:r&&r.purchasable,status:r&&r.status},shipping:{levelsOfServices:this._getLevelsOfServices(i.shipping.levelsOfServices),purchasable:n&&n.purchasable,quantityRemaining:n&&n.quantityRemaining,status:n&&n.status},sku:i.sku,scheduledDelivery:o};t[i.sku]=s}return t})}_getStores(e){if(!e||!e.locations||0===e.locations.length)return;const t=[];for(const n of e.locations)t.push({hasInventory:n.hasInventory,locationId:n.locationKey,name:n.name,quantityOnHand:n.quantityOnHand});return t}_getLevelsOfServices(e){if(!Array.isArray(e)||!e.length)return null;return e.sort((e,t)=>e.price===t.price?0:e.price>t.price?1:-1).map(({deliveryDate:e,deliveryDateExpiresOn:t,deliveryDatePrecision:n,price:i})=>({deliveryDate:e,deliveryDateExpiresOn:t,deliveryDatePrecision:n,price:i}))}fetchAvailabilityChunk(e){return l(this,void 0,void 0,function*(){return yield this.getAvailabilities(e)})}chunkSkuList(e,t){const n=[];for(let i=0;i<e.length;i+=t)n.push(e.slice(i,i+t));return n}}},61152:(e,t,n)=>{n.d(t,{U:()=>a});var i=n(34620),r=n(99321),o=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})};class s{constructor(e,t,n,i,r){this.baseUrl=e,this.locale=t,this.regionCode=n,this.livePreviewHash=i,this.previewTimestamp=r,this.langParam="brand","fr-CA"===this.locale&&(this.langParam="marque")}getBrandsContent(e){return o(this,void 0,void 0,function*(){const t=e.filter(e=>void 0!==e);let n=this.baseUrl+`path/${this.locale}/${this.langParam}/${t.join("/")}?regioncode=${this.regionCode}`;this.livePreviewHash&&(n+=`&livepreview=${this.livePreviewHash}`,this.previewTimestamp&&(n+=`&previewtime=${this.previewTimestamp}`));const o=yield(0,r.Z)(n.toLowerCase(),i.zi.BrandContentApi);return yield o.json()})}}function a(e,t,n,i,r){return new s(e,t,n,i,r)}},31725:(e,t,n)=>{n.d(t,{K:()=>d});var i=n(38377),r=n(8575),o=n(34620),s=n(99321);const a={allCategoriesFilterName:"All Categories"},c={allCategoriesFilterName:"Toutes les catÃ©gories"};var u=n(62472),l=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})};class d{constructor(e,t){this.baseUrl=e,this.locale=t,this.messages=a,this.getSeoDefinition=(e,t,n)=>{let i=this.getCategoryName(e,t);if(n.length>1){i+=` : ${n[n.length-2].name}`}return i},this.mapCategory=e=>({categoryId:e.id,count:e.productCount,hasSubcategories:e.hasSubcategories,isSelected:!1,name:this.getCategoryName(e.id,e.name),seoText:e.seoText,seoParentSeoText:e.inheritedSeoText}),this.getCategoryName=(e,t)=>"Departments"===e?this.messages.allCategoriesFilterName:t,this.compareCategories=(e,t)=>e.name<t.name?-1:e.name>t.name?1:0,this.locale.startsWith("fr")&&(this.messages=c)}getCategory(e){return l(this,void 0,void 0,function*(){const t=yield this.getCategoryApiJson(e);let n=null;if("fr-CA"===this.locale){const t=yield this.getCategoryApiJson(e,"en-CA");n=this.buildBreadcrumb(t)}const i=this.buildBreadcrumb(t),r=this.getCategoryName(e,t.name),o=this.getSeoDefinition(e,r,i);let s=this.buildSubCategories(t);"departments"===e&&(s=s.sort(this.compareCategories));return{categoryBreadcrumb:i,altCategoryBreadcrumb:n,id:t.id,name:this.getCategoryName(t.id,t.name),seoDescription:"",seoText:t.seoText,altLangSeoText:t.altLangSeoText,seoTitle:o,subCategories:s,seoParentCategoryId:t.inheritedSeoTextCategoryId,seoParentSeoText:t.inheritedSeoText}})}getCategoryApiJson(e,t=this.locale){return l(this,void 0,void 0,function*(){const n=r.parse(r.resolve(this.baseUrl,e));n.query={lang:t};const i=r.format(n),a=yield(0,s.Z)(i,o.zi.CategoryApi),c=yield a.json();return(0,u.FX)(e)||(0,u.Ag)(e)?(0,u.rf)(c):c})}buildBreadcrumb(e){const t=[];if(e.parentCategories){let n=e.parentCategories[0];for(;n&&"presentationhierarchy1"!==n.id;){const e=this.mapCategory(n);t.unshift(e),n=n.parentCategory}}const n=this.mapCategory(e);return t.push(n),t}buildSubCategories(e){let t;return e.subCategories&&(t=(0,i.Z)(e.subCategories,e=>this.mapCategory(e))),t}}},89722:(e,t,n)=>{n.d(t,{E:()=>l});var i=n(31725),r=n(26406),o=n(34155);const s=Number(o.env.API_CACHE_MAX_AGE)||6e4,a=new r.z({max:1e3,ttl:s});var c=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})};class u{constructor(e,t){this.categoryProvider=e,this.locale=t}getCategory(e){return c(this,void 0,void 0,function*(){const t=`${e}-${this.locale}`;let n=a.get(t);return n||(n=yield this.categoryProvider.getCategory(e),a.set(t,n)),Promise.resolve(n)})}}function l(e,t){const n=new i.K(e,t);return"undefined"==typeof window?new u(n,t):n}},87186:(e,t,n)=>{n(8575),n(99321)},40034:(e,t,n)=>{n.d(t,{aU:()=>c});var i=n(28542),r=n(8575),o=n(34620),s=n(99321),a=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})};class c{constructor(e,t,n){this.baseUrl=e,this.locale=t,this.sku=n}getContent(){return a(this,void 0,void 0,function*(){const e=r.parse(`${this.baseUrl}products/${this.sku}/blogs`,!0);let t;e.query={lang:this.locale.toLowerCase()};try{const n=r.format(e),i=yield(0,s.Z)(n,o.zi.ShowcaseContentApi);t=yield i.json()}catch(e){}return this.mapResultToShowcaseBannerContent(t)})}mapResultToShowcaseBannerContent(e){if(!e.contents||!e.contents.length)return null;const t=e.contents.filter(e=>!!e.categories&&(e.categories.includes(l.en)||e.categories.includes(l.fr)));if(!t.length)return null;const n=t.reduce((e,t)=>e.modifiedDate>t.modifiedDate?e:t);return{title:n.title,type:i.mL.showcaseBanner,event:{url:this.appendTrackingParameter(n.url),eventType:i.GM.externalUrl},backgroundImage:{small:{x1:n.imageUrl,x2:n.imageUrl,x3:n.imageUrl}}}}appendTrackingParameter(e){if(!e)return null;const t=[`icmp=${u}`],n=r.parse(e);n.query&&t.unshift(n.query);return`${e.split("?")[0]}?${t.join("&")}`}}const u="mdot_pdp_showcase_link",l={en:"bestbuy-showcase",fr:"en-vedette-chez-bestbuy"}},62150:(e,t,n)=>{n.d(t,{oy:()=>R,Xe:()=>D,QH:()=>$,u:()=>T,s_:()=>_,H8:()=>q,B4:()=>I,Iw:()=>j,ob:()=>L,HF:()=>H,EK:()=>z,fw:()=>Z,de:()=>N});var i=n(34620),r=n(8575),o=n(99321),s=n(99458),a=n(26406),c=n(34155);const u=Number(c.env.API_CACHE_MAX_AGE)||6e4,l=new a.z({max:1e3,ttl:u});var d=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})};class h{constructor(e,t,n,i,o,s,a,c){let u=s?`${s}/`:"";u=u&&a?`${u}${a}`:u;const l=r.parse((e+u).split("?")[0],!0);l.query=Object.assign(Object.assign({},c),{lang:t}),n&&(l.query.regionCode=n),i&&(l.query.livePreview=i),o&&(l.query.previewTime=o),this.url=decodeURIComponent(r.format(l).toLowerCase())}getContent(e,t,n=3e3){return d(this,void 0,void 0,function*(){let i,r=!1;return new Promise((a,c)=>d(this,void 0,void 0,function*(){const u=setTimeout(()=>{r=!0,(0,s.Z)().warn(`${this.url} timed out`),a(e)},n),d=this.url;if("undefined"==typeof window){const e=l.get(d);if(e)return clearTimeout(u),void a(e)}try{i=yield(0,o.Z)(this.url,t)}catch(e){return void c(e)}if(!r)try{e=yield i.json(),"undefined"==typeof window&&l.set(d,e),a(e)}catch(e){}finally{clearTimeout(u)}a(e)}))})}}var p=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})};const f=class extends h{constructor(e,t,n,i,r,o){super(e,t,n,i,r,void 0,void 0,o)}getContent(){const e=Object.create(null,{getContent:{get:()=>super.getContent}});return p(this,void 0,void 0,function*(){return e.getContent.call(this,{},i.zi.HomePageContentApi,1e4)})}};var v=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})};class g{constructor(e,t,n,i,o){let s=i?`${g.resourceType}/${i}/`:"";s=s&&o?`${s}${o}`:s;const a=r.parse(e+s,!0);a.query={lang:t},n&&(a.query.regionCode=n),this.url=r.format(a).toLowerCase()}getEntry(){return v(this,void 0,void 0,function*(){const e=r.format(this.url).toLowerCase(),t=yield(0,o.Z)(e,i.zi.PersonalizedContentApi);return yield t.json()})}}g.resourceType="pers";const y=g;var m=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})};const C=class extends h{constructor(e){super(e)}getContent(){return m(this,void 0,void 0,function*(){const e=yield(0,o.Z)(this.url,i.zi.HomePageFallbackContentApi);return yield e.json()})}};const w=class extends h{constructor(e,t,n,i,r,o){super(e,t,n,i,r,"collections",o)}getContent(e={},t=i.zi.CollectionContentApi,n=3e3){return super.getContent(e,t,n)}};const b=class extends h{constructor(e,t,n,i,r,o,s){super(e,t,n,i,r,"categories",o,s)}getContent(){return super.getContent({},i.zi.CategoryContentApi)}};const P=class extends h{constructor(e,t,n,i,r,o){super(e,t,n,i,r,"marketing-pages",o)}getContent(){return super.getContent({id:""},i.zi.CollectionContentApi)}};const S=class extends h{constructor(e,t,n,i){super(e,t,n,void 0,"products",i);const o=r.parse(`${e.toLowerCase()}products/${i}`,!0);o.query={lang:t.toLowerCase(),regioncode:n.toLowerCase()},this.url=r.format(o)}getContent(e={},t=i.zi.ProductContentApi,n=3e3){return super.getContent(e,i.zi.ProductContentApi,n)}};const A=class extends h{constructor(e,t,n,i,r,o,s){super(e,t,n,i,r,"brands/0/store-pages",s)}getContent(){return super.getContent({},i.zi.CollectionContentApi)}};const k=class extends h{constructor(e,t,n,i,r,o){super(e,t,n,i,r,"brands",o)}getContent(){return super.getContent({},i.zi.CollectionContentApi)}};class x extends h{constructor(e,t,n,i,r,o){super(e,t,n,i,r,"services/geek-squad-pages",o)}getContent(){return super.getContent({id:""},i.zi.CollectionContentApi)}}const E=class extends h{constructor(e,t,n,i,r,...o){super(e,t,n,i,r,"corporate-pages",o[0])}getContent(){return super.getContent({},i.zi.CollectionContentApi)}};const O=class extends h{constructor(e,t,n,i,r,o){super(e,t,n,i,r,"careers",o)}getContent(){return super.getContent({},i.zi.CategoryContentApi)}};const U=class extends h{constructor(e,t,n,i,r){super(e,t,n,void 0,void 0,"search",i,r)}getContent(){return super.getContent({},i.zi.SearchContentApi)}};function j(e,t,n,i,r,o){return new f(e,t,n,i,r,o)}function L(e){return new C(e)}function _(e,t,n,i,r,o){return new w(e,t,n,i,r,o)}function T(e,t,n,i,r,o,s){return new b(e,t,n,i,r,o,s)}function $(e,t,n,i,r,...o){const s=o[1]||o[0];return new O(e,t,n,i,r,s)}function I(e,t,n,i,r,...o){const s=o[1];return new P(e,t,n,i,r,s)}function z(e,t,n,i){return new S(e,t,n,i)}function D(e,t,n,i,r,...o){const s=o[0],a=o[1];return new A(e,t,n,i,r,s,a)}function R(e,t,n,i,r,o){return new k(e,t,n,i,r,o)}function N(e,t,n,i,r,...o){const s=o[1];return new x(e,t,n,i,r,s)}function q(e,t,n,i,r,...o){const s=o[1];return new E(e,t,n,i,r,s)}function H(e,t,n,i,r){return new y(e,t,n,i,r)}function Z(e,t,n,i,r){return new U(e,t,n,i,r)}},14642:(e,t,n)=>{n.d(t,{Q:()=>c});var i=n(34620),r=n(99321),o=n(8187),s=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})};class a{constructor(e,t,n,i){this.baseUrl=e,this.locale=t,this.regionCode=n,this.livePreviewHash=i}constructUrl(e,t={}){const n=`${this.baseUrl}${e}`,i=(0,o.P5)(n);return i.searchParams.append("lang",this.locale),i.searchParams.append("regioncode",this.regionCode),this.livePreviewHash&&i.searchParams.append("livepreview",this.livePreviewHash),Object.entries(t).forEach(([e,t])=>{t&&i.searchParams.append(e,t)}),i.toString().toLowerCase()}getHub(){return s(this,void 0,void 0,function*(){const e=this.constructUrl("/",{}),t=yield(0,r.Z)(e,i.zi.HelpTopicApi),n=yield t.json();return n.categories=n.helpCategories.map(e=>{const t=e.topics.map(e=>this.createHelpLink(e));return Object.assign(Object.assign({},this.createHelpLink(e)),{topics:t})}),delete n.helpCategories,n})}getCategory(e){return s(this,void 0,void 0,function*(){const t=this.constructUrl(`/categories/${e}`,{}),n=yield(0,r.Z)(t,i.zi.HelpTopicApi),o=yield n.json();return Object.assign(Object.assign({},o),{topics:o.topics.map(e=>this.createHelpLink(e))})})}getTopic(e,t){return s(this,void 0,void 0,function*(){const n=this.constructUrl(`/categories/${e}/topics/${t}`,{}),o=yield(0,r.Z)(n,i.zi.HelpTopicApi);return yield o.json()})}getSubTopic(e,t,n){return s(this,void 0,void 0,function*(){const o=this.constructUrl(`/categories/${e}/topics/${t}/subtopics/${n}`,{}),s=yield(0,r.Z)(o,i.zi.HelpTopicApi);return yield s.json()})}createHelpLink(e){const[,,,t,,n]=e.path&&e.path.split("/"),i=Object.assign(Object.assign({},e),{categoryId:t});return n?Object.assign(Object.assign({},i),{topicId:n}):i}}function c(e,t,n,i){return new a(e,t,n,i)}},1742:(e,t,n)=>{n.d(t,{X:()=>r,Z:()=>o});var i=n(99458);const r={clear:()=>{window.localStorage.clear()},getItem:e=>{try{const t=window.localStorage.getItem(e);return t?JSON.parse(t):null}catch(e){return(0,i.Z)().error(new Error("Error getting item from the localStorage"+e)),null}},removeItem:e=>{delete window.localStorage[e]},setItem:(e,t)=>{try{window.localStorage.setItem(e,JSON.stringify(t))}catch(e){return void(0,i.Z)().error(new Error("Error setting item into the localStorage"+e))}}},o=r},63424:(e,t,n)=>{n.d(t,{P:()=>a});var i=n(8575),r=n(34620),o=n(99321),s=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})};class a{constructor(e,t){this.baseUrl=e,this.locale=t}locate(e,t,n){return s(this,void 0,void 0,function*(){const s=i.parse(this.baseUrl);s.query={includeStores:e,lang:this.locale},t?(s.query.lat=t.latitude,s.query.long=t.longitude):n&&(s.query.postalCode=n);const a=i.format(s),c=yield(0,o.Z)(a,r.zi.LocationApi),u=yield c.json();return{city:u.city,nearbyStores:this.getNearbyStores(u.nearbyStores),postalCode:u.postalCode,regionCode:u.region,country:u.country}})}getNearbyStores(e){const t=[];if(e&&e.length>0)for(const n of e)if(!n.type.includes("Kiosk")){const e={locationId:n.locationId,name:n.name};t.push(e)}return t}}},94975:(e,t,n)=>{n.d(t,{V:()=>v});var i=n(8187),r=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})};const o=["326096","331115","332121","271246","332119","307114","320114","seller 7","seller 8","seller 9"],s={AB:0,BC:1,MB:2,NB:3,NL:4,NS:5,NT:6,NU:7,ON:8,PE:9,QC:10,SK:11,YT:12};class a{getOffers(e,t){return r(this,void 0,void 0,function*(){const n=yield this.getCount(e),i=[];for(let e=0;e<10;e++)i.push({isWinner:0===e,isOnSale:0===e,ehf:[],hideSavings:0===e,isAdvertised:0===e,isMarketplace:0===e,isOnClearance:0===e,isPreorderable:0===e,offerId:"offer"+e,regularPrice:this.getPricing(e+1,t).priceWithEhf,salePrice:this.getPricing(e+1,t).priceWithEhf,sku:"",saleStartDate:"",saleEndDate:"",pricing:this.getPricing(e+1,t),sellerId:o[e]});return Promise.resolve(i.slice(0,n))})}getCount(e){const t=e.slice(-1),n=parseInt(t,10);return isNaN(n)?Promise.resolve(1):new Promise(e=>setTimeout(()=>e(n),1e3))}getPricing(e,t){const n=e%2!=0?s[t]:0;return{ehf:n,isSubscription:!1,priceWithEhf:e+n,priceWithoutEhf:e,saleEndDate:e%2==0?this.getSalesEndDate(e):void 0,saving:e%2==0?e/2:0}}getSalesEndDate(e){return(0,i.Bv)().add(e,"day").format()}}var c=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})};class u{getOffers(e){return c(this,void 0,void 0,function*(){return[]})}}var l=n(72532),d=n(34620),h=n(99321),p=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})};class f{constructor(e,t=!1){this.url=e,this.isFutureDatePricingEnabled=t}getOffers(e,t,n,i=""){return p(this,void 0,void 0,function*(){let r;n&&(r=(0,l.G)(n,3,!1));const o=r?`${this.url}/${e}/offers?postalCode=${n}`:`${this.url}/${e}/offers`;let s={};this.isFutureDatePricingEnabled&&("undefined"==typeof window?"string"==typeof i&&i.length>0&&(s={headers:{cookie:i,"Cache-Control":"no-cache"}}):s={credentials:"include"});const a=yield(0,h.Z)(o,d.zi.OfferApi,s);return(yield a.json()).map(e=>{const n=e.regularPrice-e.salePrice,i=e.ehf&&e.ehf.find(e=>e.province===t),r=i?i.amount:0;return Object.assign(Object.assign({},e),{pricing:{ehf:r,priceWithEhf:e.salePrice+r,priceWithoutEhf:e.salePrice,saleEndDate:e.saleEndDate,saving:e.hideSavings?0:n}})})})}}const v=(e,t)=>"mock"===e?new a:e?new f(e,t):new u},53600:(e,t,n)=>{n.d(t,{Y:()=>a});var i=n(34620),r=n(99321),o=n(8187),s=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})};class a{constructor(){this.MAX_SKUS_PER_REQUEST=20}getAggregatedProductAndOfferInformation(e){var t;return s(this,void 0,void 0,function*(){const n=this.buildUrl(e);try{const e=yield(0,r.Z)(n,i.zi.PresentationCatalogQueryApi);return yield e.json()}catch(i){return console.error("PCQA: failed to fetch aggregated product and offer information:",{error:i instanceof Error?i.message:i,url:n,props:{skuListLength:null===(t=e.skuList)||void 0===t?void 0:t.length,locale:e.locale,includeReviews:e.includeReviews}}),null}})}chunkedGetAggregatedProductAndOfferInformation(e){var t,n;return s(this,void 0,void 0,function*(){try{const n={chunkSize:this.MAX_SKUS_PER_REQUEST,chunks:[],combinedItems:[]};if(0===(null===(t=e.skuList)||void 0===t?void 0:t.length))return n;const i=this.chunkSkuList(e.skuList,this.MAX_SKUS_PER_REQUEST),r=yield Promise.all(i.map(t=>this.fetchChunk(Object.assign(Object.assign({},e),{skuList:t}))));return r.reduce((e,t)=>t?Object.assign(Object.assign({},e),{chunks:[...e.chunks,t],combinedItems:[...e.combinedItems,...t.items]}):e,n)}catch(t){return console.error("PCQA: failed to fetch chunked product and offer information:",{error:t instanceof Error?t.message:t,props:{url:e.url,skuListLength:null===(n=e.skuList)||void 0===n?void 0:n.length,locale:e.locale,includeReviews:e.includeReviews}}),null}})}fetchChunk(e){return s(this,void 0,void 0,function*(){try{const t=this.buildUrl(e),n=yield(0,r.Z)(t,i.zi.PresentationCatalogQueryApi);return yield n.json()}catch(e){throw e}})}chunkSkuList(e,t){const n=[];for(let i=0;i<e.length;i+=t)n.push(e.slice(i,i+t));return n}buildUrl(e){const{url:t,skuList:n,includeReviews:i,locale:r}=e,s={ids:n,lang:r},a=Object.keys(s).map(e=>`${e}=${encodeURIComponent(s[e])}`).join("&"),c=(0,o.P5)(t);return c.search=a,i&&c.searchParams.append("include","reviews"),c.toString()}}},26340:(e,t,n)=>{n.d(t,{_:()=>c});var i=n(34620),r=n(99321),o=n(8575),s=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})};class a{constructor(e){var t;if(this.baseUrl=e,!this.baseUrl)throw new Error("No Product Domain API Url was provided");this.url=o.parse(this.baseUrl),this.pathname=null!==(t=this.url.pathname)&&void 0!==t?t:""}reportWrongFRTranslation(e){return s(this,void 0,void 0,function*(){if(!e)throw new Error("No SKU was given");this.url.pathname=`${this.pathname}/${e}/report-translation`;const t=o.format(this.url);return(0,r.Z)(t,i.zi.ProductDomainProvider,{method:"POST"},!0)})}}function c({baseUrl:e=""}){return new a(e)}},62897:(e,t,n)=>{n.d(t,{i:()=>f});var i=n(8575),r=n(34620),o=n(99321),s=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})};class a{constructor(e){this.baseUrl=e}getConfigs(){return s(this,void 0,void 0,function*(){const e=i.parse(this.baseUrl),t=i.format(e),n=yield(0,o.Z)(t,r.zi.RemoteConfigApi),s=yield n.text();let a=s;s.indexOf("=")>-1&&(a=s.substring(s.indexOf("=")+1,s.lastIndexOf(";")));const c=JSON.parse(a);return{isAddToCartEnabled:c.isAddToCartEnabled,isPlpAvailabilityEnabled:c.enablePlpAvailability,isQueueItEnabled:c.isQueueItEnabledReactSite,isRpuEnabled:c.ispuEnabled,isCheckoutQueueEnabled:c.isQueueItEnabledReactSite,isServerSideRenderEnabled:c.isServerSideRenderEnabled,isTargetEnabled:c.isTargetEnabled,isLightweightBasket:!(void 0===c.enableExpressCheckout||!0===c.enableExpressCheckout),hiddenPlpCategoryList:c.hiddenPlpCategoryList}})}}var c=n(26406),u=n(34155);const l=Number(u.env.API_CACHE_MAX_AGE)||6e4,d=new c.z({max:1e3,ttl:l});var h=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})};class p{constructor(e){this.remoteConfigProvider=e}getConfigs(){return h(this,void 0,void 0,function*(){const e="remote-config";let t=d.get(e);return t?Promise.resolve(t):(t=yield this.remoteConfigProvider.getConfigs(),d.set(e,t),t)})}}function f(e){return"undefined"==typeof window?new p(new a(e)):new a(e)}}}]);