var chatDispatch={INIT_CHAT:"INIT_CHAT",LAUNCH_CHAT:"LAUNCH_CHAT"},liveChatEvents={LIVE_AGENT_AVAILABLE:"LIVE_AGENT_AVAILABLE",LIVE_AGENT_CHAT_ENDED:"LIVE_AGENT_CHAT_ENDED",LIVE_AGENT_CHAT_INITIALIZE:"LIVE_AGENT_CHAT_INITIALIZE",LIVE_AGENT_CHAT_LAUNCH:"LIVE_AGENT_CHAT_LAUNCH",LIVE_AGENT_CHAT_RESTORE:"LIVE_AGENT_CHAT_RESTORE",LIVE_AGENT_CHAT_STARTED:"LIVE_AGENT_CHAT_STARTED",LIVE_AGENT_CHAT_STATE_CHANGE:"LIVE_AGENT_CHAT_STATE_CHANGE",LIVE_AGENT_IFRAME_LOADED:"LIVE_AGENT_IFRAME_LOADED",LIVE_AGENT_MAXIMIZED:"LIVE_AGENT_MAXIMIZED",LIVE_AGENT_MINIMIZED:"LIVE_AGENT_MINIMIZED",LIVE_AGENT_UNAVAILABLE:"LIVE_AGENT_UNAVAILABLE",LIVE_CHAT_UPDATE_SALESFORCE_CONFIG:"LIVE_CHAT_UPDATE_SALESFORCE_CONFIG"},generalChatEvents={BLUE_SHIRT_AGENT_CHAT_IN_SESSION:"BLUE_SHIRT_AGENT_CHAT_IN_SESSION",BLUE_SHIRT_CLOSING_CHAT_SESSION:"BLUE_SHIRT_CLOSING_CHAT_SESSION",CONTACT_CHAT_IN_SESSION:"CONTACT_CHAT_IN_SESSION",CONTACT_CLOSING_CHAT_SESSION:"CONTACT_CLOSING_CHAT_SESSION"},liveChatIframeIdValue="live-chat-iframe",liveChatStateLocalStorageKey="liveChatState",chatType="Contact_Center_Chat";!function(){var t,i={activeChat:null,isDesktop:!1,minimized:!1,status:{agentOnline:!1,anotherChatInSession:!1,loadingAgentAvailability:!0}},e=((t=document.createElement("iframe")).setAttribute("src","/client/liveagent.html"),t.setAttribute("class","liveChatFrame"),t.setAttribute("id",liveChatIframeIdValue),t.setAttribute("data-automation",liveChatIframeIdValue),t.setAttribute("sandbox","allow-scripts allow-downloads allow-forms allow-same-origin allow-popups"),t);function a(t){o({status:Object.assign({},i.status,{anotherChatInSession:t})}),t||A()}function n(t){var e=document.getElementById(liveChatIframeIdValue);e&&e.contentWindow.postMessage({eventName:chatDispatch.LAUNCH_CHAT},"*")}function E(t){o({minimized:t}),_()}function s(t){o({status:Object.assign({},i.status,{agentOnline:t,loadingAgentAvailability:!1})})}function A(){var t;(t=document.getElementById(liveChatIframeIdValue))&&t.parentNode.removeChild(e),document.getElementById(liveChatIframeIdValue)||document.body.appendChild(e)}function _(){var t=["liveChatFrame",i.activeChat?"liveChatActive":"",i.isDesktop?"liveChatDesktop":"",i.maximized?"liveChatMaximized":"",i.minimized?"liveChatMinimized":""].join(" ").trim();const e=document&&document.getElementById(liveChatIframeIdValue);e&&e.setAttribute("class",t)}function o(t){var e={activeChat:i.activeChat,isDesktop:i.isDesktop,minimized:i.minimized,status:{agentOnline:i.status.agentOnline,anotherChatInSession:i.status.anotherChatInSession,loadingAgentAvailability:i.status.loadingAgentAvailability}},t=Object.assign({},i,t),a={activeChat:t.activeChat,isDesktop:t.isDesktop,minimized:t.minimized,status:{agentOnline:t.status.agentOnline,anotherChatInSession:t.status.anotherChatInSession,loadingAgentAvailability:t.status.loadingAgentAvailability}};i=t,t=a,JSON.stringify(e)!==JSON.stringify(t)&&(window.dispatchEvent(new CustomEvent(liveChatEvents.LIVE_AGENT_CHAT_STATE_CHANGE,{detail:{activeChat:i.activeChat,status:{agentOnline:i.status.agentOnline,loadingAgentAvailability:i.status.loadingAgentAvailability}}})),window.localStorage.setItem(liveChatStateLocalStorageKey,JSON.stringify({activeChat:i.activeChat})))}"undefined"!=typeof window&&(window.addEventListener(liveChatEvents.LIVE_AGENT_CHAT_INITIALIZE,function(t){i[chatType]||console.warn("No config found");i.activeChat||(o({activeChat:null}),A());o({status:Object.assign({},i.status,{loadingAgentAvailability:!0})})}),window.addEventListener(liveChatEvents.LIVE_AGENT_CHAT_LAUNCH,n),window.addEventListener(liveChatEvents.LIVE_AGENT_CHAT_STARTED,function(t){i.status.anotherChatInSession||(window.dispatchEvent(new CustomEvent(generalChatEvents.CONTACT_CHAT_IN_SESSION)),o({activeChat:!0,isDesktop:t.detail&&"DESKTOP"===t.detail.device,minimized:!1}),_())}),window.addEventListener(liveChatEvents.LIVE_AGENT_AVAILABLE,()=>s(!0)),window.addEventListener(liveChatEvents.LIVE_AGENT_UNAVAILABLE,()=>s(!1)),window.addEventListener(liveChatEvents.LIVE_AGENT_CHAT_ENDED,function(){o({activeChat:null,isDesktop:!1,status:Object.assign({},i.status,{agentOnline:i.status.agentOnline})}),_(),window.dispatchEvent(new CustomEvent(generalChatEvents.CONTACT_CLOSING_CHAT_SESSION)),setTimeout(()=>{A()},100)}),window.addEventListener(liveChatEvents.LIVE_AGENT_IFRAME_LOADED,function(t){!function(){var t=document.getElementById(liveChatIframeIdValue);var e=Object.assign({},i[chatType]);var a=function(){if("undefined"!=typeof document){var t=new RegExp("(?:(?:^|.*;\\s*)cid\\s*\\=\\s*([^;]*).*$)|^.*$"),t=document.cookie.replace(t,"$1");if(!t)return null;try{return JSON.parse(decodeURIComponent(t))}catch(t){return null}}return null}();{var n;a&&"UNAUTHENTICATED"!==a.authenticationState&&(n={customerEmail:a.email,customerFirstName:a.firstName,customerLastName:a.lastName})}e?t?(a={detail:Object.assign({},e,!!n&&n),eventName:chatDispatch.INIT_CHAT},e=JSON.parse(JSON.stringify(a)),t.contentWindow.postMessage(e,"*")):console.error("No chat frame found."):console.error("No config provided.")}()}),window.addEventListener(liveChatEvents.LIVE_AGENT_MAXIMIZED,()=>E(!1)),window.addEventListener(liveChatEvents.LIVE_AGENT_MINIMIZED,()=>E(!0)),window.addEventListener(liveChatEvents.LIVE_CHAT_UPDATE_SALESFORCE_CONFIG,function(t){o({[chatType]:Object.assign({},i[chatType],t.detail||{})})}),window.addEventListener(generalChatEvents.BLUE_SHIRT_AGENT_CHAT_IN_SESSION,()=>a(!0)),window.addEventListener(generalChatEvents.BLUE_SHIRT_CLOSING_CHAT_SESSION,()=>a(!1))),window.onload=function(){var t=window.localStorage.getItem(liveChatStateLocalStorageKey);t&&(t=JSON.parse(t)["activeChat"],t&&(window.dispatchEvent(new CustomEvent(generalChatEvents.CONTACT_CHAT_IN_SESSION)),o({activeChat:!0}),A(),setTimeout(()=>{n()},1800)))}}();