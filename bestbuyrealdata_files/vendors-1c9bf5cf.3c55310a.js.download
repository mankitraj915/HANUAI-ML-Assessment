"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[7458],{60800:(e,t,a)=>{a.d(t,{A6w:()=>Rt,ABy:()=>Mt,ANB:()=>Zt,APY:()=>n,Bb1:()=>je,Br4:()=>zt,CLt:()=>Da,D7j:()=>Xt,Efk:()=>ca,FwO:()=>ct,GUR:()=>js,GWk:()=>Ta,GwE:()=>c,HOK:()=>m,Hkf:()=>Ua,IG8:()=>na,IvO:()=>De,JYd:()=>zi,LLl:()=>ka,LTx:()=>Ei,N4V:()=>qi,NGC:()=>We,NjD:()=>aa,NkW:()=>Hi,Nu6:()=>ga,Oo8:()=>Bt,P2k:()=>$t,Phz:()=>Gi,QWB:()=>Ie,SMi:()=>s,Smc:()=>la,T4n:()=>xe,TOw:()=>Dt,To_:()=>se,W6I:()=>va,XUc:()=>ae,XiM:()=>J,Xmv:()=>qa,Xq0:()=>Ra,Z$L:()=>As,ZdT:()=>xt,_Kv:()=>Vi,_oW:()=>xi,ahf:()=>wi,c9g:()=>$i,d2W:()=>ua,dvI:()=>wa,eId:()=>Ft,fHO:()=>Ui,gdw:()=>Qt,gkq:()=>da,hGs:()=>sa,hev:()=>Fi,hhz:()=>ti,kjk:()=>Ya,ls9:()=>Ni,nQN:()=>ta,o4n:()=>Bi,o8j:()=>ei,oDS:()=>ji,pfB:()=>gs,qHA:()=>Yr,qTh:()=>wt,qX1:()=>St,tLq:()=>xs,wrP:()=>u,yDL:()=>V,ybC:()=>Ma});var s,n,r,i,o,l,c,d,u,m,p,h,C,g,y,f=a(96163),E=a(89539),v=a(69744),P=a.n(v),b=a(67294),S=a(36032),k=a(97132),I=a(31330),O=a(8575),_=a(37424),T=a(73935),L=a(93967),N=a.n(L),A=a(66261),M=a(54483),D=a.n(M),R=a(13412),w=a(40111),B=a(27484),F=a.n(B),x=a(29387),j=a.n(x),q=a(70178),U=a.n(q);!function(e){e.Bundle="Bundle",e.Constituent="Constituent",e.EHF="EHF",e.FreeItem="FreeItem",e.Product="Product",e.Psp="PSP",e.RequiredPart="RequiredPart",e.Service="Service"}(s||(s={})),function(e){e.PRP="PRP",e.PSP="PSP"}(n||(n={})),function(e){e.InStock="InStock",e.SoldOutOnline="SoldOutOnline",e.OutofStockInRegion="OutofStockInRegion",e.RegionRestricted="RegionRestricted",e.Unknown="Unknown"}(r||(r={})),function(e){e.GST="GST",e.PST="PST",e.HST="HST"}(i||(i={})),function(e){e.V2="v2",e.V3="v3"}(o||(o={})),function(e){e.Unknown="Unknown",e.InStock="InStock",e.OutOfStock="OutOfStock",e.Preorder="Preorder",e.NotAvailable="NotAvailable",e.ComingSoon="ComingSoon",e.OnlineOnly="OnlineOnly"}(l||(l={})),function(e){e.Unknown="Unknown",e.InStock="InStock",e.Preorder="Preorder",e.ComingSoon="ComingSoon",e.SoldOutOnline="SoldOutOnline",e.NotAvailable="NotAvailable",e.BackOrder="BackOrder",e.OutofStockInRegion="OutofStockInRegion",e.CannotShipToLocation="CannotShipToLocation",e.RegionRestricted="RegionRestricted",e.InStoreOnly="InStoreOnly",e.InStockOnlineOnly="InStockOnlineOnly"}(c||(c={})),function(e){e.CART_ITEM_SAVE4LATER_SUCCESS="Save4LaterSuccess",e.CART_ITEM_REMOVE_SUCCESS="RemoveCartItemSuccess",e.CART_ITEM_SAVE4LATER_ERROR="Save4LaterError",e.CART_ITEM_REMOVE_ERROR="RemoveCartItemError",e.CART_ITEM_SAVE4LATER_FULL_INFO="Save4LaterFullInfo",e.SAVE_ITEM_MOVETOCART_SUCCESS="MoveToCartSuccess",e.SAVE_ITEM_REMOVE_SUCCESS="RemoveSaveItemSuccess",e.SAVE_ITEM_MOVETOCART_ERROR="MoveToCartError",e.SAVE_ITEM_REMOVE_ERROR="RemoveSaveItemError"}(d||(d={})),function(e){e.ADDED="ADDED",e.BASKET_LOADED="BASKET_LOADED",e.BASKET_PROCESSING="BASKET_PROCESSING",e.FAILED="FAILED",e.ITEM_REMOVED="ITEM_REMOVED",e.PENDING="PENDING",e.PROCESSING="PROCESSING",e.UPDATED="UPDATED"}(u||(u={}));class W{}function H(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(a[s[n]]=e[s[n]])}return a}function G(e,t,a,s){return new(a||(a=Promise))(function(n,r){function i(e){try{l(s.next(e))}catch(e){r(e)}}function o(e){try{l(s.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a(function(e){e(t)})).then(i,o)}l((s=s.apply(e,t||[])).next())})}!function(e){e.SHOW="SHOW",e.HIDE="HIDE",e.COMBINE_WITH_PRODUCT_PRICE="COMBINE_WITH_PRODUCT_PRICE"}(m||(m={})),function(e){e.FAILURE="FAILURE",e.PROCESSING="PROCESSING",e.SUCCESS="SUCCESS"}(p||(p={})),function(e){e.CONFIRMED="CONFIRMED",e.PENDING="PENDING",e.REVIEW="REVIEW"}(h||(h={})),function(e){e.creditDebit="credit/debit",e.fairstone="fairstone",e.giftCardOnly="giftcardonly",e.paypal="paypal",e.visaCheckout="visacheckout"}(C||(C={})),function(e){e.FAILURE="FAILURE",e.PROCESSING="PROCESSING",e.SUCCESS="SUCCESS"}(g||(g={})),function(e){e.PSP="PSP",e.PRP="PRP"}(y||(y={})),"function"==typeof SuppressedError&&SuppressedError;class V{constructor(e,t,a){this.addItem=(e,t,a,s,n)=>new Promise((r,i)=>G(this,void 0,void 0,function*(){const o=Array.isArray(e)?e.map(e=>e.sku):[e.sku];try{if(n&&this.availabilityProvider){const e=yield this.availabilityProvider.getAvailabilities(o,[],s,a);if(!e)throw Error("AvailabilityProvider error");if(e.availabilities.filter(e=>e.shipping.purchasable).length<1)return void i({status:"1099"})}const l=this.apiBasketProviderFactory.make(t,a,s),c=yield l.addToBasket(e,this.cartStoreProvider.getCartId());if(c)return this.cartStoreProvider.setCartId(c.id),void r(c);throw Error("BasketProvider error")}catch(e){return void i(e)}})),this.apiBasketProviderFactory=e,this.cartStoreProvider=t,this.availabilityProvider=a}}class ${constructor(){this.getPriceToDisplay=(e,t,a)=>e&&a?t+a:t,this.needToDisplayEhf=(e,t)=>!(!e||!t)&&(t.indexOf(e.toLocaleLowerCase())>=0||t.indexOf(e.toLocaleUpperCase())>=0)}}class Y extends Error{constructor(e,t,a){super(e),this.innerError=t,this.context=a,this.name=Y.NAME,Object.setPrototypeOf(this,Y.prototype)}}Y.NAME="NotFoundError";class Q extends Error{constructor(e){super(e),this.name=Q.NAME,this.validationMessages=e||[],Object.setPrototypeOf(this,Q.prototype)}}Q.NAME="ValidationMessagesError";const Z=e=>{let t=0;const a=(null==e?void 0:e.items)||(null==e?void 0:e.shipments)&&(null==e?void 0:e.shipments.reduce((e,t)=>e.concat(t.lineItems),[]));return null==a||a.forEach(e=>{var a;null===(a=null==e?void 0:e.children)||void 0===a||a.forEach(e=>{t+=(0,E.isNumber)(null==e?void 0:e.quantity)?e.quantity:0}),t+=(0,E.isNumber)(null==e?void 0:e.quantity)?e.quantity:0}),t};class z{constructor(e,t){this.refillCart=(e,t,a,s)=>new Promise((n,r)=>{const i=this.apiBasketProviderFactory.make(e,t,a),o=this.cartStoreProvider.getCartId();o?i.getBasket(o,s).then(e=>{e.id?this.cartStoreProvider.setCartId(e.id):this.cartStoreProvider.deleteCartId();const t={totalQuantity:Z(e),shipments:(null==e?void 0:e.shipments)||[]};n(t)}).catch(e=>{e instanceof Error&&e.name===Y.NAME&&this.cartStoreProvider.deleteCartId(),r(e)}):n({})}),this.apiBasketProviderFactory=e,this.cartStoreProvider=t}}class K{constructor(e,t,a,s){this.refillCart=(e,t,a,s)=>new Promise((n,r)=>G(this,void 0,void 0,function*(){const i=this.apiBasketProviderFactory.make(e,t,a);let o=this.cartStoreProvider.getCartId();try{const e=this.customerId.replace("{","").replace("}","").toLowerCase(),t=()=>i.mergeBasket(o,e).then(e=>{this.updateCartId(e),n(e)}).catch(r);let a;if(o){if(o.toLowerCase()!==e)return void(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").indexOf("checkout")>-1}(window&&window.location&&window.location.pathname)&&this.customerId?i.deleteBasket(e).then(t).catch(e=>{e&&e.name===Y.NAME?t():r(e)}):t())}else this.cartStoreProvider.setCartId(e),o=e;a=yield i.getBasket(o,s),this.updateCartId(a);const l={totalQuantity:Z(a),shipments:(null==a?void 0:a.shipments)||[]};return void n(l)}catch(e){e instanceof f.UnauthorizedError&&(yield this.signOutProvider.signOut()),r(e)}})),this.updateCartId=e=>{e.id?this.cartStoreProvider.setCartId(e.id):this.cartStoreProvider.deleteCartId()},this.apiBasketProviderFactory=e,this.cartStoreProvider=t,this.customerId=a,this.signOutProvider=s}}class J{constructor(e,t,a,s){this.refillCart=(e,t,a,s)=>G(this,void 0,void 0,function*(){try{const n=yield this.getCustomerId();return new K(this.apiBasketProviderFactory,this.cartStoreProvider,n,this.signOutProvider).refillCart(e,t,a,s)}catch(n){return n instanceof f.UnauthorizedError&&this.signOutProvider.signOut(),new z(this.apiBasketProviderFactory,this.cartStoreProvider).refillCart(e,t,a,s)}}),this.apiBasketProviderFactory=e,this.cartStoreProvider=t,this.customerInfoProvider=a,this.signOutProvider=s}getCustomerId(){return G(this,void 0,void 0,function*(){const e=f.cieUtilities.getAccessToken();if(e){const t=yield this.customerInfoProvider.getCustomerInfo({accessToken:e});return t&&t.id?t.id:Promise.reject("Invalid customerInfo")}return Promise.reject("Invalid access token")})}}const X=(e,t)=>{if(!e||!e.length)return t;let a=[...e];return t.forEach((e,s)=>{e.lineItems.forEach((n,r)=>{if(n.removed){const i=P()(a,{seller:{id:e.seller.id}});a=i>-1?ee({lineItem:n,lineItemIndex:r,matchingShipmentIndex:i,returnShipments:a}):te({lineItem:n,oldShipments:t,returnShipments:a,shipmentIndex:s})}})}),a},ee=e=>{let{lineItem:t,lineItemIndex:a,matchingShipmentIndex:s,returnShipments:n}=e;return[...n.slice(0,s),Object.assign(Object.assign({},n[s]),{lineItems:[...n[s].lineItems.slice(0,a),Object.assign({},t),...n[s].lineItems.slice(a)]}),...n.slice(s+1)]},te=e=>{let{lineItem:t,oldShipments:a,returnShipments:s,shipmentIndex:n}=e;return[...s.slice(0,n),Object.assign(Object.assign({},a[n]),{lineItems:[Object.assign({},t)]}),...s.slice(n)]};class ae{constructor(e,t){this.removeItem=(e,t,a,s,n)=>G(this,void 0,void 0,function*(){return new Promise((r,i)=>{const o=this.cartStoreProvider.getCartId();o?this.apiBasketProviderFactory.make(a,s,n).removeCartItem(o,e).then(a=>{a.id?this.cartStoreProvider.setCartId(a.id):this.cartStoreProvider.deleteCartId();const s=this.flagRemovedLineItem(t.shipments,e);a.shipments=X(a.shipments,s),r(a)}).catch(i):r({})})}),this.removeChildItem=(e,t,a,s,n)=>G(this,void 0,void 0,function*(){return new Promise((r,i)=>{const o=this.cartStoreProvider.getCartId();o?this.apiBasketProviderFactory.make(a,s,n).removeChildCartItem(o,e,t).then(e=>r(e)).catch(i):r({})})}),this.flagRemovedLineItem=(e,t)=>e.map(e=>e.lineItems&&e.lineItems.length?(e.lineItems=e.lineItems.map(e=>e.id===t?Object.assign(Object.assign({},e),{removed:!0}):e),e):e),this.apiBasketProviderFactory=e,this.cartStoreProvider=t}}class se{constructor(e,t){this.addChildItem=(e,t,a,s,n)=>G(this,void 0,void 0,function*(){return new Promise((r,i)=>{const o=this.cartStoreProvider.getCartId();if(!o)throw new Y("No cart id");this.apiBasketProviderFactory.make(a,s,n).addChildCartItem(o,e,t).then(e=>r(e)).catch(i)})}),this.updateItemQuantity=(e,t,a,s,n,r)=>G(this,void 0,void 0,function*(){return new Promise((i,o)=>{const l=this.cartStoreProvider.getCartId();if(!l)throw new Y("No cart id");this.apiBasketProviderFactory.make(s,n,r).updateCartItemQuantity(l,e,t).then(e=>{e.shipments=X(e.shipments,a.shipments),i(e)}).catch(o)})}),this.apiBasketProviderFactory=e,this.cartStoreProvider=t}}var ne="styles-module_loadingSpinner__WZFiV",re="styles-module_addToCartLabel__a9jN9",ie="styles-module_cartIcon__d0rB2",oe=(0,k.defineMessages)({buttonLabel:{defaultMessage:"Add To Cart - DEFAULT",description:"the label for the Add To Cart button",id:"components.AddToCart.AddToCartForm.Button.label"},success:{id:"components.AddToCart.Remove.Success"},undo:{id:"components.AddToCart.Remove.Undo"}});class le extends b.Component{constructor(e){super(e),this.setWasClicked=()=>this.setState({wasClicked:!0}),this.state={wasClicked:!1}}componentWillReceiveProps(e){e.cart.status!==u.PROCESSING&&this.setState({wasClicked:!1})}render(){const{ariaLabel:e,buttonClassName:t="",cart:a,disabled:s,intl:n,isCartLoading:r=!1,label:i,loaderSize:o=24,offer:l,showCartIcon:c,tabIndex:d=0}=this.props,{wasClicked:m}=this.state,p={"data-automation":"addToCartButton","aria-haspopup":"dialog"};return e&&(p["aria-label"]=e),d&&(p.tabIndex=d),b.createElement("form",{method:"post",id:"test",action:"",target:"_self",onSubmit:this.handleSubmit.bind(this),"data-testid":"addToCartForm"},b.createElement("input",{type:"hidden",name:"sku",id:"sku",value:l.sku}),b.createElement(S.zxk,{className:`${t} addToCartButton`,extraAttrs:p,isDisabled:s,onClick:this.setWasClicked,type:"submit"},!m||s||a.status!==u.PROCESSING&&!r?b.createElement("div",{className:`${re}`},c&&b.createElement(S.APc,{className:ie}),i||n.formatMessage(oe.buttonLabel)):b.createElement(S.TKf,{width:`${o}px`,containerClass:ne})))}handleSubmit(e){var t;e.preventDefault();const{add:a,onSubmit:s=()=>!0}=this.props,n=this.props.onSuccessConfirmation||this.props.showConfirmation,r=(null===(t=this.props)||void 0===t?void 0:t.onErrorConfirmation)||this.props.showConfirmation;s()&&a(this.props.offer,n,this.props.checkAvailabilityOnAdd,r)}}const ce=e=>{const t=(0,k.useIntl)();return b.createElement(le,Object.assign({},e,{intl:t}))};var de="styles-module_addToCartContainer__YW-Cn",ue="styles-module_ageVerification__4Vy1q",me=(0,k.defineMessages)({acceptButton:{defaultMessage:"Yes, I’m 17+",description:"Accept Button Text",id:"components.BasketPage.AgeVerification.acceptButton"},body:{defaultMessage:"components.BasketPage.AgeVerification.body",description:"age verification text",id:"components.BasketPage.AgeVerification.body"},declineButton:{defaultMessage:"No, Back to Cart",description:"Decline button text",id:"components.BasketPage.AgeVerification.declineButton"},header:{defaultMessage:"Are you 17 or older?",description:"Age verification header",id:"components.BasketPage.AgeVerification.header"}});const pe="age-verification-container",he=e=>{let{lineItems:t,acceptLink:a,onAccept:s,onCancel:n,visible:r}=e;const i=(0,k.useIntl)();var o;o=r,(0,b.useEffect)(()=>{if(o){const e=window.scrollY;return document.body.style.position="fixed",document.body.style.top=`-${e}px`,document.body.style.width="100%",()=>{document.body.style.position="",document.body.style.top="",document.body.style.width="",window.scrollTo(0,e)}}},[o]);const l=e=>{const t=e.sku.product;return b.createElement("li",null,b.createElement("img",{className:"thumbnail",src:t.thumbnailUrl}),b.createElement("div",{className:"product-title"},t.name))};return r?b.createElement("div",{className:ue,"data-testid":pe},b.createElement(S.u_l,{className:"modal-container",onClose:n,visible:r,isFocusTrap:!0,focusTrapOptions:{escapeDeactivates:!1}},b.createElement("h1",null,i.formatMessage(me.header)),b.createElement("div",{className:"body-content"},b.createElement("p",null,i.formatMessage(me.body)),b.createElement("ul",{className:"line-items"},t.map(e=>b.createElement(l,Object.assign({key:e.sku.id},e))))),b.createElement("div",{className:"options"},b.createElement(S.zxk,{appearance:"secondary",className:"option confirm",href:a,onClick:s},i.formatMessage(me.acceptButton)),b.createElement(S.zxk,{appearance:"tertiary",onClick:n,className:"option decline"},i.formatMessage(me.declineButton))))):null};var Ce="styles-module_checkoutButton__pxYLn";class ge extends b.Component{constructor(e){super(e),this.handleAgeVerificationCancel=()=>this.setState({showAgeVerification:!1}),this.handleAgeVerificationAccept=e=>{this.setState({showAgeVerification:!1}),this.props.onCheckout&&(this.addAnalyticsEvent(),this.props.onCheckout(e))},this.handleCheckoutClick=e=>{e&&e.currentTarget&&e.currentTarget.blur&&e.currentTarget.blur(),!this.props.disableAgeVerification&&this.getAgeRestrictedItems().length?(e&&e.preventDefault&&e.preventDefault(),this.setState({showAgeVerification:!0})):this.props.lineItemIDsForUnacceptedServicePlans.length?(e&&e.preventDefault&&e.preventDefault(),this.props.onServicePlansNotAccepted(this.props.lineItemIDsForUnacceptedServicePlans)):(this.addAnalyticsEvent(),this.props.onCheckout&&this.props.onCheckout())},this.getAgeRestrictedItems=()=>{if(!this.props.cart||!this.props.cart.shipments)return[];let e=this.props.cart.shipments.reduce(this.shipmentToLineItems,[]);return e=e.filter(e=>!1!==e.purchasable&&!0===e.sku.product.requiresAgeVerification&&!0!==e.removed),e},this.addAnalyticsEvent=()=>{window&&sessionStorage&&sessionStorage.setItem("AEDBacklog",JSON.stringify([{event:"analytics-cart-continue-to-checkout",parentLocation:window.parent.location,state:{cart:this.props.cart}}]))},this.toFlattenedLineItem=()=>e=>[Object.assign({},e),...e.children||[]],this.shipmentToLineItems=(e,t)=>e.concat(...t.lineItems.map(this.toFlattenedLineItem())),this.state={showAgeVerification:!1}}render(){const e=b.Children.only(this.props.children);return b.createElement("div",{className:Ce},b.cloneElement(e,Object.assign(Object.assign({},e.props),{onClick:this.handleCheckoutClick})),this.state.showAgeVerification&&(0,T.createPortal)(b.createElement(he,{onAccept:this.handleAgeVerificationAccept,onCancel:this.handleAgeVerificationCancel,acceptLink:e.props.href,visible:this.state.showAgeVerification,lineItems:this.getAgeRestrictedItems()}),document.body))}}const ye=e=>{const t=e.cart&&e.cart.shipments?e.cart.shipments:void 0,a=e.servicePlan&&e.servicePlan.availableServicePlans?e.servicePlan.availableServicePlans:void 0,s=t&&[].concat(...t.map(e=>e.lineItems))||[],n=[];return s.forEach(e=>{!e.removed&&e.children&&e.children.forEach(t=>{if(a&&a[e.id]){!a[e.id].isServicePlanAccepted&&(s=e.id,r=t.sku.id,a[s].plans.filter(e=>e.sku===r).length)&&n.push(e.id)}var s,r})}),n},fe="servicePlan/UPDATE_AVAILABLE_SERVICE_PLANS",Ee="servicePlan/UPDATE_ACCEPT_SERVICE_PLAN",ve="servicePlan/HIGHLIGHT_ACCEPT_SERVICE_PLAN",Pe=e=>t=>{e&&e.shipments&&e.shipments.forEach(e=>{e.lineItems.forEach(e=>{let a=[];if(e.availableServicePlans&&be(e.availableServicePlans)){const s=e.availableServicePlans[0].servicePlanType;a=Se(e.availableServicePlans),t(((e,t,a)=>({payload:{lineItemId:e,servicePlanType:a,servicePlans:t},type:fe}))(e.id,a,s))}})})},be=e=>{const t=e[0].servicePlanType;return e.every(e=>e.servicePlanType===t)},Se=e=>e.filter(e=>e.servicePlanType===n.PSP||e.servicePlanType===n.PRP).map(e=>({name:e.sku.product.name,purchasePrice:e.sku.offer.regularPrice,sku:e.sku.id,termMonths:e.termMonths})).sort((e,t)=>e.termMonths-t.termMonths),ke={availableServicePlans:{},lineItemIDsWithNoWarrantyAccepted:[]};function Ie(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ke,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case fe:const a=t.payload.lineItemId,s=t.payload;return Object.assign(Object.assign({},e),{availableServicePlans:Object.assign(Object.assign({},e.availableServicePlans),{[a]:{isServicePlanAccepted:!1,plans:s.servicePlans,servicePlanType:s.servicePlanType}})});case Ee:const n=t.payload.lineItemId;return Object.assign(Object.assign({},e),{availableServicePlans:Object.assign(Object.assign({},e.availableServicePlans),{[n]:Object.assign(Object.assign({},e.availableServicePlans[n]),{isServicePlanAccepted:t.payload.isAccepted})})});case ve:return Object.assign(Object.assign({},e),{lineItemIDsWithNoWarrantyAccepted:t.payload.lineItemIDs});default:return e}}const Oe=(e,t)=>{const a=e&&e.availableServicePlans[t]?e.availableServicePlans[t].plans:null;return a||[]},_e=(e,t)=>e&&e.availableServicePlans[t]?e.availableServicePlans[t].servicePlanType:null;var Te,Le,Ne,Ae,Me,De=(0,_.connect)(e=>({cart:e.cart,features:e.config.features,lineItemIDsForUnacceptedServicePlans:ye(e),servicePlans:e.servicePlan&&e.servicePlan.availableServicePlans}),e=>({onServicePlansNotAccepted:t=>{e({payload:{lineItemIDs:t},type:ve})}}))(ge);function Re(){return Re=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Re.apply(this,arguments)}const we=(e,t)=>{let{title:a,titleId:s,...n}=e;return b.createElement("svg",Re({width:"120px",height:"120px",viewBox:"0 0 32 32",id:"Layer_1","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":s},n),Te||(Te=b.createElement("defs",null,b.createElement("style",null,".cls-1{fill:#050606;fill-rule:evenodd;}"))),void 0===a?b.createElement("title",{id:s},"GeneralInterface-CartEmpty"):a?b.createElement("title",{id:s},a):null,Le||(Le=b.createElement("path",{className:"cls-1",d:"M27.05,23a4,4,0,0,0-2.06-.6H10.35a1.43,1.43,0,0,1,0-2.85h16.1a.91.91,0,0,0,.87-.7l.78-3.33a7.3,7.3,0,0,1-2.09,1l-.27,1.16H10.35l-.18,0-3.23-15A.91.91,0,0,0,6.06,2H2.9a.92.92,0,0,0,0,1.83H5.34L8.47,18.39a3.27,3.27,0,0,0,.33,5.45A3.8,3.8,0,0,0,8,26.22a3.7,3.7,0,1,0,7.39,0,3.82,3.82,0,0,0-.55-2h7a3.82,3.82,0,0,0-.54,2,3.7,3.7,0,1,0,7.39,0A3.57,3.57,0,0,0,27.05,23Zm-15.4,5.14a2,2,0,1,1,1.9-2A1.93,1.93,0,0,1,11.65,28.17Zm13.24,0a2,2,0,0,1,0-3.9h.17a1.72,1.72,0,0,1,1.74,2A1.93,1.93,0,0,1,24.89,28.17Z"})),Ne||(Ne=b.createElement("path",{className:"cls-1",d:"M10.39,8.22h6a7.12,7.12,0,0,1,.55-1.84H10.39a.92.92,0,0,0,0,1.84Z"})),Ae||(Ae=b.createElement("path",{className:"cls-1",d:"M23.77,15.69a6.25,6.25,0,1,0-6.24-6.24A6.24,6.24,0,0,0,23.77,15.69ZM20.7,9.28a4.55,4.55,0,0,1,.23-1.48,3.2,3.2,0,0,1,.63-1.1,2.69,2.69,0,0,1,1-.69A3.42,3.42,0,0,1,25,6a2.79,2.79,0,0,1,1,.68,3,3,0,0,1,.62,1.1,4.43,4.43,0,0,1,.22,1.46v.34a4.83,4.83,0,0,1-.21,1.47A3.1,3.1,0,0,1,26,12.17a2.68,2.68,0,0,1-1,.7,3.13,3.13,0,0,1-1.29.25,3.18,3.18,0,0,1-1.26-.24,2.71,2.71,0,0,1-1-.7,3.17,3.17,0,0,1-.61-1.1,4.5,4.5,0,0,1-.22-1.47Z"})),Me||(Me=b.createElement("path",{className:"cls-1",d:"M23.79,11.93A1.27,1.27,0,0,0,25,11.35a3.3,3.3,0,0,0,.37-1.75V9.26a3.19,3.19,0,0,0-.39-1.73,1.31,1.31,0,0,0-1.17-.61,1.33,1.33,0,0,0-1.17.6,3.21,3.21,0,0,0-.4,1.75v.34a3.05,3.05,0,0,0,.41,1.75A1.38,1.38,0,0,0,23.79,11.93Z"})))},Be=(0,b.forwardRef)(we);var Fe=Object.freeze({__proto__:null,ReactComponent:Be,default:"data:image/svg+xml,%3Csvg%20width%3D%22120px%22%20height%3D%22120px%22%20viewBox%3D%220%200%2032%2032%22%20id%3D%22Layer_1%22%20data-name%3D%22Layer%201%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%20%20%20%20%3Cdefs%3E%20%20%20%20%20%20%20%20%3Cstyle%3E.cls-1%7Bfill%3A%23050606%3Bfill-rule%3Aevenodd%3B%7D%3C%2Fstyle%3E%20%20%20%20%3C%2Fdefs%3E%20%20%20%20%3Ctitle%3EGeneralInterface-CartEmpty%3C%2Ftitle%3E%20%20%20%20%3Cpath%20class%3D%22cls-1%22%20d%3D%22M27.05%2C23a4%2C4%2C0%2C0%2C0-2.06-.6H10.35a1.43%2C1.43%2C0%2C0%2C1%2C0-2.85h16.1a.91.91%2C0%2C0%2C0%2C.87-.7l.78-3.33a7.3%2C7.3%2C0%2C0%2C1-2.09%2C1l-.27%2C1.16H10.35l-.18%2C0-3.23-15A.91.91%2C0%2C0%2C0%2C6.06%2C2H2.9a.92.92%2C0%2C0%2C0%2C0%2C1.83H5.34L8.47%2C18.39a3.27%2C3.27%2C0%2C0%2C0%2C.33%2C5.45A3.8%2C3.8%2C0%2C0%2C0%2C8%2C26.22a3.7%2C3.7%2C0%2C1%2C0%2C7.39%2C0%2C3.82%2C3.82%2C0%2C0%2C0-.55-2h7a3.82%2C3.82%2C0%2C0%2C0-.54%2C2%2C3.7%2C3.7%2C0%2C1%2C0%2C7.39%2C0A3.57%2C3.57%2C0%2C0%2C0%2C27.05%2C23Zm-15.4%2C5.14a2%2C2%2C0%2C1%2C1%2C1.9-2A1.93%2C1.93%2C0%2C0%2C1%2C11.65%2C28.17Zm13.24%2C0a2%2C2%2C0%2C0%2C1%2C0-3.9h.17a1.72%2C1.72%2C0%2C0%2C1%2C1.74%2C2A1.93%2C1.93%2C0%2C0%2C1%2C24.89%2C28.17Z%22%2F%3E%20%20%20%20%3Cpath%20class%3D%22cls-1%22%20d%3D%22M10.39%2C8.22h6a7.12%2C7.12%2C0%2C0%2C1%2C.55-1.84H10.39a.92.92%2C0%2C0%2C0%2C0%2C1.84Z%22%2F%3E%20%20%20%20%3Cpath%20class%3D%22cls-1%22%20d%3D%22M23.77%2C15.69a6.25%2C6.25%2C0%2C1%2C0-6.24-6.24A6.24%2C6.24%2C0%2C0%2C0%2C23.77%2C15.69ZM20.7%2C9.28a4.55%2C4.55%2C0%2C0%2C1%2C.23-1.48%2C3.2%2C3.2%2C0%2C0%2C1%2C.63-1.1%2C2.69%2C2.69%2C0%2C0%2C1%2C1-.69A3.42%2C3.42%2C0%2C0%2C1%2C25%2C6a2.79%2C2.79%2C0%2C0%2C1%2C1%2C.68%2C3%2C3%2C0%2C0%2C1%2C.62%2C1.1%2C4.43%2C4.43%2C0%2C0%2C1%2C.22%2C1.46v.34a4.83%2C4.83%2C0%2C0%2C1-.21%2C1.47A3.1%2C3.1%2C0%2C0%2C1%2C26%2C12.17a2.68%2C2.68%2C0%2C0%2C1-1%2C.7%2C3.13%2C3.13%2C0%2C0%2C1-1.29.25%2C3.18%2C3.18%2C0%2C0%2C1-1.26-.24%2C2.71%2C2.71%2C0%2C0%2C1-1-.7%2C3.17%2C3.17%2C0%2C0%2C1-.61-1.1%2C4.5%2C4.5%2C0%2C0%2C1-.22-1.47Z%22%2F%3E%20%20%20%20%3Cpath%20class%3D%22cls-1%22%20d%3D%22M23.79%2C11.93A1.27%2C1.27%2C0%2C0%2C0%2C25%2C11.35a3.3%2C3.3%2C0%2C0%2C0%2C.37-1.75V9.26a3.19%2C3.19%2C0%2C0%2C0-.39-1.73%2C1.31%2C1.31%2C0%2C0%2C0-1.17-.61%2C1.33%2C1.33%2C0%2C0%2C0-1.17.6%2C3.21%2C3.21%2C0%2C0%2C0-.4%2C1.75v.34a3.05%2C3.05%2C0%2C0%2C0%2C.41%2C1.75A1.38%2C1.38%2C0%2C0%2C0%2C23.79%2C11.93Z%22%2F%3E%3C%2Fsvg%3E"});const xe=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en";const a=String(e).replace(/\$/g,"");if(Number.isNaN(Number(a)))return"-";const s=Number(e).toLocaleString(t,{maximumFractionDigits:2,minimumFractionDigits:2});return"fr"===t.substring(0,2)?s.replace(".",",")+" $":"$"+s},je=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const s=parseFloat(Number(e).toFixed(a)),n=String(s);return"fr"===t.substring(0,2)?n.replace(".",","):n};var qe;!function(e){e.card="#### #### #### ####",e.amex="#### ###### #####",e.postalcode="### ###",e.phone="(###) ###–####",e.zipcode="#####"}(qe||(qe={}));const Ue=new Map;Ue.set("ab","Alberta"),Ue.set("bc","British Columbia"),Ue.set("mb","Manitoba"),Ue.set("nb","New Brunswick"),Ue.set("nl","Newfoundland and Labrador"),Ue.set("ns","Nova Scotia"),Ue.set("on","Ontario"),Ue.set("pe","Prince Edward Island"),Ue.set("qc","Quebec"),Ue.set("sk","Saskatchewan");const We=e=>e&&Ue.has(e.toLowerCase())?Ue.get(e.toLowerCase()):"";var He={costSumSection:"styles-module_costSumSection__eGdtv",row:"styles-module_row__N3Z90",discount:"styles-module_discount__LG3nD",right:"styles-module_right__N4o7s",discountGreen:"styles-module_discountGreen__-b8r-",freeShipping:"styles-module_freeShipping__3MRsu",freeShippingGreen:"styles-module_freeShippingGreen__E6E3H",specialOffersDiscount:"styles-module_specialOffersDiscount__lo1dW",saleDiscount:"styles-module_saleDiscount__rH19Y",promoCodeDiscount:"styles-module_promoCodeDiscount__8DkcO",item:"styles-module_item__B60kz",orderTotalCopy:"styles-module_orderTotalCopy__-KvjL",total:"styles-module_total__ZOzjt",subtotal:"styles-module_subtotal__6u2sV",subtotalDivider:"styles-module_subtotalDivider__rrjGf",ehf:"styles-module_ehf__tJweO",costSumLineItem:"styles-module_costSumLineItem__JXm-T",hr:"styles-module_hr__LnWDw",skeletonTitle:"styles-module_skeletonTitle__9RqL1",skeletonPrice:"styles-module_skeletonPrice__bAfyv",costSumSectionTitle:"styles-module_costSumSectionTitle__fk9Va",placeHolderShimmer:"styles-module_placeHolderShimmer__3VIuG"};const Ge=e=>{let{item:t,value:a,extraAttrs:{className:s,dataAutomation:n}={}}=e;return b.createElement("div",{className:N()(He.row,s),"data-automation":n},b.createElement("span",{className:He.item,role:"none"},t),b.createElement("span",{className:`${He.item} ${He.right}`,role:"none"},a))},Ve=(0,k.defineMessages)({ccCharged:{id:"components.Cart.CostSummary.ccCharged"},ccChargedEdit:{id:"components.Cart.CostSummary.ccChargedEdit"},ccChargedPPU:{id:"components.Cart.CostSummary.ccChargedPPU"},ccChargedPPUEdit:{id:"components.Cart.CostSummary.ccChargedPPUEdit"},creditCard:{id:"components.Cart.CostSummary.creditCard"},ehf:{id:"components.Cart.CostSummary.ehf"},estimatedShipping:{id:"components.Cart.CostSummary.estimatedShipping"},estimatedTaxes:{id:"components.Cart.CostSummary.estimatedTaxes"},estimatedTotal:{id:"components.Cart.CostSummary.estimatedTotal"},financePlanAdminFee:{id:"components.Cart.FinancePlanAdminFee"},free:{id:"components.Cart.CostSummary.free"},giftCards:{id:"components.Cart.CostSummary.giftCards"},giftCardsOnlyCharged:{id:"components.Cart.CostSummary.giftCardsOnlyCharged"},giftCardsOnlyChargedInStorePickup:{id:"components.Cart.CostSummary.giftCardsOnlyChargedInStorePickup"},giftCardsTotal:{id:"components.Cart.CostSummary.giftCardsTotal"},gst:{id:"components.Cart.CostSummary.gst"},hst:{id:"components.Cart.CostSummary.hst"},multipleCharged:{id:"components.Cart.CostSummary.multipleCharged"},multipleChargedPPU:{id:"components.Cart.CostSummary.multipleChargedPPU"},orderDiscounts:{id:"components.Cart.CostSummary.orderDiscounts"},orderSummary:{id:"components.Cart.CostSummary.orderSummary"},orderTotal:{id:"components.Cart.CostSummary.orderTotal"},paypal:{id:"components.Cart.CostSummary.paypal"},paypalCharged:{id:"components.Cart.CostSummary.paypalCharged"},paypalChargedGeneric:{id:"components.Cart.CostSummary.paypalChargedGeneric"},paypalChargedPPU:{id:"components.Cart.CostSummary.paypalChargedPPU"},pickup:{id:"components.Cart.CostSummary.pickup"},productDiscounts:{id:"components.Cart.CostSummary.productDiscounts"},promoDiscounts:{id:"components.Cart.CostSummary.promoDiscounts"},promoCodeDiscount:{id:"components.Cart.CostSummary.promoCodeDiscount"},pst:{id:"components.Cart.CostSummary.pst"},saleDiscount:{id:"components.Cart.CostSummary.saleDiscount"},shipping:{id:"components.Cart.CostSummary.shipping"},shippingDiscount:{id:"components.Cart.CostSummary.shippingDiscount"},specialOffersDiscount:{id:"components.Cart.CostSummary.specialOffersDiscount"},subTextEhf:{id:"components.Cart.CostSummary.subTextEhf"},subtotal:{id:"components.Cart.CostSummary.subtotal"},warranty:{id:"components.Cart.CostSummary.warranty"}}),$e={orderSummary:Ve.orderSummary,orderTotal:Ve.estimatedTotal,pickup:Ve.pickup,shipping:Ve.estimatedShipping},Ye={orderSummary:Ve.orderSummary,orderTotal:Ve.orderTotal,pickup:Ve.pickup,shipping:Ve.shipping},Qe=e=>{let{orderTotalBreakdown:t,totalGiftCards:a=0,totalPurchasePrice:s,shouldNotRenderOrderTotalCopy:n}=e;if(!t||""===t.paymentType||n)return!1;switch(t.paymentType){case C.giftCardOnly:return a>=s;case C.creditDebit:return""!==t.cardType&&""!==t.lastFourDigits;case C.paypal:return""!==t.paypal.paypalEmail&&""!==t.paypal.paypalToken;default:return!0}},Ze=e=>{let{ehfShowStatus:t,totalProductPrice:a,totalEHF:s=0,translations:n,intl:{formatMessage:r,locale:i}}=e;const o=s>0,l=t===m.COMBINE_WITH_PRODUCT_PRICE,c=b.createElement("div",{className:He.subtotal},b.createElement("span",null,r(n.subtotal)),o&&l&&b.createElement("span",{"data-automation":"total-ehf",className:He.ehf},r(n.subTextEhf,{ehf:xe(s,i)})));return b.createElement(Ge,{item:c,value:xe(l?a+(s||0):a,i),extraAttrs:{dataAutomation:"subtotal"}})},ze=e=>{let{totalSavings:t,discountColorVariant:a="red",translations:s,discounts:n,intl:{formatMessage:r,locale:i}}=e;const o="green"===a?He.discountGreen:He.discount,{saleDiscount:l=0,specialOffersDiscount:c=0,promoCodeDiscount:d=0}=n||{},u=Boolean(l||c||d);if(!(t&&t>0||u))return null;const m=e=>`-${xe(e,i)}`;return u?b.createElement(b.Fragment,null,b.createElement(Ge,{item:r(s.orderDiscounts),value:void 0,extraAttrs:{className:o,dataAutomation:`order-discounts-total-${a}`}}),Object.keys(n).length>0?Object.entries(n).map(e=>{let[t]=e;return n[t]>0?b.createElement(Ge,{key:t,item:r(s[t]),value:m(n[t]),extraAttrs:{className:N()(o,He[t]),dataAutomation:`order-discounts-${t}-${a}`}}):null}):null):b.createElement(Ge,{item:r(s.orderDiscounts),value:m(t),extraAttrs:{className:o,dataAutomation:`order-discounts-total-${a}`}})},Ke=e=>{let{isInStorePickup:t,totalShippingPrice:a,discountColorVariant:s="red",intl:{formatMessage:n,locale:r},translations:i}=e;if(void 0===a)return null;const o=e=>e?"green"===s?He.freeShippingGreen:He.freeShipping:"";return t?b.createElement(Ge,{item:n(i.pickup),value:n(Ve.free),extraAttrs:{className:o(!0),dataAutomation:"total-shipping-pickup"}}):b.createElement(Ge,{item:n(i.shipping),value:0===a?n(Ve.free):xe(a,r),extraAttrs:{className:o(0===a),dataAutomation:"total-shipping"}})},Je=e=>{let{ehfShowStatus:t,totalEHF:a=0,translations:s,intl:{formatMessage:n,locale:r}}=e;const i=a>0,o=t===m.SHOW,l=t===m.COMBINE_WITH_PRODUCT_PRICE;return i&&o&&!l?b.createElement(Ge,{item:n(s.ehf),value:xe(a,r),extraAttrs:{dataAutomation:"total-ehf-separate-line"}}):null},Xe=e=>{let{shouldShowAdminFee:t,financePlanAdminFee:a,intl:{formatMessage:s,locale:n},translations:r}=e;return t?b.createElement(Ge,{item:s(r.financePlanAdminFee),value:xe(a,n),extraAttrs:{className:He.financePlanFee,dataAutomation:"finance-plan-admin-fee"}}):null},et=e=>{let{intl:{formatMessage:t,locale:a},tax:s,totalTaxes:n}=e;if(!s&&void 0===n)return null;if(!s)return b.createElement(Ge,{item:t(Ve.estimatedTaxes),value:xe(n,a),extraAttrs:{dataAutomation:"total-taxes"}});const r=s.map(e=>{const s=(e=>{switch(e){case i.GST:return Ve.gst;case i.PST:return Ve.pst;case i.HST:return Ve.hst}})(e.type);return s&&b.createElement(Ge,{key:e.type,item:t(s),value:xe(e.amount,a)})}).filter(Boolean);return b.createElement(b.Fragment,null,r," ")},tt=()=>b.createElement(b.Fragment,null,b.createElement("div",{className:He.costSumLineItem},b.createElement(S.oYE.Title,{maxWidth:235,className:He.skeletonTitle}),b.createElement(S.oYE.Price,{className:He.skeletonPrice})),b.createElement("div",{className:He.costSumLineItem},b.createElement(S.oYE.Title,{maxWidth:235,className:He.skeletonTitle}),b.createElement(S.oYE.Price,{className:He.skeletonPrice})),b.createElement("div",{className:He.costSumLineItem},b.createElement(S.oYE.Title,{maxWidth:235,className:He.skeletonTitle}),b.createElement(S.oYE.Price,{className:He.skeletonPrice})),b.createElement("div",{className:He.costSumLineItem},b.createElement(S.oYE.Title,{maxWidth:235,className:He.skeletonTitle}),b.createElement(S.oYE.Price,{className:He.skeletonPrice})),b.createElement("div",{className:He.costSumLineItem},b.createElement(S.oYE.Title,{maxWidth:235,className:He.skeletonTitle}),b.createElement(S.oYE.Price,{className:He.skeletonPrice})),b.createElement(S.oYE.Hr,null),b.createElement("div",{className:He.costSumLineItem},b.createElement(S.oYE.Title,{maxWidth:235,className:He.skeletonTitle}),b.createElement(S.oYE.Price,{className:He.skeletonPrice})),b.createElement("div",{className:He.costSumLineItem},b.createElement(S.oYE.Title,{maxWidth:235,className:He.skeletonTitle}),b.createElement(S.oYE.Price,{className:He.skeletonPrice}))),at=e=>{let{intl:{formatMessage:t,locale:a},numOfGiftCards:s=0,totalGiftCards:n=0,totalPurchasePrice:r,orderTotalBreakdown:i,shouldNotRenderOrderTotalCopy:o,isInStorePickup:l,isInReviewPage:c}=e;const d=Qe({orderTotalBreakdown:i,shouldNotRenderOrderTotalCopy:o,totalGiftCards:n,totalPurchasePrice:r}),u=(e=>{let{numOfGiftCards:t,isInStorePickup:a,isInReviewPage:s,orderTotalBreakdown:n}=e;if(t&&(null==n?void 0:n.paymentType)!==C.giftCardOnly)return a?Ve.multipleChargedPPU:Ve.multipleCharged;switch(null==n?void 0:n.paymentType){case C.creditDebit:return s?a?Ve.ccChargedPPU:Ve.ccCharged:a?Ve.ccChargedPPUEdit:Ve.ccChargedEdit;case C.giftCardOnly:return a?Ve.giftCardsOnlyChargedInStorePickup:Ve.giftCardsOnlyCharged;case C.paypal:return a?Ve.paypalChargedPPU:Ve.paypalCharged;default:return null}})({isInReviewPage:c,isInStorePickup:l,numOfGiftCards:s,orderTotalBreakdown:i});return d&&u?b.createElement("p",{className:He.orderTotalCopy},b.createElement(k.FormattedMessage,Object.assign({},u,{values:{giftCards:b.createElement("b",null,t(Ve.giftCards)),lastFourDigits:b.createElement("b",null,null==i?void 0:i.lastFourDigits),numOfGiftCards:s,paypal:b.createElement("b",null,t(Ve.paypal)),totalPurchasePrice:b.createElement("b",null,xe(r-n,a))}}))):null},st=e=>{let{intl:t,orderTotalBreakdown:a,totalGiftCards:s,totalPurchasePrice:n,shouldNotRenderOrderTotal:r,shouldNotRenderOrderTotalCopy:i,numOfGiftCards:o,isInStorePickup:l,isInReviewPage:c,translations:d}=e;const{formatMessage:u,locale:m}=t;if(null===n||r)return null;const p=s&&s>=n?n:s,h=p&&n-p,g=a&&a.paymentType===C.paypal?Ve.paypal:Ve.creditCard,y=Qe({orderTotalBreakdown:a,shouldNotRenderOrderTotalCopy:i,totalGiftCards:s,totalPurchasePrice:n})&&h&&h>0;return b.createElement(b.Fragment,null,b.createElement(Ge,{item:u(d.orderTotal),value:xe(n,m),extraAttrs:{className:He.total,dataAutomation:"total-quantity"}}),p>0?b.createElement(Ge,{key:"giftCards",item:u(Ve.giftCardsTotal),value:xe(p,m)}):null,y?b.createElement(Ge,{key:"remainingBal",item:u(g),value:xe(h,m)}):null,b.createElement(at,{intl:t,numOfGiftCards:o,totalGiftCards:s,totalPurchasePrice:n,orderTotalBreakdown:a,shouldNotRenderOrderTotalCopy:Boolean(i),isInStorePickup:Boolean(l),isInReviewPage:Boolean(c)}))},nt=e=>{let{numOfGiftCards:t,totalGiftCards:a,totalPurchasePrice:s,orderTotalBreakdown:n,shouldNotRenderOrderTotalCopy:r,isInReviewPage:i,isInStorePickup:o,totalEHF:l=0,totalProductPrice:c,totalSavings:d,totalShippingPrice:u,financePlanAdminFee:p,shouldShowAdminFee:h,shouldNotRenderOrderTotal:C,estimated:g,translationOverrides:y={},ehfShowStatus:f=m.SHOW,loading:E,tax:v,totalTaxes:P,discountColorVariant:I,discounts:O}=e;const _=(0,k.useIntl)(),T=b.useMemo(()=>Object.assign(Object.assign(Object.assign({},Ve),g?$e:Ye),y),[g,y]),{formatMessage:L}=_;return b.createElement(b.Fragment,null,b.createElement("h2",{className:He.costSumSectionTitle},L(T.orderSummary)),b.createElement(S.aNw,{loading:E,loadingDisplay:b.createElement(tt,null)},b.createElement("div",{className:N()(He.costSumSection,He.container)},b.createElement(Ze,{totalEHF:l,totalProductPrice:c,ehfShowStatus:f,translations:T,intl:_}),b.createElement(ze,{totalSavings:d,discountColorVariant:I,translations:T,intl:_,discounts:O}),b.createElement(Ke,{translations:T,totalShippingPrice:u,isInStorePickup:Boolean(o),discountColorVariant:I,intl:_}),b.createElement(Je,{totalEHF:l,ehfShowStatus:f,translations:T,intl:_}),b.createElement(Xe,{financePlanAdminFee:p,shouldShowAdminFee:h,intl:_,translations:T}),b.createElement(et,{intl:_,tax:v,totalTaxes:P}),b.createElement(S.izJ,{className:He.subtotalDivider}),b.createElement(st,{numOfGiftCards:t,isInReviewPage:Boolean(i),isInStorePickup:Boolean(o),translations:T,intl:_,orderTotalBreakdown:n,totalGiftCards:a,totalPurchasePrice:s,shouldNotRenderOrderTotal:Boolean(C),shouldNotRenderOrderTotalCopy:Boolean(r)}),Boolean(C)||Boolean(r)?null:b.createElement(S.izJ,{className:He.subtotalDivider}))))};var rt="styles-module_updatePostalCode__K2pNV",it=(0,k.defineMessages)({changeDestinationText:{defaultMessage:"Change Destination",description:"the label for the text change destination",id:"components.EnterPostalCode.changeDestinationText"},deliveryText:{defaultMessage:"Delivery",description:"the label for the text Delivery",id:"components.EnterPostalCode.deliveryText"},estimatesText:{defaultMessage:"It'll help us estimate shipping and delivery.",description:"the label for the text estimates",id:"components.EnterPostalCode.estimatesText"},invalidPostalCodeText:{defaultMessage:"Invalid postal code",description:"the text for the invalid postal code",id:"components.EnterPostalCode.invalidPostalCodeText"},updateBtnLabel:{defaultMessage:"Update",description:"the label for the Update btn",id:"components.EnterPostalCode.updateBtnLabel"}});class ot extends b.Component{constructor(){super(...arguments),this.handleSubmit=(e,t,a)=>{t.preventDefault(),this.props.changePostalCode(a.postalCode.value)},this.hasPostalCodeChars=e=>new RegExp("^([0-9A-Za-z\\s]*)$").test(String(e)),this.validatePostalCode=e=>3!==e.length||this.props.validateCompletePostalCode?/^[A-Za-z]\d[A-Za-z][ ]?\d[A-Za-z]\d$/.test(e):/^[A-Za-z]\d[A-Za-z][ ]?$/.test(e)}render(){const e=!!this.props.basic;return b.createElement("div",{className:rt},!e&&b.createElement(b.Fragment,null,b.createElement("div",{className:"epcheader"},b.createElement("div",{className:"img-col"},b.createElement(S.tMZ,{className:"deliveryIcon"})),b.createElement("div",{className:"text-col"},b.createElement("h2",null,this.props.intl.formatMessage(it.deliveryText)))),b.createElement("div",{className:"epcheader-row-two"},this.props.intl.formatMessage(it.estimatesText)),b.createElement("div",{className:"epcheader-row-three"},this.props.intl.formatMessage(it.changeDestinationText))),b.createElement(S.l09,{onSubmit:this.handleSubmit,onError:this.props.onError,scrollToErrors:this.props.scrollToErrors},b.createElement("div",{className:"update-form-div"},b.createElement("div",{className:"update-txt-div"},b.createElement(S.IIB,{asyncValidators:[this.hasPostalCodeChars],className:"uppercase",error:this.props.error,errorMsg:this.props.intl.formatMessage(it.invalidPostalCodeText),formatter:"*** ***",name:"postalCode",validators:[this.validatePostalCode],value:this.props.postalCode,handleSyncChange:this.props.handleAsyncChange,handleAsyncChange:this.props.handleSyncChange})),b.createElement("div",{className:"update-btn-div"},b.createElement(S.zxk,{type:"submit",appearance:"tertiary"},this.props.intl.formatMessage(it.updateBtnLabel))))))}}const lt=e=>{const t=(0,k.useIntl)();return b.createElement(ot,Object.assign({},e,{intl:t}))};var ct;!function(e){e.EverythingPurchasable="EverythingPurchasable",e.EverythingSoldOutOnline="EverythingSoldOutOnline",e.EverythingOutOfStockInRegion="EverythingOutOfStockInRegion",e.EverythingRegionRestricted="EverythingRegionRestricted",e.MixOfNonPurchasable="MixOfNonPurchasable",e.SomePurchasable="SomePurchasable",e.EmptyCart="EmptyCart"}(ct||(ct={}));const dt=e=>!!e&&!(e===c.SoldOutOnline||e===c.OutofStockInRegion||e===c.RegionRestricted),ut=e=>{const t=(e=>{const t={numOfOutOfStockInRegion:0,numOfPurchasable:0,numOfRegionRestricted:0,numOfSoldOutOnline:0,totalNumOfLineItems:0};if(!e.shipments||0===e.shipments.length)return t;for(const a of e.shipments)for(const e of a.lineItems){if(e.removed)continue;const a=e.shippingStatus;e.purchasable?t.numOfPurchasable++:a===c.SoldOutOnline?t.numOfSoldOutOnline++:a===c.OutofStockInRegion?t.numOfOutOfStockInRegion++:a===c.RegionRestricted&&t.numOfRegionRestricted++,t.totalNumOfLineItems++}return t})(e);return(e=>{let t;return t=0===e.totalNumOfLineItems?ct.EmptyCart:e.totalNumOfLineItems===e.numOfPurchasable?ct.EverythingPurchasable:e.totalNumOfLineItems===e.numOfOutOfStockInRegion?ct.EverythingOutOfStockInRegion:e.totalNumOfLineItems===e.numOfRegionRestricted?ct.EverythingRegionRestricted:e.totalNumOfLineItems===e.numOfSoldOutOnline?ct.EverythingSoldOutOnline:0===e.numOfPurchasable?ct.MixOfNonPurchasable:ct.SomePurchasable,t})(t)};var mt=e=>{let{items:t}=e;return!t||t.length<=0?null:b.createElement("div",null,b.createElement("div",{className:"order-promo"},b.createElement("ol",null,t.map(e=>e.description&&""!==e.description?b.createElement(S.rCG,{key:e.id},e.description):null))))};const pt="cart/BASKET_FAILURE",ht="cart/BASKET_PROCESSING",Ct="cart/BASKET_SUCCESS",gt="cart/ADDED",yt="cart/FAILURE",ft="cart/CLEAR_CART_FAILURE_CODE",Et="cart/ITEM_REMOVED",vt="cart/CHILD_ITEM_REMOVED",Pt="cart/PROCESSING",bt="cart/RESET",St="cart/CLEAR_CART",kt="cart/CLEAR_REMOVED_ITEMS",It="cart/OVERWRITE_CART",Ot="cart/REFILL_FAILURE",_t="cart/REFILL_PROCESSING",Tt="cart/REFILL_SUCCESS",Lt="cart/SHOW_CONFIRMATION",Nt="cart/UPDATE_CART",At="cart/ANALYTICS_ITEM_REMOVED",Mt="errorAddService",Dt="errorRemoveService",Rt="errorAddWarranty",wt="errorRemoveItem",Bt="errorRemoveWarranty",Ft="errorUpdateQuantity",xt="errorChangePostalCode",jt="requiredProducts/ADD_REQUIRED_PRODUCTS",qt="requiredProducts/FETCHING_REQUIRED_PRODUCTS",Ut="requiredProducts/FETCHING_REQUIRED_PRODUCTS_FAILURE",Wt="requiredProducts/UPDATE_REQUIRED_PRODUCT_STATUS",Ht="requiredProducts/UPDATE_WARRANTY_SELECTION",Gt=e=>({payload:{sku:e},type:qt}),Vt=e=>({payload:{sku:e},type:Ut}),$t=()=>({type:"requiredProducts/TRACK_REQUIRED_PARTS_PAGE_LOAD"}),Yt=(e,t,a,s)=>(n,r)=>{const i=r(),o=i.addOnsPage&&i.addOnsPage.parentItemJustAdded;n(((e,t,a,s)=>({payload:{parentProduct:a,requiredProducts:t,sku:e,warranties:s},type:jt}))(e,t,a,s)),o||n(zt(e))},Qt=e=>(t,a)=>G(void 0,void 0,void 0,function*(){const s=a().requiredProducts;ta(s,e)&&!aa(s,e)||t((e=>(t,a,s)=>{let{requiredProductsProvider:n}=s;return G(void 0,void 0,void 0,function*(){const s=a(),r=s.intl&&s.intl.locale,i=s.user&&s.user.shippingLocation&&s.user.shippingLocation.regionCode;try{t(Gt(e));const a=yield n.getSimpleRequiredProducts(e,r,i),{requiredProducts:s,parentProduct:o}=a;t(Yt(e,s,o))}catch(a){t(Vt(e))}})})(e))}),Zt=(e,t)=>(a,s,n)=>{let{requiredProductsProvider:r}=n;return G(void 0,void 0,void 0,function*(){const n=s(),i=n.intl&&n.intl.locale,o=n.user&&n.user.shippingLocation&&n.user.shippingLocation.regionCode,l=n.user&&n.user.shippingLocation&&n.user.shippingLocation.postalCode;try{a(Gt(e));const s=yield r.getDetailedRequiredProducts(e,i,o,l,t),{requiredProducts:n,parentProduct:c,warranties:d}=s;a(Yt(e,n,c,d))}catch(t){a(Vt(e))}})},zt=e=>(t,a)=>{const s=a(),n=ta(s.requiredProducts,e),r=ea(s.requiredProducts,e);n&&n.forEach(a=>{const n=Kt(s.cart,e,a.sku)?"isInCart":"notInCart";t(((e,t,a)=>({payload:{requiredProductSku:t,sku:e,status:a},type:Wt}))(e,a.sku,n))}),r&&r.forEach(a=>{Kt(s.cart,e,a.sku)&&t(((e,t)=>({payload:{sku:e,warrantySku:t},type:Ht}))(e,a.sku))})},Kt=(e,t,a)=>{const s=la(e,t);return s&&s.children&&s.children.find(e=>e.sku.id===a)},Jt={};function Xt(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(a.type){case jt:return e=a.payload.sku,Object.assign(Object.assign({},t),{[e]:Object.assign(Object.assign({},t[e]),{isError:!1,isLoading:!1,parentProduct:a.payload.parentProduct,products:a.payload.requiredProducts,warranties:a.payload.warranties})});case qt:return e=a.payload.sku,Object.assign(Object.assign({},t),{[e]:Object.assign(Object.assign({},t[e]),{isError:!1,isLoading:!0})});case Ut:return e=a.payload.sku,Object.assign(Object.assign({},t),{[e]:Object.assign(Object.assign({},t[e]),{isError:!0,isLoading:!1})});case Wt:return e=a.payload.sku,Object.assign(Object.assign({},t),{[e]:Object.assign(Object.assign({},t[e]),{products:t[e].products.map(e=>{const t=a.payload.requiredProductSku;return e.sku!==t?e:Object.assign(Object.assign({},e),{status:a.payload.status})})})});case Ht:e=a.payload.sku;const s=a.payload.warrantySku;return Object.assign(Object.assign({},t),{[e]:Object.assign(Object.assign({},t[e]),{selectedWarranty:ra(t[e].warranties,s)})});case vt:e=a.payload.sku;const n=t[e].selectedWarranty,r=n&&(a.payload.lineItem.sku.id===n.sku||a.payload.lineItem.sku.id===n.parentSku);return Object.assign(Object.assign({},t),{[e]:Object.assign(Object.assign({},t[e]),{selectedWarranty:r?null:n})});default:return t}}const ea=(e,t)=>e&&e[t]&&e[t].warranties,ta=(e,t)=>e&&e[t]&&e[t].products,aa=(e,t)=>!(!e||!e[t])&&e[t].isError,sa=(e,t)=>e&&e[t]&&e[t].isLoading,na=(e,t)=>e&&e[t]&&e[t].parentProduct,ra=(e,t)=>{let a;return e.forEach(e=>{e.sku===t&&(a=e)}),a},ia=(e,t)=>{for(const a of e.shipments)for(const e of a.lineItems)if(e.id===t)return e},oa=(e,t)=>{const a=ia(e,t);return a&&a.children&&a.children.find(e=>e.lineItemType===s.Psp)},la=(e,t)=>{for(const a of e.shipments)for(const e of a.lineItems)if(e.sku&&e.sku.id===t)return e},ca=(e,t)=>{var a,s,n;return null===(n=null===(s=null===(a=la(e,t))||void 0===a?void 0:a.sku)||void 0===s?void 0:s.product)||void 0===n?void 0:n.seoText},da=(e,t)=>e.status===u.FAILED&&(e.errorType===Ca(t,pa.ADD)||e.errorType===Ca(t,pa.REMOVE)),ua=(e,t)=>e.status===t,ma={apiStatusCode:"",availabilities:void 0,errorType:"",id:void 0,refilled:!1,shipments:[],showConfirmation:!1,status:u.PROCESSING,totalProductPrice:0,totalPurchasePrice:0,totalQuantity:0};var pa;!function(e){e.ADD="add",e.REMOVE="remove"}(pa||(pa={}));const ha={[pa.ADD]:{[s.Service]:Mt,[s.RequiredPart]:"errorAddRequiredPart",[s.Psp]:Rt,default:"errorAddItem"},[pa.REMOVE]:{[s.Service]:Dt,[s.RequiredPart]:"errorRemoveRequiredPart",[s.Psp]:Bt,default:wt}},Ca=(e,t)=>ha[t][e]||ha[t].default;function ga(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ma,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"@@router/LOCATION_CHANGE":return Object.assign(Object.assign({},e),{showConfirmation:!1});case pt:case Ct:return Object.assign(Object.assign({},e),{status:u.BASKET_LOADED});case ht:return Object.assign(Object.assign({},e),{status:u.BASKET_PROCESSING});case gt:return Object.assign(Object.assign({},e),{status:u.ADDED});case bt:return Object.assign(Object.assign({},e),{showConfirmation:!1,status:u.PENDING});case Pt:return Object.assign(Object.assign({},e),{status:u.PROCESSING});case Et:return Object.assign(Object.assign({},e),{status:u.ITEM_REMOVED});case yt:return Object.assign(Object.assign(Object.assign({},e),t.payload),{status:u.FAILED});case ft:return Object.assign(Object.assign({},e),{apiStatusCode:"",errorType:""});case Nt:return Object.assign(Object.assign(Object.assign({},e),t.payload),{status:u.UPDATED});case St:return Object.assign(Object.assign({},e),{cartId:void 0,shipments:[],showConfirmation:!1,status:u.PENDING,totalQuantity:0});case kt:return Object.assign(Object.assign({},e),{shipments:ya(e.shipments||[])});case It:return Object.assign(Object.assign(Object.assign(Object.assign({},ma),{availabilities:e.availabilities}),t.payload),{status:u.UPDATED});case Ot:return Object.assign(Object.assign({},e),{refilled:!1,status:u.PENDING});case _t:return Object.assign(Object.assign({},e),{refilled:!0,status:u.PROCESSING});case Tt:return Object.assign(Object.assign({},e),{refilled:!0,status:u.PENDING});case Lt:return Object.assign(Object.assign({},e),{showConfirmation:!0});default:return e}}const ya=e=>e.filter(e=>(e.lineItems=e.lineItems.filter(e=>!e.removed),e.lineItems&&e.lineItems.length>0)),fa=()=>({type:gt}),Ea=function(){let{apiStatusCode:e="",errorType:t=""}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{payload:{apiStatusCode:e,errorType:t},type:yt}},va=()=>({type:ft}),Pa=()=>({type:Et}),ba=e=>({payload:e,type:vt}),Sa=()=>({type:Pt}),ka=()=>({type:St}),Ia=e=>({payload:e,type:It}),Oa=()=>({type:Tt}),_a=()=>({type:bt}),Ta=()=>({type:Lt}),La=e=>({payload:e,type:Nt}),Na=()=>new Promise(e=>{setTimeout(()=>e(!0),1e3)}),Aa=e=>({payload:Object.assign({},e),type:"ADD_TO_CART_REQUEST"}),Ma=e=>({payload:e,type:"cart/ANALYTICS_ITEM_ADDED"}),Da=e=>({payload:e,type:At}),Ra=(e,t,a,s)=>(n,r,i)=>{let{cartAdder:o,checkoutEvents:l}=i;const c=r(),d=c.user&&c.user.shippingLocation&&c.user.shippingLocation.postalCode,u=c.user&&c.user.shippingLocation&&c.user.shippingLocation.regionCode,m=c.intl&&c.intl.locale;n(Sa());const p=Na();return new Promise((r,i)=>{o.addItem(e,u,d,m,a).then(a=>{p.then(()=>{n(La(a)),n(Aa(e)),t(),n(fa()),l.notifyListeners("afteraddtocart"),r(!0)})}).catch(e=>{p.then(()=>{n(Ea({apiStatusCode:(null==e?void 0:e.status)||""})),s?s():n(Ta()),l.notifyListeners("afteraddtocart"),i()})})})},wa=e=>(t,a,s)=>{let{cartRefiller:n}=s;return G(void 0,void 0,void 0,function*(){const s=a(),r=s.user&&s.user.shippingLocation&&s.user.shippingLocation.postalCode,i=s.user&&s.user.shippingLocation&&s.user.shippingLocation.regionCode,o=s.intl&&s.intl.locale;t(Sa());try{const a=yield n.refillCart(i,r,o,e);t(Ia(a))}catch(e){t(Ea())}})},Ba=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(a,s,n)=>{let{cartRefiller:r}=n;return G(void 0,void 0,void 0,function*(){const n=s(),i=n.user&&n.user.shippingLocation&&n.user.shippingLocation.postalCode,o=n.user&&n.user.shippingLocation&&n.user.shippingLocation.regionCode,l=n.intl&&n.intl.locale;a({type:ht});try{const s=yield r.refillCart(o,i,l);let n=null,c=null;s.shipments&&(n=s.shipments.reduce((e,t)=>{let{lineItems:a}=t;return[...e,...a]},[]),e&&(c=yield e(n))),a(La(s)),t&&(yield a(ja(t,n))),a(Pe(s)),a(La({availabilities:c})),a({type:Ct})}catch(e){e instanceof Error&&e.name===Y.NAME?a({type:pt}):a(Ea({errorType:"errorLoadCart"}))}})}},Fa=e=>(t,a,s)=>{let{cartRefiller:n}=s;return G(void 0,void 0,void 0,function*(){if(Ga())return;const s=a().cart,r=a(),i=r.user&&r.user.shippingLocation&&r.user.shippingLocation.postalCode,o=r.user&&r.user.shippingLocation&&r.user.shippingLocation.regionCode,l=r.intl&&r.intl.locale;if(!s||!s.refilled){t({type:_t});try{const a=yield n.refillCart(o,i,l,e);t(La(a)),t(Oa())}catch(e){t({type:Ot})}}})},xa=e=>(t,a,s)=>{let{cartRemover:n}=s;return G(void 0,void 0,void 0,function*(){const s=a(),r=s.cart,i=s.user&&s.user.shippingLocation&&s.user.shippingLocation.postalCode,o=s.user&&s.user.shippingLocation&&s.user.shippingLocation.regionCode,l=s.intl&&s.intl.locale,c=Qa(r,e);try{t(Sa()),t(ba({lineItem:c,sku:c&&c.sku&&c.sku.id}));const a=yield n.removeItem(e,r,o,i,l);t(Pa()),t(Ia(a)),t(Va(r,e))}catch(e){e instanceof Error&&e.name===Y.NAME&&t(wa()),t(Ea({errorType:wt}))}})},ja=(e,t)=>(a,s)=>G(void 0,void 0,void 0,function*(){a(Sa());const s=t.reduce((e,t)=>{let{id:a,quantity:s,sku:n}=t;return Object.assign(Object.assign({},e),{[n.id]:{id:a,quantity:s}})},{}),n=e.reduce((e,t)=>{let{quantity:n,sku:r}=t;const{id:i,quantity:o}=s[r],l=o-n;return l<=0?[...e,a(xa(s[r].id))]:[...e,a(Wa(i,l))]},[]);return Promise.all(n).then(()=>{Ha()&&history.replaceState({},"",((e,t)=>{const a=e.split("?");if(a.length>=2){const s=`${encodeURIComponent(t)}=`,n=a[1].split(/[&]/g);for(let e=n.length;e-- >0;)-1!==n[e].lastIndexOf(s,0)&&n.splice(e,1);e=a[0]+(n.length>0?`?${n.join("&")}`:"")}return e})(window.location.href,"removeFromBasket")),a(Oa())}).catch(e=>a(Ea()))}),qa=(e,t)=>(a,s,n)=>{let{cartUpdater:r}=n;return G(void 0,void 0,void 0,function*(){const n=s(),i=n.user&&n.user.shippingLocation&&n.user.shippingLocation.postalCode,o=n.user&&n.user.shippingLocation&&n.user.shippingLocation.regionCode,l=n.intl&&n.intl.locale;try{a(Sa());const s=yield r.addChildItem(e,t,o,i,l);a(Ma({lineItem:t})),a(La(s))}catch(e){a(Ea({errorType:Ca(t.lineItemType,pa.ADD)}))}})},Ua=(e,t)=>(a,s,n)=>{let{cartRemover:r}=n;return G(void 0,void 0,void 0,function*(){const n=s(),i=n.user&&n.user.shippingLocation&&n.user.shippingLocation.postalCode,o=n.user&&n.user.shippingLocation&&n.user.shippingLocation.regionCode,l=n.intl&&n.intl.locale,c=n.cart.shipments.map(t=>{let{lineItems:a}=t;return a.find(t=>t.id===e)}),{children:d}=c[0],u=d.find(e=>e.id===t);try{a(Sa());const s=yield r.removeChildItem(e,t,o,i,l);a(ba({lineItem:u,sku:c[0]&&c[0].sku&&c[0].sku.id})),a(Da({lineItem:u})),a(La(s))}catch(e){a(Ea({errorType:Ca(u.lineItemType,pa.REMOVE)}))}})},Wa=(e,t)=>(a,s,n)=>{let{cartUpdater:r}=n;return G(void 0,void 0,void 0,function*(){const n=s(),i=n.cart,o=n.user&&n.user.shippingLocation&&n.user.shippingLocation.postalCode,l=n.user&&n.user.shippingLocation&&n.user.shippingLocation.regionCode,c=n.intl&&n.intl.locale;try{a(Sa());const s=yield r.updateItemQuantity(e,t,i,l,o,c);a(Ia(s)),a($a(i,e,t))}catch(e){e instanceof Error&&e.name===Y.NAME&&a(wa()),a(Ea({errorType:Ft}))}})},Ha=()=>{const{search:e}=window.location;return e&&e.indexOf("removeFromBasket")>-1},Ga=()=>{const{pathname:e}=window.location;return e&&e.indexOf("basket")>-1||e.indexOf("panier")>-1},Va=(e,t)=>a=>{if(e.shipments){const s=Qa(e,t);s&&a({payload:{lineItem:s},type:At})}},$a=(e,t,a)=>s=>{if(e.shipments){const n=Qa(e,t);if(n){const e=n.quantity;a!==e&&s({payload:{lineItem:n,newQuantity:a,oldQuantity:e,update:a>e?"increase":"decrease"},type:"cart/ANALYTICS_QUANTITY_UPDATED"})}}},Ya=e=>({payload:{postalCode:e},type:"cart/ANALYTICS_CART_POSTAL_CODE_UPDATED"}),Qa=(e,t)=>{for(const a of e.shipments)for(const e of a.lineItems)if(e.id===t)return e};var Za="styles-module_remove-item__9w-fT",za=(0,k.defineMessages)({remove:{defaultMessage:"Remove",id:"components.Remove.Remove"}});const Ka=e=>{const t=(0,k.useIntl)(),{className:a,onRemove:s}=e,n=H(e,["className","onRemove"]);return b.createElement("button",Object.assign({className:`${Za} ${a||""}`,onClick:s,type:"button","data-testid":"remove-item"},n),t.formatMessage(za.remove))};class Ja extends b.Component{render(){return b.createElement("svg",{className:this.props.className,fill:"#050606",height:"24",viewBox:"0 0 32 32",width:"24"},b.createElement("path",{d:"M20.09,15H11.91a1,1,0,0,0,0,2h8.18a1,1,0,0,0,0-2Z"}),b.createElement("path",{d:"M16,2A14,14,0,1,0,30,16,14,14,0,0,0,16,2Zm0,26.2A12.2,12.2,0,1,1,28.2,16,12.21,12.21,0,0,1,16,28.2Z"}))}}class Xa extends b.Component{render(){return b.createElement("svg",{className:this.props.className,fill:"#050606",height:"24",viewBox:"0 0 32 32",width:"24"},b.createElement("path",{d:"M20.09,15H17V11.91a1,1,0,0,0-2,0V15H11.91a1,1,0,0,0,0,2H15v3.09a1,1,0,0,0,2,0V17h3.09a1,1,0,0,0,0-2Z"}),b.createElement("path",{d:"M16,2A14,14,0,1,0,30,16,14,14,0,0,0,16,2Zm0,26.2A12.2,12.2,0,1,1,28.2,16,12.21,12.21,0,0,1,16,28.2Z"}))}}var es="styles-module_quantityStepper__jV-82";class ts extends b.Component{constructor(e){super(e),this.delay=500,this.increase=e=>{e.preventDefault(),this.onQuantityChange(this.state.setQuantity===this.props.max?this.props.max:this.state.setQuantity+1)},this.decrease=e=>{e.preventDefault(),this.onQuantityChange(1===this.state.setQuantity?1:this.state.setQuantity-1)},this.handleTextChange=e=>{this.setState({inputValue:e.currentTarget.value});const t=parseInt(e.currentTarget.value,10);Number.isInteger(t)&&this.onQuantityChange(t)},this.handleTextBlur=()=>{this.setState({inputValue:this.state.setQuantity})},this.onQuantityChange=e=>{window.clearTimeout(this.t),e=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2?arguments[2]:void 0;return Number.isInteger(t)&&(e=e<t?t:e),Number.isInteger(a)&&(e=e>a?a:e),e}(e,1,this.props.max),this.setState({inputValue:e,setQuantity:e}),this.t=window.setTimeout(()=>{this.props.onChange(e)},this.delay)},this.state={inputValue:e.quantity||1,setQuantity:e.quantity||1}}componentWillReceiveProps(e){e.hasQuantityUpdateError&&e.hasQuantityUpdateError!==this.props.hasQuantityUpdateError&&this.setState({inputValue:this.props.quantity||1,setQuantity:this.props.quantity||1}),e.quantity!==this.props.quantity&&this.setState({inputValue:e.quantity||1,setQuantity:e.quantity||1})}render(){const e=this.state.setQuantity<=1,t=this.state.setQuantity>=this.props.max;return b.createElement("div",{className:es},b.createElement("div",{className:"quantity-stepper"},b.createElement("button",{disabled:e,onClick:this.decrease,className:"stepper left",type:"button",value:"minus","data-testid":"decrease-button"},b.createElement(Ja,{className:"icon"})),b.createElement("input",{"data-testid":"quantity-input",type:"number",name:"quantity",min:"1",max:this.props.max,className:"quantity-input",autoComplete:"off",value:this.state.inputValue,onBlur:this.handleTextBlur,onChange:this.handleTextChange}),b.createElement("button",{disabled:t,onClick:this.increase,className:"stepper right",type:"button",value:"add","data-testid":"increase-button"},b.createElement(Xa,{className:"icon"}))))}}const as=e=>{let{sku:t,locale:a,promotionalBadges:s,className:n,display:r=!1}=e,i=Boolean(s&&s[t]&&s[t].type);return i&&s[t].applyConditions&&(i=i&&r),i?b.createElement(S.Cts,{className:n,locale:a,type:s[t].type}):null};var ss=(0,k.defineMessages)({Add:{defaultMessage:"Add",description:"Child item Add button",id:"components.BasketPage.LineItem.Add"},BackOrder:{defaultMessage:"Back Order",description:"the text for BackOrder availability status",id:"components.BasketPage.LineItemAvailabilityStatus.BackOrder"},ComingSoon:{defaultMessage:"Coming Soon",description:"the text for ComingSoon availability status",id:"components.BasketPage.LineItemAvailabilityStatus.ComingSoon"},EHFLabel:{defaultMessage:"EHF",description:"Label for EHF",id:"components.BasketPage.LineItem.EHFLabel"},FreeItemHeader:{defaultMessage:"Free Items Included",description:"Free Items Heading",id:"components.BasketPage.LineItem.FreeItemsHeader"},GrpItemHook:{id:"components.BasketPage.GrpItem.Hook"},GrpItemProductHeader:{defaultMessage:"GSP Product Header",description:"GSP Product Header",id:"components.BasketPage.GrpItem.ProductHeader"},GspItemBenefit:{defaultMessage:"GSP Benefit tile ",description:"GSP Benefit title",id:"components.BasketPage.GspItem.Benefit"},GspItemHook:{id:"components.BasketPage.GspItem.Hook"},GspItemProductHeader:{defaultMessage:"GSP Product Header",description:"GSP Product Header",id:"components.BasketPage.GspItem.ProductHeader"},GspItemTitle:{defaultMessage:"GSP Title",description:"GSP Title",id:"components.BasketPage.GspItem.Title"},ItemRemoved:{defaultMessage:"has been removed from your cart.",description:"line item has been removed",id:"components.BasketPage.LineItem.ItemRemoved"},ItemSubtotal:{defaultMessage:"Item Subtotal",description:"line item subtotal heading",id:"components.BasketPage.LineItem.ItemSubtotal"},NotAvailable:{defaultMessage:"Not Available",description:"the text for NotAvailable availability status",id:"components.BasketPage.LineItemAvailabilityStatus.NotAvailable"},OrderLimit:{defaultMessage:"Limit of {orderLimit} per household for current offer.",description:"Quatitity for house limit",id:"components.BasketPage.LineItem.OrderLimit"},OutOfStock:{defaultMessage:"Out of stock",description:"OutOfStock",id:"components.BasketPage.LineItemAvailabilityStatus.OutOfStock"},OutOfStockDescription:{defaultMessage:"You can remove this item or save it for later.",description:"OutOfStockDescription",id:"components.BasketPage.LineItemAvailabilityStatus.OutOfStockDescription"},OutofStockInRegion:{defaultMessage:"Out of stock in {currentRegion}",description:"the text for OutofStockInRegion availability status",id:"components.BasketPage.LineItemAvailabilityStatus.OutofStockInRegion"},OutofStockInRegionDescription:{defaultMessage:"You can update your postal code to check availability somewhere else.",description:"the description for OutofStockInRegion availability status",id:"components.BasketPage.LineItemAvailabilityStatus.OutofStockInRegionDescription"},PSPHeader:{defaultMessage:"Warranty",description:"PSP header",id:"components.BasketPage.LineItem.PSPHeader"},Preorder:{defaultMessage:"Preorder",description:"the text for Preorder availability status",id:"components.BasketPage.LineItemAvailabilityStatus.Preorder"},PromotionalDiscount:{defaultMessage:"Promotional Discount",description:"Promotional Discount header",id:"components.BasketPage.LineItem.PromotionalDiscount"},Quantity:{defaultMessage:"Quantity",description:"line item quantity text",id:"components.BasketPage.LineItem.Quantity"},RegionRestricted:{defaultMessage:"Can't ship to {{currentRegion}}",description:"the text for RegionRestricted availability status",id:"components.BasketPage.LineItemAvailabilityStatus.RegionRestricted"},RegionRestrictedDescription:{defaultMessage:"You can update your postal code to ship somewhere else.",description:"the description for RegionRestricted availability",id:"components.BasketPage.LineItemAvailabilityStatus.RegionRestrictedDescription"},ReserveInStore:{defaultMessage:"Reserve In Store",description:"reserve in store link",id:"components.BasketPage.LineItemAvailabilityStatus.ReserveInStore"},ReserveInStoreDescription:{defaultMessage:"We'll hold this item in-store for 24",description:"reserve in store description",id:"components.BasketPage.LineItemAvailabilityStatus.ReserveInStoreDescription"},ReserveInStoreHeader:{defaultMessage:"Reserve online, pay in-store",description:"reserve in store header",id:"components.BasketPage.LineItemAvailabilityStatus.ReserveInStoreHeader"},SaleEnds:{defaultMessage:"Sale Ends",description:"sale ends text",id:"components.BasketPage.LineItem.SaleEnds"},SeeRequiredPartsDescription:{description:"description of line item description if a parent item needs required parts",id:"components.BasketPage.SeeRequiredPartsDescription"},SeeRequiredPartsHeader:{description:"header of line item description if a parent item needs required parts",id:"components.BasketPage.SeeRequiredPartsHeader"},SeeRequiredPartsLinkText:{description:"link text of line item description if a parent item needs required parts",id:"components.BasketPage.SeeRequiredPartsLinkText"},SoldOutOnline:{defaultMessage:"Sold Out Online",description:"the text for SoldOutOnline availability status",id:"components.BasketPage.LineItemAvailabilityStatus.SoldOutOnline"},StillAbleToCheckout:{defaultMessage:"You can continue to checkout without this item",description:"still able to checkout text",id:"components.BasketPage.LineItem.StillAbleToCheckout"},Unknown:{defaultMessage:"Unknown",description:"the text for Unknown availability status",id:"components.BasketPage.LineItemAvailabilityStatus.Unknown"},deliveryEstimateHeader:{id:"components.BasketPage.LineItem.DeliveryEstimateHeader"},deliveryEstimateText:{id:"components.BasketPage.LineItem.DeliveryEstimateText"},manufacturerWarrantyLink:{id:"components.BasketPage.TermsAndConditionsMsg.ManufacturerWarrantyLink"},freeItemRemovedMsg:{id:"components.BasketPage.RemovedLineItem.FreeItemRemovedMsg"},noPlan:{id:"components.BasketPage.ServicePlan.noPlan"},gspItemRemovedMsg:{id:"components.BasketPage.RemovedLineItem.GspItemRemovedMsg"},quebecWarrantyLink:{id:"components.BasketPage.TermsAndConditionsMsg.QuebecWarrantyLink"},reserveInStoreHeader:{id:"components.BasketPage.LineItem.ReserveInStoreHeader"},reserveInStoreText:{id:"components.BasketPage.LineItem.ReserveInStoreText"},termsAndConditionsLink:{id:"components.BasketPage.TermsAndConditionsMsg.TermsAndConditionsLink"},termsAndConditionsMsg:{id:"components.BasketPage.TermsAndConditionsMsg.TermsAndConditionsMsg"},termsAndConditionsMsgCsr:{id:"components.BasketPage.TermsAndConditionsMsg.TermsAndConditionsMsg.csr"},warnAcceptWarranty:{id:"components.BasketPage.TermsAndConditionsMsg.WarnAcceptWarranty"},warrantyHeader:{id:"components.BasketPage.LineItem.warrantyHeader"},year:{id:"components.BasketPage.ServicePlan.year"}});const ns=e=>{let{item:t,onRemove:a}=e;const s=(0,k.useIntl)();return b.createElement("div",{className:"child-item"},b.createElement("header",null,b.createElement(k.FormattedMessage,Object.assign({},ss[t.lineItemType+"Header"]))),b.createElement("div",{className:"product-info"},b.createElement("div",{className:"thumbnail"},(n=t,b.createElement("img",{width:"32px",height:"32px",src:n.sku.product.thumbnailUrl}))),b.createElement("div",{className:"details"},b.createElement("div",{className:"product-name"},t.sku.product.name),b.createElement("div",{className:"quantity"},b.createElement(k.FormattedMessage,Object.assign({},ss.Quantity,{values:{quantity:t.quantity}})))),b.createElement("div",{className:"detail"},b.createElement("div",{className:"price"},((e,t)=>b.createElement("div",{className:"offer"},b.createElement("s",null,xe(t.totalPrice,e))," ",b.createElement("span",{className:"red"},xe(t.totalPurchasePrice,e))))(s.locale,t)))),b.createElement("footer",null,b.createElement(Ka,{onRemove:e=>{e.preventDefault(),a&&a(t.id)}})));var n},rs=[s.FreeItem],is=e=>{let{items:t,onRemove:a}=e;return!t||t.length<1?null:b.createElement("section",{className:"child-items"},t.map(e=>rs.indexOf(e.lineItemType)<0?null:e.purchasable?b.createElement(ns,{item:e,key:e.sku.id,onRemove:a}):null))},os=(e,t,a,s)=>t&&s?b.createElement("div",{className:"sale-info"},xe(a,e.locale)," +"," ",xe(s,e.locale)," ",e.formatMessage(ss.EHFLabel)):null;var ls=e=>{let{value:t,intl:a,regionCode:s,displayEhfRegions:n}=e;const r=new $,i=null!=s?s:"",o=r.needToDisplayEhf(i,n),l=r.getPriceToDisplay(o,t.regularPrice,t.ehfAmount),c=r.getPriceToDisplay(o,t.purchasePrice,t.ehfAmount);return t.onSale?b.createElement("div",{className:"offer"},b.createElement("s",null,xe(l,a.locale))," ",b.createElement("span",{className:"promo-info"},b.createElement("span",{className:"display-price"},xe(c,a.locale)),os(a,o,t.purchasePrice,t.ehfAmount)),t.saleDateTime&&b.createElement("div",{className:"sale-info"},a.formatMessage(ss.SaleEnds),": ",t.saleDateTime)):b.createElement("div",{className:"offer"},b.createElement("span",{className:"display-price"},xe(c,a.locale)),os(a,o,t.purchasePrice,t.ehfAmount))},cs={lineItemContainer:"styles-module_lineItemContainer__SZD6q",badgeWrp:"styles-module_badgeWrp__ltymW"};class ds extends b.Component{constructor(){super(...arguments),this.renderRemoveMessageForChildItems=e=>{if(e)return e.filter(e=>this.isDisplayRemoveMessage(e)).map(e=>b.createElement("div",{key:e.id,"data-automation":"child-item-removed-msg",className:"child-item-remove-msg"},this.renderRemoveMessage(e)))},this.isDisplayRemoveMessage=e=>e.lineItemType===s.Psp||e.lineItemType===s.FreeItem,this.renderRemoveMessage=e=>e.lineItemType===s.Psp?b.createElement(k.FormattedMessage,Object.assign({},ss.gspItemRemovedMsg)):e.lineItemType===s.FreeItem?b.createElement(k.FormattedMessage,Object.assign({},ss.freeItemRemovedMsg)):void 0}render(){const{sku:e,children:t}=this.props;return b.createElement("div",{className:cs.lineItem},b.createElement(S.rCG,null,b.createElement(k.FormattedMessage,Object.assign({},ss.ItemRemoved,{values:{skuName:e.product.name}})),t&&this.renderRemoveMessageForChildItems(t)))}}const us=e=>{const t=(0,k.useIntl)();return b.createElement(ds,Object.assign({},e,{intl:t}))},ms=e=>{const{className:t,src:a,role:s,alt:n,"aria-label":r,"aria-labelledby":i}=e;return a&&!a.includes("images/common/pictures/noimage")?b.createElement("img",{className:t,src:a,"aria-label":r,"aria-labelledby":i,role:s,alt:n}):b.createElement(S.R5d,{className:t})};var ps="styles-module_productLineItem__7c805",hs="styles-module_productImageCol__Y87Rl",Cs="styles-module_productImage__9xIN5";class gs extends b.Component{render(){const{children:e,isLoading:t,loadingDisplay:a,productImageUrl:s,productUrl:n,onClick:r=()=>{},productImageProps:i={}}=this.props;return b.createElement("div",{className:ps},b.createElement(S.aNw,{loading:t,loadingDisplay:a},b.createElement(S.rjZ,null,b.createElement(S.X2j,{middle:"xs"},b.createElement(S.JXS,{xs:!0,className:hs,"data-automation":"parent-product-image"},n?b.createElement(S.rUS,{href:n,targetSelf:!0,onClick:r},b.createElement(ms,Object.assign({className:Cs,src:s},i))):b.createElement(ms,Object.assign({className:Cs,src:s},i))),e))))}}(0,k.defineMessages)({ehf:{id:"components.ProductDetailsLineItem.ehf"},saleEndsOn:{id:"components.ProductDetailsLineItem.saleEndsOn"}});const ys=function(e){return void 0===e||"undefined"===e||null===e||"null"===e?arguments.length>1&&void 0!==arguments[1]?arguments[1]:"":e},fs=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(Array.isArray(e)){return e.map(e=>{return(a=e)&&"string"!=typeof a&&"object"==typeof a&&!Array.isArray(a)?Es(e):ys(e,t);var a}).filter(e=>e).join(" ").trim()}return ys(e,t)},Es=e=>{const t=[];return Object.keys(e).forEach(a=>{e[a]&&t.push(a)}),t.join(" ").trim()},vs=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return t?fs(e):a};var Ps={requiredPartsLineItemContainer:"styles-module_requiredPartsLineItemContainer__TgvAX",requiredPartsLineItem:"styles-module_requiredPartsLineItem__JItUl",productInfo:"styles-module_productInfo__FgVGt",thumbnailSlot:"styles-module_thumbnailSlot__VcNEX",productThumbnail:"styles-module_productThumbnail__4iPXv",details:"styles-module_details__jqTK-",productDescription:"styles-module_productDescription__9evTz",productName:"styles-module_productName__YCFKS",requiredPart:"styles-module_requiredPart__jhmiG",price:"styles-module_price__ynN5f",salePrice:"styles-module_salePrice__jkxZF",radioGroup:"styles-module_radioGroup__JLxRH",reqPartsHeader:"styles-module_reqPartsHeader__C-LKU",requiredPartsItemDetails:"styles-module_requiredPartsItemDetails__4rcyU",requiredPartsDesc:"styles-module_requiredPartsDesc__SpSIn",seeRequiredPartsItemLink:"styles-module_seeRequiredPartsItemLink__ZTcmj",productLineItemLoader:"styles-module_productLineItemLoader__tYDeM","loader-required-product-line-item":"styles-module_loader-required-product-line-item__QJ4-l",addOrRemoveMode:"styles-module_addOrRemoveMode__8mfZu",container:"styles-module_container__SpVZx",title:"styles-module_title__PBDoa",subHeader:"styles-module_subHeader__gZ8Zi"},bs=(0,k.defineMessages)({SeeRequiredPartsDescription:{description:"description of line item description if a parent item needs required parts",id:"SeeRequiredPartsDescription"},SeeRequiredPartsHeader:{description:"header of line item description if a parent item needs required parts",id:"SeeRequiredPartsHeader"},SeeRequiredPartsLinkText:{description:"link text of line item description if a parent item needs required parts",id:"SeeRequiredPartsLinkText"},brandNewParts:{description:"Subheader for the addonsPage view",id:"addonsPage.brandNewParts"},partsYouNeed:{description:"Header text for the addonsPage view",id:"addonsPage.partsYouNeed"},requiredPart:{id:"requiredPart"}});const Ss=e=>{let{thumbnailUrl:t,name:a,offer:s,footer:n}=e;const r=(0,k.useIntl)(),i=[`${Ps.salePrice} ${Ps.price}`];return b.createElement("div",{className:Ps.requiredPartsLineItemContainer,"data-automation":"required-part-item"},b.createElement("div",{className:Ps.requiredPartsLineItem},b.createElement("div",{className:Ps.thumbnailSlot,"data-automation":"required-part-thumbnail"},b.createElement(ms,{className:Ps.productThumbnail,src:t,alt:a})),b.createElement("div",{className:Ps.productDescription,"data-automation":"required-part-name"},b.createElement("p",{className:Ps.productName},a),b.createElement("div",{className:Ps.requiredPart},b.createElement(k.FormattedMessage,Object.assign({},bs.requiredPart)))),b.createElement("div",{"data-automation":"required-part-price"},s&&b.createElement("div",{className:fs(s.salePrice<s.regularPrice?i:Ps.price)},xe(s.salePrice,r.locale)))),!!n&&b.createElement("div",{className:Ps.footer},n))},ks=e=>{let{requiredProducts:t=[]}=e;const a=e=>b.createElement("div",{key:e||"",className:Ps["loader-required-product-line-item"]},b.createElement(S.oYE.ProductTile,{width:350}),b.createElement(S.oYE.Line,{maxWidth:1024}),b.createElement(S.oYE.Line,{maxWidth:1024}));return b.createElement("div",{className:Ps.productLineItemLoader,role:"progressbar","aria-busy":"true","aria-live":"polite"},t.length>0?b.createElement(b.Fragment,null,t.map(e=>b.createElement(a,{keyID:`loader-${null==e?void 0:e.sku}`}))):b.createElement(a,null))};ks.displayName="RequiredPartsLoader";var Is="styles-module_required-parts-opt-in__-6-4c",Os="styles-module_required-parts-opt-in-error__gq1kp",_s="styles-module_option-not-selected-error__HJWx-",Ts=(0,k.defineMessages)({optionNotSelectedError:{id:"components.RequiredPartsOptIn.optionNotSelectedError"},requiredPartsOptInNo:{id:"components.RequiredPartsOptIn.option.no"},requiredPartsOptInYes:{id:"components.RequiredPartsOptIn.option.yes"}});class Ls extends b.Component{constructor(e){super(e),this.errorRef=null,this.onChange=e=>{this.setState({hasUserMadeSelection:!0}),this.props.updateStatus(this.props.requiredPartSku,e),"isInCart"===e?this.props.addToCart(this.props.parentSku,this.props.requiredPartSku):this.props.removeFromCart(this.props.parentSku,this.props.requiredPartSku)},this.tryAgain=()=>{this.onChange("isInCart"===this.props.status?"notInCart":"isInCart")},this.state={hasUserMadeSelection:!1}}componentDidUpdate(e){var t,a;e.isError!==this.props.isError&&!0===this.props.isError&&(null===(a=(t=this.props).showErrorMessage)||void 0===a||a.call(t,this.tryAgain));if(!e.showOptionNotSelectedErrorMessage&&this.props.showOptionNotSelectedErrorMessage&&this.errorRef&&this.errorRef.focus(),e.status!==this.props.status){!this.state.hasUserMadeSelection&&this.props.parentItemJustAddedToCart&&"notInCart"===this.props.status&&this.props.updateStatus(this.props.requiredPartSku,"initial")}}render(){const{intl:e,requiredPartSku:t,status:a,showOptionNotSelectedErrorMessage:s}=this.props,n=e.formatMessage(Object.assign({},Ts.requiredPartsOptInYes)),r=e.formatMessage(Object.assign({},Ts.requiredPartsOptInNo));return b.createElement("div",{id:s?Os:Is,className:Is,"data-automation":"required-parts-radio-group"},b.createElement(S.EUY,{label:n,onChange:this.onChange,selectedValue:"isInCart",value:a,name:t,ariaLabel:n,extraAttrs:{tabIndex:"notInCart"!==a?0:-1}}),b.createElement(S.EUY,{label:e.formatMessage(Object.assign({},Ts.requiredPartsOptInNo)),onChange:this.onChange,selectedValue:"notInCart",value:a,name:t,ariaLabel:r,extraAttrs:{tabIndex:"notInCart"===a?0:-1}}),s&&b.createElement("p",{className:_s,role:"alert",tabIndex:-1,ref:e=>{this.errorRef=e}},e.formatMessage(Object.assign({},Ts.optionNotSelectedError))))}}var Ns=(0,_.connect)(e=>({isError:ua(e.cart,u.FAILED)}),e=>({addToCart:(t,a)=>{e(((e,t)=>(a,n,r)=>{let{cartUpdater:i}=r;return G(void 0,void 0,void 0,function*(){const r=n(),o=r.user&&r.user.shippingLocation&&r.user.shippingLocation.postalCode,l=r.user&&r.user.shippingLocation&&r.user.shippingLocation.regionCode,c=r.intl&&r.intl.locale,d=la(r.cart,e),u=d&&d.id,m={lineItemType:s.RequiredPart,quantity:1,sku:t};a(Sa());const p=Na();try{const s=yield i.addChildItem(u,m,l,o,c);yield p,a(La(s)),a(fa()),a(zt(e)),a({payload:{lineItem:{sku:t}},type:"cart/ANALYTICS_REQUIRED_PART_ADDED"})}catch(e){yield p,a(Ea({apiStatusCode:e.status||"",errorType:Ca(s.RequiredPart,pa.ADD)}))}})})(t,a))},removeFromCart:(t,a)=>{e(((e,t)=>(a,n,r)=>{let{cartRemover:i}=r;return G(void 0,void 0,void 0,function*(){const r=n(),o=la(r.cart,e),l=o&&o.children&&o.children.find(e=>e.sku.id===t),c=o&&o.id,d=l&&l.id,u=r.user&&r.user.shippingLocation&&r.user.shippingLocation.postalCode,m=r.user&&r.user.shippingLocation&&r.user.shippingLocation.regionCode,p=r.intl&&r.intl.locale;if(c&&d)try{a(Sa());const s=yield i.removeChildItem(c,d,m,u,p);a(Pa()),a(Ia(s)),a(zt(e)),a({payload:{lineItem:{sku:t}},type:"cart/ANALYTICS_REQUIRED_PART_REMOVED"})}catch(e){e instanceof Error&&e.name===Y.NAME?a(wa()):a(Ea({apiStatusCode:e.status||"",errorType:Ca(s.RequiredPart,pa.REMOVE)}))}})})(t,a))}}))(e=>{const t=(0,k.useIntl)();return b.createElement(Ls,Object.assign({},e,{intl:t}))});const As=e=>{let{requiredParts:t,parentSku:a,statusBySku:s={},selectable:n=!1,addOrRemoveMode:r,showLink:i,onUpdateStatus:o,onConnectionError:l,parentItemJustAddedToCart:c=!1,isLoading:d,disabled:u,showOptionNotSelectedErrorMessage:m=!1}=e;var p;const h=(0,k.useIntl)();if(!(null==t?void 0:t.length))return null;const C=[null===(p=h.locale)||void 0===p?void 0:p.toLocaleLowerCase(),{"en-CA":"required-parts","fr-CA":"pieces-requises"}[h.locale],a].join("/"),g=t.filter(e=>!!r||"isInCart"===s[e.sku]);return b.createElement(S.aNw,{loading:d,loadingDisplay:b.createElement(ks,{requiredProducts:g})},b.createElement("div",{className:`${r?Ps.addOrRemoveMode:""}`},b.createElement("div",{"data-automation":`required-parts-item-${a}`},r?b.createElement("div",{className:Ps.container},b.createElement("h3",{className:Ps.title},b.createElement(k.FormattedMessage,Object.assign({},bs.partsYouNeed))),b.createElement("p",{className:Ps.subHeader},b.createElement(k.FormattedMessage,Object.assign({},bs.brandNewParts)))):b.createElement("div",{className:Ps.reqPartsHeader},b.createElement(k.FormattedMessage,Object.assign({},bs.SeeRequiredPartsHeader))),i&&b.createElement("div",{className:Ps.requiredPartsItemDetails,"data-automation":`required-parts-item-details-${a}`},b.createElement("p",{className:Ps.requiredPartsDesc},b.createElement(k.FormattedMessage,Object.assign({},bs.SeeRequiredPartsDescription))),b.createElement(S.rUS,{disabled:u,chevronType:"right",className:Ps.seeRequiredPartsItemLink,targetSelf:!0,href:`/${C}`},b.createElement("span",{"data-automation":"required-parts-link"},b.createElement(k.FormattedMessage,Object.assign({},bs.SeeRequiredPartsLinkText)))))),t&&g.map((e,t)=>{var i,d;return b.createElement(b.Fragment,{key:e.sku},b.createElement(Ss,Object.assign({},e,{offer:{regularPrice:null===(i=null==e?void 0:e.offer)||void 0===i?void 0:i.regularPrice,salePrice:null===(d=null==e?void 0:e.offer)||void 0===d?void 0:d.salePrice},footer:n?r?b.createElement(Ns,{status:s[e.sku],updateStatus:o,showErrorMessage:l,parentSku:a,requiredPartSku:e.sku,parentItemJustAddedToCart:c,showOptionNotSelectedErrorMessage:m}):b.createElement(Ka,{className:"remove-required-product",onRemove:()=>o(e.sku,"notInCart")}):null})),t<g.length-1?b.createElement("hr",null):null)})))},Ms=e=>b.createElement("div",null,b.createElement(S.oYE.Title,{width:300}),b.createElement(S.oYE.Line,null),b.createElement(S.oYE.Line,{width:180}),e.children&&e.children.map(e=>b.createElement(S.oYE.ProductTile,{key:e.sku.id}))),Ds=e=>{let{goToRequiredProducts:t,parentSku:a}=e;const s=(0,k.useIntl)();return b.createElement(b.Fragment,null,b.createElement("p",null,s.formatMessage(ss.SeeRequiredPartsDescription)),b.createElement(S.rUS,{className:"seeRequiredPartsItemLink",href:"javascript: void(0);",targetSelf:!0,onClick:()=>t(a)},s.formatMessage(ss.SeeRequiredPartsLinkText),b.createElement("div",{className:"rightChevron","data-automation":"required-parts-link"},b.createElement(S._Qn,{color:"blue"}))))},Rs=e=>{const t=(0,k.useIntl)(),{children:a,isLoading:s,requiredProducts:n,removeChildItem:r}=e;if(!(s||n&&n.length))return null;const i=a&&n&&a.length===n.length;return b.createElement("section",{className:"seeRequiredPartsItem"},b.createElement(S.aNw,{loading:s,loadingDisplay:b.createElement(Ms,Object.assign({},e))},b.createElement("header",null,t.formatMessage(ss.SeeRequiredPartsHeader)),!i&&b.createElement(Ds,Object.assign({},e)),a&&a.map((e,t)=>b.createElement(b.Fragment,{key:e.sku.id},b.createElement(Ss,{name:e.sku.product.name,thumbnailUrl:e.sku.product.thumbnailUrl,offer:{regularPrice:e.sku.offer.regularPrice,salePrice:e.sku.offer.purchasePrice},footer:b.createElement(Ka,{className:"remove-required-product",onRemove:()=>r(e.id)})}),t<a.length-1?b.createElement("hr",null):null))))},ws=e=>{const t=(0,k.useIntl)();if(!e||!e.availability)return null;const{pickup:a}=e.availability;return a&&a.purchasable&&"NotAvailable"!==a.status&&(void 0===e.isRpuEnabled||!0===e.isRpuEnabled)&&!e.isLightweightBasketEnabled?b.createElement(b.Fragment,null,b.createElement("section",{className:"RpuSection"},b.createElement("header",null,t.formatMessage(ss.ReserveInStoreHeader)),b.createElement("p",null,t.formatMessage(ss.ReserveInStoreDescription)),b.createElement("a",{className:"reserveInStoreLink",href:"javascript: void(0);",onClick:e.onReserveInStoreButtonClick},t.formatMessage(ss.ReserveInStore)))):null};var Bs=(0,_.connect)((e,t)=>{const a=oa(e.cart,t.parentLineItemId);return{apiErrorOccurred:ua(e.cart,u.FAILED),lineItemIDsWithNoWarrantyAccepted:e.servicePlan.lineItemIDsWithNoWarrantyAccepted,planType:_e(e.servicePlan,t.parentLineItemId),plans:Oe(e.servicePlan,t.parentLineItemId),selectedPlan:a?a.sku.id:""}},(e,t)=>({onAdd:a=>G(void 0,void 0,void 0,function*(){yield e(qa(t.parentLineItemId,{lineItemType:s.Psp,quantity:1,sku:a}))}),onRemove:()=>G(void 0,void 0,void 0,function*(){var a;yield e((a=t.parentLineItemId,(e,t,s)=>{let{cartRemover:n}=s;return G(void 0,void 0,void 0,function*(){var s,r,i,o;const l=t(),c=oa(l.cart,a),d=null===(r=null===(s=l.user)||void 0===s?void 0:s.shippingLocation)||void 0===r?void 0:r.postalCode,u=null===(o=null===(i=l.user)||void 0===i?void 0:i.shippingLocation)||void 0===o?void 0:o.regionCode,m=l.intl&&l.intl.locale;if(c)try{const t=yield n.removeChildItem(a,c.id,u,d,m);e(La(t))}catch(t){e(Ea({errorType:Ca(c.lineItemType,pa.REMOVE)}))}})}))}),onServicePlanAcceptChange:a=>{e(((e,t)=>({payload:{isAccepted:t,lineItemId:e},type:Ee}))(t.parentLineItemId,a))}}));var Fs=(0,_.connect)((e,t)=>{const a=oa(e.cart,t.parentLineItemId),s=((e,t)=>ia(e,t).sku.id)(e.cart,t.parentLineItemId);return{parentSku:s,selectedPlanSku:a?a.sku.id:""}});class xs{constructor(){this.id="cartId",this.deleteCartId=()=>{try{S.lew.removeCookie(this.id,this.getDomain())}catch(e){}},this.getCartId=()=>{const e=S.lew.getCookie(this.id),t=e?e.value:void 0;return t&&(this.deleteCartId(),this.setCartId(t)),t},this.setCartId=e=>{const t=new S.VjB(this.id,e);t.domain=this.getDomain(),S.lew.setCookie(t)},this.getDomain=()=>{let e="";if("undefined"!=typeof document){const t=document.location.hostname.match(/\w+\.?\w+$/);e=t?t[0]:""}return e}}}function js(e){return"string"==typeof e?e.replace(/([^:]\/)\/+/g,"$1"):e}class qs extends b.Component{constructor(){super(...arguments),this.generateHelpTopicPath=()=>{const{intl:{locale:e},isCsr:t=!1}=this.props;return`${t?"https://www.bestbuy.ca":""}/${e}/${{"en-CA":"help","fr-CA":"aide"}[e]}`}}render(){const{isCsr:e=!1,goToManufacturersWarrantyPage:t,parentSku:a}=this.props,s=`${this.generateHelpTopicPath()}/blt372c78db41358a01/blt9829bb6fbacda8f2`,n=`${this.generateHelpTopicPath()}/blt372c78db41358a01/blt612eaea73f4477ad`,r=e?ss.termsAndConditionsMsgCsr:ss.termsAndConditionsMsg;return b.createElement("div",{"data-automation":"terms-and-conditions-msg"},b.createElement(k.FormattedMessage,Object.assign({},r,{values:{legalWarrantyLink:b.createElement("a",{href:s,target:"_blank","data-automation":"legal-warranty-link"},b.createElement(k.FormattedMessage,Object.assign({},ss.quebecWarrantyLink))),manufacturerWarrantyLink:b.createElement("a",{href:t(a),target:"_blank","data-automation":"manufacturer-warranty-link"},b.createElement(k.FormattedMessage,Object.assign({},ss.manufacturerWarrantyLink))),termsAndConditionsLink:b.createElement("a",{href:n,target:"_blank","data-automation":"terms-and-conditions-link"},b.createElement(k.FormattedMessage,Object.assign({},ss.termsAndConditionsLink)))}})))}}var Us=Fs(e=>{const t=(0,k.useIntl)();return b.createElement(qs,Object.assign({},e,{intl:t}))});class Ws extends b.Component{constructor(e){super(e),this.getWarrantyCopy=()=>{const{planType:e,intl:{formatMessage:t}}=this.props;switch(e){case n.PSP:return{hook:t(ss.GspItemHook),productHeader:t(ss.GspItemProductHeader)};case n.PRP:return{hook:t(ss.GrpItemHook),productHeader:t(ss.GrpItemProductHeader)}}},this.setSelectedOptionToPrevious=()=>{this.setState(Object.assign(Object.assign({},this.state),{selectedOption:this.props.selectedPlan}))},this.selectedServicePlanInfo=()=>{const{selectedPlan:e}=this.props,{productHeader:t}=this.getWarrantyCopy();return b.createElement(S.aNw,{loading:this.state.isLoading,loadingDisplay:b.createElement(S.oYE.Title,null)},b.createElement("div",{className:cs["gsp-info"]},b.createElement("div",{className:cs["gsp-name"]},b.createElement(S.n_q,{className:cs["geek-squad-icon"],viewBox:"0 8 48 48"}),b.createElement("p",null,t," - ",this.servicePlanName(e))),b.createElement("p",{className:cs["gsp-price"]},this.servicePlanPrice(e))))},this.servicePlanName=e=>{const{intl:{formatMessage:t}}=this.props,a=this.props.plans.find(t=>{let{sku:a}=t;return a===e});if(!a||!a.termMonths)return t(ss.noPlan);const s=a.termMonths/12;return`${s} ${t(ss.year,{numOfYears:s})}`},this.servicePlanPrice=e=>{const{intl:{locale:t}}=this.props,a=this.props.plans.find(t=>{let{sku:a}=t;return a===e});return a&&a.termMonths?xe(a.purchasePrice,t):xe(0,t)},this.servicePlanOption=e=>{const{intl:{locale:t}}=this.props;return b.createElement(b.Fragment,null,b.createElement("div",{className:cs.label},this.servicePlanName(e.sku)),b.createElement("div",{className:cs.price},xe(e.purchasePrice,t)))},this.onServicePlanChange=e=>G(this,void 0,void 0,function*(){this.setState(Object.assign(Object.assign({},this.state),{isLoading:!0,isServicePlanAccepted:!1,isShowServicePlanAcceptWarning:!1,selectedOption:e})),this.props.onServicePlanAcceptChange(!1),e&&""!==e?yield this.props.onAdd(e):yield this.props.onRemove(),this.setState(Object.assign(Object.assign({},this.state),{isLoading:!1}))}),this.renderTermsAndConditionsAcceptCheckbox=()=>b.createElement(S.XZJ,{name:"accepted",label:"",handleAsyncChange:this.onAcceptChange,value:this.state.isServicePlanAccepted?"checked":"",error:!this.state.isServicePlanAccepted&&this.state.isShowServicePlanAcceptWarning}),this.onAcceptChange=(e,t)=>{const a=!!t.length;this.setState(Object.assign(Object.assign({},this.state),{isServicePlanAccepted:a})),this.props.onServicePlanAcceptChange(a)},this.state={isLoading:!1,isServicePlanAccepted:!1,isShowServicePlanAcceptWarning:!1,selectedOption:this.props.selectedPlan}}componentDidUpdate(e){if(e.apiErrorOccurred!==this.props.apiErrorOccurred&&!0===this.props.apiErrorOccurred&&this.setSelectedOptionToPrevious(),this.props.lineItemIDsWithNoWarrantyAccepted!==e.lineItemIDsWithNoWarrantyAccepted){const e=-1!==this.props.lineItemIDsWithNoWarrantyAccepted.indexOf(this.props.parentLineItemId);this.setState(Object.assign(Object.assign({},this.state),{isShowServicePlanAcceptWarning:e})),[].concat(this.props.lineItemIDsWithNoWarrantyAccepted)[0]===this.props.parentLineItemId&&A.OK.scrollTo(`service-plan-items-${this.props.parentLineItemId}`,{delay:100,duration:1e3,smooth:!0})}}render(){const{plans:e,intl:{formatMessage:t},parentLineItemId:a,selectedPlan:s,goToManufacturersWarrantyPage:n,isCsr:r=!1}=this.props;if(e.length<1)return null;const i=[Ws.NonePlan,...e],{hook:o}=this.getWarrantyCopy();return b.createElement("section",{className:cs["service-plans"],"data-automation":"gsp-items",id:`service-plan-items-${this.props.parentLineItemId}`},b.createElement(S.QwU,{className:cs["protection-logo"]}),this.selectedServicePlanInfo(),b.createElement("p",{className:cs["gsp-description"]},o),b.createElement("div",{className:cs["service-plans-options"]},i.map(e=>b.createElement(S.EUY,{className:cs["service-plans-option"],disabled:this.state.isLoading,hideCheckmark:!0,key:e.sku,label:this.servicePlanOption(e),name:a,onChange:this.onServicePlanChange,selectedValue:e.sku,value:this.state.selectedOption}))),s&&b.createElement(b.Fragment,null,b.createElement("div",{className:cs["terms-and-conditions-warning"]+(!this.state.isServicePlanAccepted&&this.state.isShowServicePlanAcceptWarning?` ${cs["terms-and-conditions-warning-displayed"]}`:"")},b.createElement("p",null,t(ss.warnAcceptWarranty))),b.createElement("div",{className:cs["terms-and-conditions"]},this.renderTermsAndConditionsAcceptCheckbox(),b.createElement(Us,{parentLineItemId:a,goToManufacturersWarrantyPage:n,isCsr:r}))))}}Ws.NonePlan={name:"",purchasePrice:0,sku:"",termMonths:0};var Hs=Bs(e=>{const t=(0,k.useIntl)();return b.createElement(Ws,Object.assign({},e,{intl:t}))});const Gs=e=>{let{shippingStatus:t}=e;const a=(0,k.useIntl)(),s=t&&ss[t];return s?b.createElement("div",{className:"status"},b.createElement("div",{className:"status-message"},a.formatMessage(s))):null},Vs=e=>{let{itemLevelDiscounts:t,loading:a,totalSavings:s}=e;const n=(0,k.useIntl)();return!t||t.length<1?null:b.createElement("tbody",null,t.map(e=>b.createElement("tr",{key:e.id},b.createElement("td",{key:e.id,colSpan:2},e.description))),b.createElement("tr",null,b.createElement("td",{className:"promo-total"},n.formatMessage(ss.PromotionalDiscount),":"),b.createElement("td",{className:"red right"},b.createElement(S.aNw,{loading:a,loadingDisplay:b.createElement(S.oYE.Price,null)},"-",xe(s,n.locale)))))};var $s=(0,_.connect)((e,t)=>({isRequiredProductsLoading:sa(e.requiredProducts,t.sku.id)||ua(e.cart,u.PROCESSING),requiredProducts:ta(e.requiredProducts,t.sku.id)}),e=>({fetchRequiredProducts:t=>e(Qt(t))}))(e=>{var{availabilities:t,displayEhfRegions:a,errorType:n,isLightweightBasketEnabled:r,isRpuEnabled:i,purchasable:o,quantity:l,regionCode:d,removed:u,sku:m,subTotal:p,totalSavings:h,promotionalBadges:C,fetchRequiredProducts:g,loading:y,removeItem:f,removeChildItem:E,updateItemQuantity:v,reserveInStore:P,children:I,getProductPath:O=()=>"#",onGoToPath:_=()=>0,goToBenefitsPage:T,goToManufacturersWarrantyPage:L,goToRequiredProducts:N,features:A,isCsr:M}=e,D=H(e,["availabilities","displayEhfRegions","errorType","isLightweightBasketEnabled","isRpuEnabled","purchasable","quantity","regionCode","removed","sku","subTotal","totalSavings","promotionalBadges","fetchRequiredProducts","loading","removeItem","removeChildItem","updateItemQuantity","reserveInStore","children","getProductPath","onGoToPath","goToBenefitsPage","goToManufacturersWarrantyPage","goToRequiredProducts","features","isCsr"]);const R=(0,k.useIntl)(),[w,B]=b.useState(!1),[F,x]=b.useState(!1);if(b.useEffect(()=>{g(m.id)},[g,m.id]),b.useEffect(()=>{!1===y&&F&&(B(!1),x(!1))},[y,F]),u)return b.createElement(us,Object.assign({},D,{sku:m}));const j=()=>O(m.id,""),q=e=>{e.preventDefault(),_(e.currentTarget.href)},U=e=>{E(D.id,e)},W=(()=>{const e=m.offer.orderLimit||99;return I?I.reduce((e,t)=>(t.sku.offer.orderLimit||99)<e?t.sku.offer.orderLimit:e,e):e})(),G=t&&t[m.id],V=F&&y,$=m.product.thumbnailUrl.includes("/images/common/pictures/noimage")?"https://multimedia.bbycastatic.ca/images/common/pictures/noimage150x150.jpg":m.product.thumbnailUrl;return b.createElement("div",{className:cs.lineItemContainer},b.createElement("div",{className:"lineItem"},dt(D.shippingStatus)?"":(e=>{let t,a;const s=We(d);return e===c.SoldOutOnline?(t=R.formatMessage(ss.OutOfStock),a=R.formatMessage(ss.OutOfStockDescription)):e===c.OutofStockInRegion?(t=R.formatMessage(ss.OutofStockInRegion,{currentRegion:s}),a=R.formatMessage(ss.OutofStockInRegionDescription)):e===c.RegionRestricted&&(t=R.formatMessage(ss.RegionRestricted,{currentRegion:s}),a=R.formatMessage(ss.RegionRestrictedDescription)),t?b.createElement(S.aNw,{loading:y,resizeWhenLoading:!0},!y&&b.createElement("div",{className:"outOfStock-status"},b.createElement("div",{className:"img-col"}),b.createElement("div",{className:"txt-col"},b.createElement("div",{className:"title"},t),b.createElement("div",{className:"message"},a)))):""})(D.shippingStatus),b.createElement("header",{className:"product-name"},b.createElement("a",{href:j(),onClick:q},m.product.name)),b.createElement(S.aNw,{loading:w,loadingDisplay:b.createElement("div",{className:"loading-spinner","data-testid":"remove-item-progress-spinner"},b.createElement(S.TKf,{width:"24px",containerClass:"spinner"}))},b.createElement("div",{className:"container"},dt(D.shippingStatus)?b.createElement(Gs,Object.assign({},D,{totalSavings:h,purchasable:o,quantity:l,sku:m})):"",b.createElement("div",{className:"purchasable "+(o?"":"unavailable")}),b.createElement("section",{className:"product-info"},b.createElement("div",{className:"detail"},b.createElement("div",{className:"thumbnail"},b.createElement("a",{href:j(),onClick:q},b.createElement("img",{alt:"product-thumbnail",src:$}))),b.createElement("div",{className:"price"},b.createElement(as,{className:cs.badgeWrp,sku:m.id,locale:R.locale,promotionalBadges:C,display:((e,t)=>{if(!e||!e.shipping||!e.pickup)return!1;const a=Number(t)>0,s=e.shipping&&e.shipping.purchasable,n=e.pickup&&e.pickup.purchasable;return a&&(s||n)})(G,h)}),b.createElement(ls,{intl:R,value:m.offer,regionCode:d,displayEhfRegions:a}),dt(D.shippingStatus)?b.createElement("div",{className:"quantity"},b.createElement(ts,{hasQuantityUpdateError:n&&"errorUpdateQuantity"===n,quantity:l,onChange:e=>{x(!0),v(D.id,e)},max:W})):"")),b.createElement("div",null,b.createElement(Ka,{onRemove:e=>{e.preventDefault(),B(!0),x(!0),setTimeout(()=>{f(D.id)},500)}})),W&&W===l&&99!==W&&b.createElement("div",{className:"house-limit","data-testid":"household-limit"},b.createElement(S.jzv,{message:R.formatMessage(ss.OrderLimit,{orderLimit:W})}))),b.createElement(ws,{availability:G,isLightweightBasketEnabled:r,isRpuEnabled:i,onReserveInStoreButtonClick:()=>{t&&t[m.id].pickup.purchasable&&P({items:[{quantity:l,sku:m.id}],seoText:m.product.seoText})}}),b.createElement(Rs,{children:I&&I.filter(e=>{let{lineItemType:t}=e;return t===s.RequiredPart}),goToRequiredProducts:N,isLoading:D.isRequiredProductsLoading,parentSku:m.id,removeChildItem:U,requiredProducts:D.requiredProducts}),b.createElement("div",null,b.createElement(Hs,{parentLineItemId:D.id,goToBenefitsPage:T,goToManufacturersWarrantyPage:L,features:A,isCsr:M}),b.createElement(is,{items:I,onRemove:U})),b.createElement("section",null,b.createElement("div",{className:"subtotal","data-testid":"line-item-subtotal"},b.createElement("table",null,b.createElement(Vs,Object.assign({availabilities:t,displayEhfRegions:a,errorType:n,isLightweightBasketEnabled:r,isRpuEnabled:i,purchasable:o,quantity:l,regionCode:d,removed:u,sku:m,subTotal:p,totalSavings:h,promotionalBadges:C,fetchRequiredProducts:g,loading:V,removeItem:f,removeChildItem:E,updateItemQuantity:v,reserveInStore:P,children:I,getProductPath:O,onGoToPath:_,goToBenefitsPage:T,goToManufacturersWarrantyPage:L,goToRequiredProducts:N,features:A,isCsr:M},D)),b.createElement("tbody",null,b.createElement("tr",null,b.createElement("td",null,b.createElement("strong",null,R.formatMessage(ss.ItemSubtotal))),b.createElement("td",{className:"right"},b.createElement("strong",null,b.createElement(S.aNw,{loading:V,loadingDisplay:b.createElement(S.oYE.Price,null)},xe(p,R.locale)))))))))))))}),Ys="styles-module_shipment__RgB4Q",Qs=(0,k.defineMessages)({productTotal:{id:"components.Cart.shipment.ProductTotal"},soldBy:{defaultMessage:"Sold & Shipped By",description:"sold and shipped by text",id:"components.Cart.shipment.soldBy"}});const Zs=e=>{let{availabilities:t,displayEhfRegions:a,errorType:s,getProductPath:n,isCsr:r=!1,isLightweightBasketEnabled:i,lineItems:o,loading:l,onGoToPath:c,regionCode:d,removeChildItem:u,removeItem:m,reserveInStore:p,seller:h,updateItemQuantity:C,features:g,goToBenefitsPage:y,goToManufacturersWarrantyPage:f,goToRequiredProducts:E,promotionalBadges:v}=e;const P=(0,k.useIntl)();if(!o||o.length<1)return null;const I="bbyca"===h.id;return b.createElement("div",{className:Ys},!(e=>e.filter(e=>!0!==e.removed).length<1)(o)&&b.createElement("h3",null,b.createElement("span",{className:"sold-by","data-seller-id":h.id},I?b.createElement(S.nam,{className:"sellerlogo bbyNewStyle"}):b.createElement(S.dNu,{className:"sellerlogo bbyNewStyle"}),P.formatMessage(Qs.soldBy)," ",h.name)),b.createElement("ul",{className:"line-items"},o.map(e=>b.createElement("li",{key:"sku"+e.sku.id},b.createElement($s,Object.assign({},e,{availabilities:t,displayEhfRegions:a,errorType:s,getProductPath:n,isLightweightBasketEnabled:i,loading:l,onGoToPath:c,regionCode:d,removeChildItem:u,removeItem:m,reserveInStore:p,updateItemQuantity:C,features:g,goToBenefitsPage:y,goToManufacturersWarrantyPage:f,goToRequiredProducts:E,promotionalBadges:v,isCsr:r}))))))};var zs=(0,k.defineMessages)({continueShopping:{defaultMessage:"Continue Shopping",description:"continue shopping button",id:"components.Cart.continueShopping"},continueToCheckout:{defaultMessage:"Continue to Checkout",description:"checkout button",id:"components.Cart.continueToCheckout"},emptyCartHaveAccount:{defaultMessage:"Do you have an account?",description:"account prompt",id:"components.BasketPage.emptyCart.emptyCartHaveAccount"},emptyCartHeader:{defaultMessage:"Looks like it's empty!",description:"empty cart heading text",id:"components.BasketPage.emptyCart.emptyCartHeader"},emptyCartSignIn:{defaultMessage:"Sign In",description:"sign in button text",id:"components.BasketPage.emptyCart.emptyCartSignIn"},emptyCartText:{defaultMessage:"Why not add something?",description:"empty cart sub text",id:"components.BasketPage.emptyCart.emptyCartText"},errorAddWarranty:{id:"components.BasketPage.errors.errorAddWarranty"},errorFallbackMessage:{defaultMessage:"Sorry, something went wrong.",id:"components.BasketPage.errors.fallbackMessage"},errorLoadCart:{id:"components.BasketPage.errors.errorLoadCart"},errorRemoveItem:{id:"components.BasketPage.errors.errorRemoveItem"},errorRemoveWarranty:{id:"components.BasketPage.errors.errorRemoveWarranty"},errorUpdateQuantity:{id:"components.BasketPage.errors.errorUpdateQuantity"},estimatedTotal:{defaultMessage:"Estimated Total",description:"basket summary - estimated total",id:"components.Cart.estimatedTotal"},everythingIsOutOfStock:{defaultMessage:"Everything in your cart is out of stock.",description:"Everything in your cart is out of stock.",id:"components.BasketPage.emptyCart.everythingIsOutOfStock"},everythingOutOfStockInRegion:{defaultMessage:"Everything in your cart is out of stock in {region}.",description:"everythingOutOfStockInRegion",id:"components.BasketPage.emptyCart.everythingOutOfStockInRegion"},everythingOutOfStockInRegionBody:{defaultMessage:"You can update your postal code to check availability somewhere else, or find something else that can be shipped to your province.",description:"everythingOutOfStockInRegionBody",id:"components.BasketPage.emptyCart.everythingOutOfStockInRegionBody"},everythingRegionRestricted:{defaultMessage:"Nothing in your cart can be shipped to {region}.",description:"everythingRegionRestricted",id:"components.BasketPage.emptyCart.everythingRegionRestricted"},everythingRegionRestrictedBody:{defaultMessage:"You can update your postal code to check availability somewhere else, or find something else that can be shipped to your province.",description:"everythingRegionRestrictedBody",id:"components.BasketPage.emptyCart.everythingRegionRestrictedBody"},householdLimit:{id:"components.BasketPage.householdLimit"},householdLimitOfferError:{id:"components.BasketPage.householdLimitOfferError"},itemAlreadyRemovedError:{id:"components.BasketPage.Error.ItemAlreadyRemovedError"},itemNoLongerAvailable:{id:"components.BasketPage.Error.ItemNoLongerAvailable"},items:{defaultMessage:"items",description:"items",id:"components.Cart.items"},lowStock:{id:"components.BasketPage.LineItemAvailabilityStatus.LowStock"},mixOfNonPurchasable:{defaultMessage:"The items in your cart aren't available.",description:"mixOfNonPurchasable",id:"components.BasketPage.emptyCart.mixOfNonPurchasable"},mixOfNonPurchasableBody:{defaultMessage:"You can update your postal code to check availability somewhere else, or find something else that can be shipped to your province.",description:"mixOfNonPurchasableBody",id:"components.BasketPage.emptyCart.mixOfNonPurchasableBody"},or:{defaultMessage:"or",description:"button choices/separation",id:"components.Cart.or"},paypalError:{defaultMessage:"Sorry, your PayPal payment wasn't completed. Please use another payment method.",description:"error message when paypal is canceled, or fails",id:"components.Cart.paypalError"},releaseDate:{id:"components.BasketPage.LineItem.releaseDate"},soldAndShippedBy:{defaultMessage:"Sold & Shipped by",description:"shipment header",id:"components.Cart.soldAndShippedBy"},whyNotAddSomething:{defaultMessage:"Why not add something else?",description:"Why not add something else?",id:"components.BasketPage.emptyCart.whyNotAddSomething"}});const Ks=e=>{let{quantity:t}=e;const a=(0,k.useIntl)();return b.createElement("small",null,a.formatMessage(zs.items,{quantity:t}))};var Js="styles-module_basketPage__lLaK1",Xs="styles-module_pageLoader__RaDxK";const en=e=>{const t=(0,k.useIntl)();return b.createElement("section",{className:Js},b.createElement("div",{className:"empty-cart","data-testid":"empty-cart"},e.cart&&e.cart.shipments&&e.cart.shipments.map(t=>b.createElement(Zs,Object.assign({key:"sellerId"+t.seller.id},t,{onGoToPath:e.onGoToPath}))),b.createElement("div",{className:"text"},b.createElement("h2",null,t.formatMessage(zs.emptyCartHeader)),b.createElement("p",null,t.formatMessage(zs.emptyCartText))),b.createElement("img",{className:"empty-cart-icon",src:Fe,alt:"empty cart"})))},tn=e=>{const t=(0,k.useIntl)(),a=e.isCsr?e.checkoutUri:I.jx.buildSignInUrl(e.cieServiceUrl,e.lang,e.checkoutUri,"checkout");return b.createElement(De,null,b.createElement(S.zxk,{className:"continue-to-checkout",href:a},b.createElement("div",{"data-automation":"continue-to-checkout"},t.formatMessage(zs.continueToCheckout))))};var an="data:image/svg+xml,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%3Csvg%20width%3D%2291px%22%20height%3D%2224px%22%20viewBox%3D%220%200%2091%2024%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%20%20%20%20%20%20%20%20%3Ctitle%3Epayment%2Fpaypal%20white%3C%2Ftitle%3E%20%20%20%20%3Cdesc%3ECreated%20with%20Sketch.%3C%2Fdesc%3E%20%20%20%20%3Cdefs%3E%3C%2Fdefs%3E%20%20%20%20%3Cg%20id%3D%22payment%2Fpaypal-white%22%20stroke%3D%22none%22%20stroke-width%3D%221%22%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%20%20%20%20%20%20%20%20%3Cpath%20d%3D%22M83.97926%2C6.42897401%20L81.985212%2C19.0727522%20C81.9463709%2C19.3174866%2082.1361908%2C19.5391211%2082.3848986%2C19.5391211%20L84.3908496%2C19.5391211%20C84.7228777%2C19.5391211%2085.0060413%2C19.2981326%2085.0574117%2C18.9709877%20L87.0238952%2C6.55446283%20C87.0627362%2C6.30972843%2086.8729164%2C6.08809396%2086.6235821%2C6.08809396%20L84.3795732%2C6.08809396%20C84.1797298%2C6.08809396%2084.009957%2C6.23231244%2083.97926%2C6.42897401%22%20id%3D%22l%22%20fill%3D%22%23FFFFFF%22%3E%3C%2Fpath%3E%20%20%20%20%20%20%20%20%3Cpath%20d%3D%22M77.9946099%2C15.0802102%20C77.7697079%2C16.4050224%2076.7147355%2C17.2946819%2075.3684555%2C17.2946819%20C74.6937493%2C17.2946819%2074.1531073%2C17.078042%2073.806044%2C16.6684865%20C73.4614865%2C16.2626769%2073.332434%2C15.68393%2073.4414395%2C15.0402535%20C73.6506799%2C13.7266791%2074.7231933%2C12.8089251%2076.0487999%2C12.8089251%20C76.7097238%2C12.8089251%2077.2459805%2C13.027438%2077.599935%2C13.4407394%20C77.9563954%2C13.8571625%2078.0967242%2C14.439031%2077.9946099%2C15.0802102%20M81.237209%2C10.5669832%20L78.9105063%2C10.5669832%20C78.7112895%2C10.5669832%2078.5415166%2C10.7112017%2078.5101932%2C10.9078633%20L78.4080789%2C11.55591%20L78.2451972%2C11.3211647%20C77.7415168%2C10.5925804%2076.6182594%2C10.3484703%2075.4968815%2C10.3484703%20C72.9264827%2C10.3484703%2070.7307119%2C12.2901131%2070.3034606%2C15.0127833%20C70.0810644%2C16.371309%2070.3968043%2C17.6692754%2071.169866%2C18.5751672%20C71.8796544%2C19.407389%2072.8926534%2C19.753888%2074.0998575%2C19.753888%20C76.1722141%2C19.753888%2077.3211567%2C18.4278271%2077.3211567%2C18.4278271%20L77.217163%2C19.0721279%20C77.1783219%2C19.3168623%2077.3681418%2C19.5384968%2077.6174761%2C19.5384968%20L79.7123856%2C19.5384968%20C80.0450401%2C19.5384968%2080.3275773%2C19.2981326%2080.3795741%2C18.9709877%20L81.6375221%2C11.0333521%20C81.6763632%2C10.7886177%2081.4859169%2C10.5669832%2081.237209%2C10.5669832%22%20id%3D%22a%22%20fill%3D%22%23FFFFFF%22%3E%3C%2Fpath%3E%20%20%20%20%20%20%20%20%3Cpath%20d%3D%22M67.2751136%2C10.6225479%20C67.0094911%2C12.3606616%2065.6776199%2C12.3606616%2064.3889749%2C12.3606616%20L63.6560072%2C12.3606616%20L64.1703375%2C9.1154335%20C64.2010345%2C8.91939626%2064.3708073%2C8.77517777%2064.5700242%2C8.77517777%20L64.9064376%2C8.77517777%20C65.783493%2C8.77517777%2066.6116839%2C8.77517777%2067.0389351%2C9.27276276%20C67.2945341%2C9.57056457%2067.3715897%2C10.0125849%2067.2751136%2C10.6225479%20M66.7144246%2C6.08746964%20L61.8555378%2C6.08746964%20C61.5228832%2C6.08746964%2061.240346%2C6.3284581%2061.1883492%2C6.65560306%20L59.2237451%2C19.0721279%20C59.1849041%2C19.3168623%2059.3753504%2C19.5384968%2059.6234318%2C19.5384968%20L62.116775%2C19.5384968%20C62.3491946%2C19.5384968%2062.5471586%2C19.3699297%2062.5834937%2C19.1414277%20L63.1410504%2C15.6208734%20C63.1924208%2C15.2937284%2063.4755844%2C15.05274%2063.8076125%2C15.05274%20L65.3449653%2C15.05274%20C68.545591%2C15.05274%2070.3930455%2C13.5094149%2070.875426%2C10.4496106%20C71.0928104%2C9.11231189%2070.8841966%2C8.06095289%2070.255849%2C7.32487673%20C69.5648547%2C6.51575483%2068.3401094%2C6.08746964%2066.7144246%2C6.08746964%22%20id%3D%22P%22%20fill%3D%22%23FFFFFF%22%3E%3C%2Fpath%3E%20%20%20%20%20%20%20%20%3Cpath%20d%3D%22M58.9731579%2C10.5669832%20L56.6345523%2C10.5669832%20C56.4109032%2C10.5669832%2056.2016628%2C10.6774883%2056.0763692%2C10.8622877%20L52.8500583%2C15.5971492%20L51.4831048%2C11.0470872%20C51.3972787%2C10.7623961%2051.134162%2C10.5669832%2050.8359632%2C10.5669832%20L48.5374516%2C10.5669832%20C48.2599262%2C10.5669832%2048.0644682%2C10.8391878%2048.1540531%2C11.1007789%20L50.7288372%2C18.6338535%20L48.3069113%2C22.0395325%20C48.1170915%2C22.3067425%2048.3087907%2C22.6763414%2048.6376865%2C22.6763414%20L50.9737862%2C22.6763414%20C51.1949295%2C22.6763414%2051.4022904%2C22.5683336%2051.528837%2C22.3872801%20L59.3058124%2C11.2006705%20C59.4918735%2C10.9328361%2059.3001742%2C10.5669832%2058.9731579%2C10.5669832%22%20id%3D%22y%22%20fill%3D%22%23FFFFFF%22%3E%3C%2Fpath%3E%20%20%20%20%20%20%20%20%3Cpath%20d%3D%22M43.3383925%2C15.0802102%20C43.1134905%2C16.4050224%2042.0585181%2C17.2946819%2040.7122381%2C17.2946819%20C40.0375319%2C17.2946819%2039.4968899%2C17.078042%2039.1498266%2C16.6684865%20C38.8058956%2C16.2626769%2038.6762167%2C15.68393%2038.7852221%2C15.0402535%20C38.9944625%2C13.7266791%2040.0669759%2C12.8089251%2041.3925825%2C12.8089251%20C42.0535064%2C12.8089251%2042.5897631%2C13.027438%2042.9437176%2C13.4407394%20C43.300178%2C13.8571625%2043.4405068%2C14.439031%2043.3383925%2C15.0802102%20M46.5809916%2C10.5669832%20L44.254289%2C10.5669832%20C44.0550721%2C10.5669832%2043.8852992%2C10.7112017%2043.8539758%2C10.9078633%20L43.7518615%2C11.55591%20L43.5896063%2C11.3211647%20C43.0852994%2C10.5925804%2041.962042%2C10.3484703%2040.8406641%2C10.3484703%20C38.2702653%2C10.3484703%2036.0744945%2C12.2901131%2035.6472432%2C15.0127833%20C35.424847%2C16.371309%2035.740587%2C17.6692754%2036.5136486%2C18.5751672%20C37.223437%2C19.407389%2038.236436%2C19.753888%2039.4436401%2C19.753888%20C41.5159967%2C19.753888%2042.6649393%2C18.4278271%2042.6649393%2C18.4278271%20L42.5609456%2C19.0721279%20C42.5221046%2C19.3168623%2042.7119244%2C19.5384968%2042.9612587%2C19.5384968%20L45.0561682%2C19.5384968%20C45.3888228%2C19.5384968%2045.6713599%2C19.2981326%2045.7233567%2C18.9709877%20L46.9813048%2C11.0333521%20C47.0201458%2C10.7886177%2046.8296995%2C10.5669832%2046.5809916%2C10.5669832%22%20id%3D%22a%22%20fill%3D%22%23FFFFFF%22%3E%3C%2Fpath%3E%20%20%20%20%20%20%20%20%3Cpath%20d%3D%22M32.6188962%2C10.6225479%20C32.3532737%2C12.3606616%2031.0214025%2C12.3606616%2029.7327575%2C12.3606616%20L28.9997898%2C12.3606616%20L29.5141201%2C9.1154335%20C29.5448171%2C8.91939626%2029.7145899%2C8.77517777%2029.9138068%2C8.77517777%20L30.2502202%2C8.77517777%20C31.1272756%2C8.77517777%2031.9554665%2C8.77517777%2032.3827177%2C9.27276276%20C32.6383167%2C9.57056457%2032.7153723%2C10.0125849%2032.6188962%2C10.6225479%20M32.0582072%2C6.08746964%20L27.1993204%2C6.08746964%20C26.8666658%2C6.08746964%2026.5841287%2C6.3284581%2026.5321318%2C6.65560306%20L24.5675277%2C19.0721279%20C24.5286867%2C19.3168623%2024.7185065%2C19.5384968%2024.9672144%2C19.5384968%20L27.2876524%2C19.5384968%20C27.6196805%2C19.5384968%2027.9022176%2C19.2975083%2027.9542145%2C18.9709877%20L28.484833%2C15.6208734%20C28.5362034%2C15.2937284%2028.819367%2C15.05274%2029.1513951%2C15.05274%20L30.6887479%2C15.05274%20C33.8893736%2C15.05274%2035.7368282%2C13.5094149%2036.2192086%2C10.4496106%20C36.4365931%2C9.11231189%2036.2279792%2C8.06095289%2035.5996316%2C7.32487673%20C34.9086373%2C6.51575483%2033.6838921%2C6.08746964%2032.0582072%2C6.08746964%22%20id%3D%22P%22%20fill%3D%22%23FFFFFF%22%3E%3C%2Fpath%3E%20%20%20%20%20%20%20%20%3Cg%20id%3D%22paypalwhite%22%20transform%3D%22translate%281.000000%2C%200.000000%29%22%20fill-rule%3D%22nonzero%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%3Cpath%20d%3D%22M15.1048667%2C7.24193333%20C15.3195333%2C5.6327%2015.1048667%2C4.55936667%2014.2431333%2C3.4868%20C13.3101%2C2.41346667%2011.6594667%2C1.95346667%209.57796667%2C1.95346667%20L3.4776%2C1.95346667%20C3.04673333%2C1.95346667%202.68793333%2C2.26013333%202.61586667%2C2.72013333%20L0.104266667%2C19.734%20C0.0322%2C20.1165667%200.247633333%2C20.4232333%200.606433333%2C20.4232333%20L4.41063333%2C20.4232333%20L4.12313333%2C22.1858%20C4.05183333%2C22.4158%204.33856667%2C22.7224667%204.554%2C22.7224667%20L7.78396667%2C22.7224667%20C8.14276667%2C22.7224667%208.4295%2C22.4158%208.50156667%2C22.0332333%20L8.57286667%2C21.8799%20L9.1471%2C17.8947667%20L9.21916667%2C17.6647667%20C9.29123333%2C17.2047667%209.57796667%2C16.9747667%209.93676667%2C16.9747667%20L10.4389333%2C16.9747667%20C13.5255333%2C16.9747667%2015.8937667%2C15.5955333%2016.6121333%2C11.8396333%20C16.8988667%2C10.2304%2016.7555%2C8.85116667%2015.9658333%2C7.93116667%20C15.6791%2C7.70193333%2015.3916%2C7.39526667%2015.1048667%2C7.24193333%22%20id%3D%22Shape%22%20fill%3D%22%23FFFFFF%22%20opacity%3D%220.7%22%3E%3C%2Fpath%3E%20%20%20%20%20%20%20%20%20%20%20%20%3Cpath%20d%3D%22M15.1048667%2C7.24193333%20C15.3195333%2C5.6327%2015.1048667%2C4.55936667%2014.2431333%2C3.4868%20C13.3101%2C2.41346667%2011.6594667%2C1.95346667%209.57796667%2C1.95346667%20L3.4776%2C1.95346667%20C3.04673333%2C1.95346667%202.68793333%2C2.26013333%202.61586667%2C2.72013333%20L0.104266667%2C19.734%20C0.0322%2C20.1165667%200.247633333%2C20.4232333%200.606433333%2C20.4232333%20L4.41063333%2C20.4232333%20L5.34366667%2C14.0622%20L5.2716%2C14.2922%20C5.41496667%2C13.8329667%205.70246667%2C13.5263%206.20463333%2C13.5263%20L7.99863333%2C13.5263%20C11.5161%2C13.5263%2014.2431333%2C11.9929667%2015.0328%2C7.62526667%20C15.0328%2C7.47193333%2015.0328%2C7.3186%2015.1048667%2C7.24193333%22%20id%3D%22Shape%22%20fill%3D%22%23FFFFFF%22%20opacity%3D%220.7%22%3E%3C%2Fpath%3E%20%20%20%20%20%20%20%20%20%20%20%20%3Cpath%20d%3D%22M6.348%2C7.24193333%20C6.348%2C7.01193333%206.49213333%2C6.78193333%206.77886667%2C6.6286%20C6.85093333%2C6.6286%206.9943%2C6.55193333%207.0656%2C6.55193333%20L11.8749%2C6.55193333%20C12.4491333%2C6.55193333%2012.9513%2C6.6286%2013.4534667%2C6.70526667%20C13.5976%2C6.70526667%2013.6689%2C6.70526667%2013.8843333%2C6.78193333%20C13.9564%2C6.8586%2014.0997667%2C6.8586%2014.2431333%2C6.93526667%20C14.3152%2C6.93526667%2014.3152%2C6.93526667%2014.4585667%2C7.01193333%20C14.674%2C7.0886%2014.8894333%2C7.16526667%2015.1048667%2C7.24193333%20C15.3195333%2C5.6327%2015.1048667%2C4.55936667%2014.2431333%2C3.56346667%20C13.3101%2C2.49013333%2011.6594667%2C1.95346667%209.57796667%2C1.95346667%20L3.4776%2C1.95346667%20C3.04673333%2C1.95346667%202.68793333%2C2.3368%202.61586667%2C2.72013333%20L0.104266667%2C19.734%20C0.0322%2C20.1165667%200.247633333%2C20.4232333%200.606433333%2C20.4232333%20L4.41063333%2C20.4232333%20L5.34366667%2C14.0622%20L6.348%2C7.24193333%20Z%22%20id%3D%22Shape%22%20fill%3D%22%23FFFFFF%22%3E%3C%2Fpath%3E%20%20%20%20%20%20%20%20%20%20%20%20%3Cg%20id%3D%22Group%22%20opacity%3D%220.2%22%20transform%3D%22translate%280.077771%2C%200.489635%29%22%20fill%3D%22%23231F20%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cpath%20d%3D%22M14.9968158%2C6.73608973%20C15.3402543%2C6.93776907%2015.645533%2C7.17978427%2015.8744921%2C7.46213533%20C16.2560904%2C7.90582987%2016.4850494%2C8.470532%2016.5995289%2C9.11590587%20C16.7140085%2C7.82515813%2016.5232093%2C6.7764256%2015.8744921%2C5.96970827%20C15.645533%2C5.6873572%2015.3784142%2C5.48567787%2015.0731355%2C5.28399853%20C15.0731355%2C5.72769307%2015.0731355%2C6.21172347%2014.9968158%2C6.73608973%20Z%22%20id%3D%22Shape%22%3E%3C%2Fpath%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cpath%20d%3D%22M0.152639347%2C18.2318117%20L2.55670906%2C2.25880853%20C2.59486889%2C1.815114%202.97646726%2C1.49242707%203.39622546%2C1.49242707%20L9.50179933%2C1.49242707%20C11.6005903%2C1.49242707%2013.2414633%2C1.97645747%2014.1572994%2C3.06552587%20C14.6152174%2C3.630228%2014.8823363%2C4.27560187%2014.9968158%2C5.00164747%20C15.1494552%2C3.54955627%2014.9204961%2C2.5411596%2014.1572994%2C1.61343467%20C13.2414633%2C0.4840304%2011.6005903%2C0%209.50179933%2C0%20L3.39622546%2C0%20C2.97646726%2C0%202.59486889%2C0.322686933%202.51854922%2C0.766381467%20L0%2C17.7881172%20C0%2C17.9494607%200.0381598367%2C18.1108041%200.152639347%2C18.2318117%20Z%22%20id%3D%22Shape%22%3E%3C%2Fpath%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cpath%20d%3D%22M4.0977375%2C19.9259181%20L4.0479638%2C20.1679333%20C3.9981901%2C20.3292768%204.0977375%2C20.4906203%204.2470586%2C20.6116279%20L4.3963797%2C19.9259181%20L4.0977375%2C19.9259181%20Z%22%20id%3D%22Shape%22%3E%3C%2Fpath%3E%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fg%3E%20%20%20%20%20%20%20%20%3C%2Fg%3E%20%20%20%20%3C%2Fg%3E%3C%2Fsvg%3E",sn={paypalButton:"styles-module_paypalButton__p0CMV",paypalContent:"styles-module_paypalContent__AOo1j",paypalButtonLogo:"styles-module_paypalButtonLogo__Cnu4m",buttonDescription:"styles-module_buttonDescription__z-IaB",removePaypalButton:"styles-module_removePaypalButton__oefu1",paypalLoadingOverlay:"styles-module_paypalLoadingOverlay__DEpq7",paypalModal:"styles-module_paypalModal__uXXEL",paypalCheckoutLogo:"styles-module_paypalCheckoutLogo__nAc7R",paypalLoaderDescription:"styles-module_paypalLoaderDescription__-IQH4",paypalCheckoutLogoPp:"styles-module_paypalCheckoutLogoPp__tSIb1",paypalSpinner:"styles-module_paypalSpinner__sYpbo",rotation:"styles-module_rotation__ciSHM"},nn=(0,k.defineMessages)({ariaLabel:{defaultMessage:"Paypal Checkout",description:"Paypal checkout button aria label",id:"components.BasketPage.PaypalButton.ariaLabel"},paypalButton:{defaultMessage:"Pay with",description:"Pay with text",id:"components.BasketPage.PaypalButton.paypalButton"},paypalButtonExpress:{defaultMessage:"Checkout",description:"express checkout text",id:"components.BasketPage.PaypalButton.paypalButtonExpress"},paypalDescription:{defaultMessage:'Select "Pay with PayPal" to enter your payment details on the PayPal site.',description:"Paypal helper text",id:"components.BasketPage.PaypalButton.paypalDescription"},paypalLoaderDescription:{defaultMessage:"Please wait while we redirect you to PayPal.",description:"Paypal transitional text",id:"components.BasketPage.PaypalButton.paypalLoaderDescription"},unlinkPaypal:{defaultMessage:"Remove PayPal account",description:"Remove paypal account text",id:"components.BasketPage.PaypalButton.unlinkPaypal"}});class rn extends b.Component{constructor(e){var t;super(e),t=this,this.renderEmail=()=>b.createElement("div",null,b.createElement("span",{"data-automation":"paypal-email"},this.props.paypalEmail),b.createElement("button",{className:sn.removePaypalButton,onClick:this.onClickRemoveHandler,"data-automation":"remove-paypal-button"},this.props.intl.formatMessage(nn.unlinkPaypal))),this.renderButton=function(){let{href:e="javascript:void(0);",isExpress:a,intl:s,hasDescription:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.props;return b.createElement(b.Fragment,null,t.paypalDescription(n),b.createElement(De,{store:t.props.store,disableAgeVerification:t.props.disableAgeVerification,onCheckout:t.onClickPaypalHandler},b.createElement("a",{className:sn.paypalButton,"data-automation":"paypal-button",href:e},b.createElement("span",{"aria-label":s.formatMessage(nn.ariaLabel),className:sn.paypalContent},a?b.createElement("span",{"aria-hidden":!0},b.createElement("img",{alt:"paypal logo",className:sn.paypalButtonLogo,src:an,"aria-hidden":!0}),s.formatMessage(nn.paypalButtonExpress)):b.createElement("span",{"aria-hidden":!0},s.formatMessage(nn.paypalButton),b.createElement("img",{alt:"paypal logo",className:sn.paypalButtonLogo,src:an}))))))},this.paypalDescription=e=>{if(e)return b.createElement("p",{className:sn.buttonDescription},this.props.intl.formatMessage(nn.paypalDescription))},this.onClickPaypalHandler=()=>{this.setState({loading:!0}),this.props.onRegisterPaypal()},this.onClickRemoveHandler=()=>{this.props.onRemovePaypal()},this.state={loading:!1}}render(){const{paypalEmail:e,paypalError:t,className:a=""}=this.props,{loading:s}=this.state;return b.createElement("div",{className:`${sn.paypalButtonContainer} ${a}`},e&&""!==e?this.renderEmail():this.renderButton(),s&&!t&&b.createElement(on,null))}}const on=()=>{const e=(0,k.useIntl)();return b.createElement("div",{className:sn.paypalLoadingOverlay,"data-automation":"paypal-loader"},b.createElement("div",{className:sn.paypalModal},b.createElement("div",{className:sn.paypalCheckoutLogo},b.createElement("img",{className:sn.paypalCheckoutLogoPp,alt:"paypal logo",src:"data:image/svg+xml,%3Csvg%20width%3D%2224%22%20height%3D%2232%22%20viewBox%3D%220%200%2024%2032%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20preserveAspectRatio%3D%22xMinYMin%20meet%22%3E%20%20%20%20%3Cpath%20fill%3D%22%23ffffff%22%20opacity%3D%220.7%22%20d%3D%22M%2020.702%209.446%20C%2020.982%207.347%2020.702%205.947%2019.578%204.548%20C%2018.361%203.148%2016.208%202.548%2013.493%202.548%20L%205.536%202.548%20C%204.974%202.548%204.506%202.948%204.412%203.548%20L%201.136%2025.74%20C%201.042%2026.239%201.323%2026.639%201.791%2026.639%20L%206.753%2026.639%20L%206.378%2028.938%20C%206.285%2029.238%206.659%2029.638%206.94%2029.638%20L%2011.153%2029.638%20C%2011.621%2029.638%2011.995%2029.238%2012.089%2028.739%20L%2012.182%2028.539%20L%2012.931%2023.341%20L%2013.025%2023.041%20C%2013.119%2022.441%2013.493%2022.141%2013.961%2022.141%20L%2014.616%2022.141%20C%2018.642%2022.141%2021.731%2020.342%2022.668%2015.443%20C%2023.042%2013.344%2022.855%2011.545%2021.825%2010.345%20C%2021.451%2010.046%2021.076%209.646%2020.702%209.446%20L%2020.702%209.446%22%3E%3C%2Fpath%3E%20%20%20%20%3Cpath%20fill%3D%22%23ffffff%22%20opacity%3D%220.7%22%20d%3D%22M%2020.702%209.446%20C%2020.982%207.347%2020.702%205.947%2019.578%204.548%20C%2018.361%203.148%2016.208%202.548%2013.493%202.548%20L%205.536%202.548%20C%204.974%202.548%204.506%202.948%204.412%203.548%20L%201.136%2025.74%20C%201.042%2026.239%201.323%2026.639%201.791%2026.639%20L%206.753%2026.639%20L%207.97%2018.342%20L%207.876%2018.642%20C%208.063%2018.043%208.438%2017.643%209.093%2017.643%20L%2011.433%2017.643%20C%2016.021%2017.643%2019.578%2015.643%2020.608%209.946%20C%2020.608%209.746%2020.608%209.546%2020.702%209.446%22%3E%3C%2Fpath%3E%20%20%20%20%3Cpath%20fill%3D%22%23ffffff%22%20d%3D%22M%209.28%209.446%20C%209.28%209.146%209.468%208.846%209.842%208.646%20C%209.936%208.646%2010.123%208.546%2010.216%208.546%20L%2016.489%208.546%20C%2017.238%208.546%2017.893%208.646%2018.548%208.746%20C%2018.736%208.746%2018.829%208.746%2019.11%208.846%20C%2019.204%208.946%2019.391%208.946%2019.578%209.046%20C%2019.672%209.046%2019.672%209.046%2019.859%209.146%20C%2020.14%209.246%2020.421%209.346%2020.702%209.446%20C%2020.982%207.347%2020.702%205.947%2019.578%204.648%20C%2018.361%203.248%2016.208%202.548%2013.493%202.548%20L%205.536%202.548%20C%204.974%202.548%204.506%203.048%204.412%203.548%20L%201.136%2025.74%20C%201.042%2026.239%201.323%2026.639%201.791%2026.639%20L%206.753%2026.639%20L%207.97%2018.342%20L%209.28%209.446%20Z%22%3E%3C%2Fpath%3E%20%20%20%20%3Cg%20transform%3D%22matrix%280.497737%2C%200%2C%200%2C%200.52612%2C%201.10144%2C%200.638654%29%22%20opacity%3D%220.2%22%3E%20%20%20%20%20%20%20%20%3Cpath%20fill%3D%22%23231f20%22%20d%3D%22M39.3%2016.7c0.9%200.5%201.7%201.1%202.3%201.8%201%201.1%201.6%202.5%201.9%204.1%200.3-3.2-0.2-5.8-1.9-7.8-0.6-0.7-1.3-1.2-2.1-1.7C39.5%2014.2%2039.5%2015.4%2039.3%2016.7z%22%3E%3C%2Fpath%3E%20%20%20%20%20%20%20%20%3Cpath%20fill%3D%22%23231f20%22%20d%3D%22M0.4%2045.2L6.7%205.6C6.8%204.5%207.8%203.7%208.9%203.7h16c5.5%200%209.8%201.2%2012.2%203.9%201.2%201.4%201.9%203%202.2%204.8%200.4-3.6-0.2-6.1-2.2-8.4C34.7%201.2%2030.4%200%2024.9%200H8.9c-1.1%200-2.1%200.8-2.3%201.9L0%2044.1C0%2044.5%200.1%2044.9%200.4%2045.2z%22%3E%3C%2Fpath%3E%20%20%20%20%20%20%20%20%3Cpath%20fill%3D%22%23231f20%22%20d%3D%22M10.7%2049.4l-0.1%200.6c-0.1%200.4%200.1%200.8%200.4%201.1l0.3-1.7H10.7z%22%3E%3C%2Fpath%3E%20%20%20%20%3C%2Fg%3E%3C%2Fsvg%3E"}),b.createElement("img",{className:sn.paypalCheckoutLogoPaypal,alt:"paypal",src:"data:image/svg+xml,%3Csvg%20width%3D%22100%22%20height%3D%2232%22%20viewBox%3D%220%200%20100%2032%22%20xmlns%3D%22http%3A%26%23x2F%3B%26%23x2F%3Bwww.w3.org%26%23x2F%3B2000%26%23x2F%3Bsvg%22%20preserveAspectRatio%3D%22xMinYMin%20meet%22%3E%3Cpath%20fill%3D%22%23ffffff%22%20d%3D%22M%2012%204.917%20L%204.2%204.917%20C%203.7%204.917%203.2%205.317%203.1%205.817%20L%200%2025.817%20C%20-0.1%2026.217%200.2%2026.517%200.6%2026.517%20L%204.3%2026.517%20C%204.8%2026.517%205.3%2026.117%205.4%2025.617%20L%206.2%2020.217%20C%206.3%2019.717%206.7%2019.317%207.3%2019.317%20L%209.8%2019.317%20C%2014.9%2019.317%2017.9%2016.817%2018.7%2011.917%20C%2019%209.817%2018.7%208.117%2017.7%206.917%20C%2016.6%205.617%2014.6%204.917%2012%204.917%20Z%20M%2012.9%2012.217%20C%2012.5%2015.017%2010.3%2015.017%208.3%2015.017%20L%207.1%2015.017%20L%207.9%209.817%20C%207.9%209.517%208.2%209.317%208.5%209.317%20L%209%209.317%20C%2010.4%209.317%2011.7%209.317%2012.4%2010.117%20C%2012.9%2010.517%2013.1%2011.217%2012.9%2012.217%20Z%22%3E%3C%2Fpath%3E%3Cpath%20fill%3D%22%23ffffff%22%20d%3D%22M%2035.2%2012.117%20L%2031.5%2012.117%20C%2031.2%2012.117%2030.9%2012.317%2030.9%2012.617%20L%2030.7%2013.617%20L%2030.4%2013.217%20C%2029.6%2012.017%2027.8%2011.617%2026%2011.617%20C%2021.9%2011.617%2018.4%2014.717%2017.7%2019.117%20C%2017.3%2021.317%2017.8%2023.417%2019.1%2024.817%20C%2020.2%2026.117%2021.9%2026.717%2023.8%2026.717%20C%2027.1%2026.717%2029%2024.617%2029%2024.617%20L%2028.8%2025.617%20C%2028.7%2026.017%2029%2026.417%2029.4%2026.417%20L%2032.8%2026.417%20C%2033.3%2026.417%2033.8%2026.017%2033.9%2025.517%20L%2035.9%2012.717%20C%2036%2012.517%2035.6%2012.117%2035.2%2012.117%20Z%20M%2030.1%2019.317%20C%2029.7%2021.417%2028.1%2022.917%2025.9%2022.917%20C%2024.8%2022.917%2024%2022.617%2023.4%2021.917%20C%2022.8%2021.217%2022.6%2020.317%2022.8%2019.317%20C%2023.1%2017.217%2024.9%2015.717%2027%2015.717%20C%2028.1%2015.717%2028.9%2016.117%2029.5%2016.717%20C%2030%2017.417%2030.2%2018.317%2030.1%2019.317%20Z%22%3E%3C%2Fpath%3E%3Cpath%20fill%3D%22%23ffffff%22%20d%3D%22M%2055.1%2012.117%20L%2051.4%2012.117%20C%2051%2012.117%2050.7%2012.317%2050.5%2012.617%20L%2045.3%2020.217%20L%2043.1%2012.917%20C%2043%2012.417%2042.5%2012.117%2042.1%2012.117%20L%2038.4%2012.117%20C%2038%2012.117%2037.6%2012.517%2037.8%2013.017%20L%2041.9%2025.117%20L%2038%2030.517%20C%2037.7%2030.917%2038%2031.517%2038.5%2031.517%20L%2042.2%2031.517%20C%2042.6%2031.517%2042.9%2031.317%2043.1%2031.017%20L%2055.6%2013.017%20C%2055.9%2012.717%2055.6%2012.117%2055.1%2012.117%20Z%22%3E%3C%2Fpath%3E%3Cpath%20fill%3D%22%23ffffff%22%20d%3D%22M%2067.5%204.917%20L%2059.7%204.917%20C%2059.2%204.917%2058.7%205.317%2058.6%205.817%20L%2055.5%2025.717%20C%2055.4%2026.117%2055.7%2026.417%2056.1%2026.417%20L%2060.1%2026.417%20C%2060.5%2026.417%2060.8%2026.117%2060.8%2025.817%20L%2061.7%2020.117%20C%2061.8%2019.617%2062.2%2019.217%2062.8%2019.217%20L%2065.3%2019.217%20C%2070.4%2019.217%2073.4%2016.717%2074.2%2011.817%20C%2074.5%209.717%2074.2%208.017%2073.2%206.817%20C%2072%205.617%2070.1%204.917%2067.5%204.917%20Z%20M%2068.4%2012.217%20C%2068%2015.017%2065.8%2015.017%2063.8%2015.017%20L%2062.6%2015.017%20L%2063.4%209.817%20C%2063.4%209.517%2063.7%209.317%2064%209.317%20L%2064.5%209.317%20C%2065.9%209.317%2067.2%209.317%2067.9%2010.117%20C%2068.4%2010.517%2068.5%2011.217%2068.4%2012.217%20Z%22%3E%3C%2Fpath%3E%3Cpath%20fill%3D%22%23ffffff%22%20d%3D%22M%2090.7%2012.117%20L%2087%2012.117%20C%2086.7%2012.117%2086.4%2012.317%2086.4%2012.617%20L%2086.2%2013.617%20L%2085.9%2013.217%20C%2085.1%2012.017%2083.3%2011.617%2081.5%2011.617%20C%2077.4%2011.617%2073.9%2014.717%2073.2%2019.117%20C%2072.8%2021.317%2073.3%2023.417%2074.6%2024.817%20C%2075.7%2026.117%2077.4%2026.717%2079.3%2026.717%20C%2082.6%2026.717%2084.5%2024.617%2084.5%2024.617%20L%2084.3%2025.617%20C%2084.2%2026.017%2084.5%2026.417%2084.9%2026.417%20L%2088.3%2026.417%20C%2088.8%2026.417%2089.3%2026.017%2089.4%2025.517%20L%2091.4%2012.717%20C%2091.4%2012.517%2091.1%2012.117%2090.7%2012.117%20Z%20M%2085.5%2019.317%20C%2085.1%2021.417%2083.5%2022.917%2081.3%2022.917%20C%2080.2%2022.917%2079.4%2022.617%2078.8%2021.917%20C%2078.2%2021.217%2078%2020.317%2078.2%2019.317%20C%2078.5%2017.217%2080.3%2015.717%2082.4%2015.717%20C%2083.5%2015.717%2084.3%2016.117%2084.9%2016.717%20C%2085.5%2017.417%2085.7%2018.317%2085.5%2019.317%20Z%22%3E%3C%2Fpath%3E%3Cpath%20fill%3D%22%23ffffff%22%20d%3D%22M%2095.1%205.417%20L%2091.9%2025.717%20C%2091.8%2026.117%2092.1%2026.417%2092.5%2026.417%20L%2095.7%2026.417%20C%2096.2%2026.417%2096.7%2026.017%2096.8%2025.517%20L%20100%205.617%20C%20100.1%205.217%2099.8%204.917%2099.4%204.917%20L%2095.8%204.917%20C%2095.4%204.917%2095.2%205.117%2095.1%205.417%20Z%22%3E%3C%2Fpath%3E%3C%2Fsvg%3E"})),b.createElement("p",{className:sn.paypalLoaderDescription},e.formatMessage(nn.paypalLoaderDescription)),b.createElement("div",null,b.createElement("div",{className:sn.paypalSpinner}))))};var ln="styles-module_benefitPage__BDWL-",cn="styles-module_contentContainer__OJHmQ",dn="styles-module_geekSquadLogo__WvUsv",un="styles-module_geekSquadSvg__asysw",mn="styles-module_benefits__IQZ7-",pn="styles-module_fallbackBenefit__ppMOb",hn="styles-module_benefitItemsLoader__LKUde";class Cn extends b.Component{constructor(){super(...arguments),this.renderBenefitsInfo=e=>b.createElement("div",null,b.createElement("h2",{"data-automation":"benefits-title"},e.title),b.createElement("ul",{className:mn,"data-automation":"benefits-list"},this.renderBenefitDescriptions(e.messages))),this.renderBenefitDescriptions=e=>e.map((e,t)=>b.createElement("li",{"data-automation":"benefit",key:`key${t}`}," ",e)),this.renderFallback=()=>b.createElement("div",{className:pn,"data-automation":"fallback-benefit"},this.props.fallbackMessage),this.LoadingDisplay=()=>b.createElement(b.Fragment,null,b.createElement("div",{className:hn,"data-automation":"benefit-item-loader"},b.createElement("h1",null,b.createElement(S.oYE.Title,{width:500})),b.createElement(S.oYE.Thumb,{width:50}),b.createElement(S.oYE.Title,{maxWidth:350}),b.createElement(S.oYE.Title,{maxWidth:350})))}componentDidMount(){this.props.retrieveBenefits()}render(){const{benefits:e,isLoadingBenefits:t,header:a}=this.props,s=e&&e[0],n=s&&s.title&&s.messages.length>0;return b.createElement("div",{className:ln,"data-automation":"benefits-page"},b.createElement("div",{className:cn},b.createElement(S.aNw,{loading:t,loadingDisplay:this.LoadingDisplay()},a,b.createElement("div",{className:dn},b.createElement(S.erd,{className:un,viewBox:"0 0 80 49"})),n?this.renderBenefitsInfo(s):this.renderFallback())))}}var gn=(0,k.defineMessages)({backBtn:{id:"components.BenefitPage.backBtn"},grpBenefitTitle:{id:"components.BenefitPage.GrpBenefit.Title"},grpFallbackBenefitMessage:{id:"components.BenefitPage.GrpBenefit.FallbackBenefitMessage"},grpFallbackBenefitMessageLine1:{id:"components.BenefitPage.GrpBenefit.FallbackBenefitMessageLine1"},grpFallbackBenefitMessageLine2:{id:"components.BenefitPage.GrpBenefit.FallbackBenefitMessageLine2"},grpFallbackBenefitMessageLine3:{id:"components.BenefitPage.GrpBenefit.FallbackBenefitMessageLine3"},grpFallbackBenefitMessageLine4:{id:"components.BenefitPage.GrpBenefit.FallbackBenefitMessageLine4"},gspBenefitTitle:{id:"components.BenefitPage.GspBenefit.Title"},gspFallbackBenefitMessage:{id:"components.BenefitPage.GspBenefit.FallbackBenefitMessage"}});const yn=e=>{let{viewBox:t="0 1 32 32",className:a="",color:s="white",isAriaHidden:n=!1}=e;return b.createElement(S.APc,{className:a,color:s,viewBox:t,isAriaHidden:n})};var fn="styles-module_basketIcon__em6i2",En=(0,k.defineMessages)({basketLabel:{defaultMessage:"Cart",description:"the label for the cart icon",id:"components.BasketIcon.label"},basketItem:{defaultMessage:"item",description:"the label for the cart item",id:"components.BasketIcon.item"},basketItems:{defaultMessage:"items",description:"the label for the cart items",id:"components.BasketIcon.items"}});class vn extends b.Component{constructor(e,t){super(e),this.handleViewCart=e=>{e.preventDefault(),this.props.onViewCart()},this.state={pulse:!1}}componentWillReceiveProps(e){0!==this.props.totalQuantity&&e.totalQuantity!==this.props.totalQuantity&&this.pulse()}render(){const e=this.state.pulse?" pulse":"";let t=this.props.intl.formatMessage(En.basketLabel);return this.props.totalQuantity&&(t+=" "+this.props.totalQuantity,this.props.totalQuantity>1?t+=" "+this.props.intl.formatMessage(En.basketItems):t+=" "+this.props.intl.formatMessage(En.basketItem)),b.createElement("div",null,b.createElement("a",{"data-automation":"x-basket",onClick:e=>this.handleViewCart(e),className:fn,href:"#",tabIndex:0,"aria-label":t},b.createElement(yn,{className:"icon"}),this.props.totalQuantity>0&&b.createElement("span",{className:"counter"+e,"aria-hidden":!0}," ",this.props.totalQuantity),this.props.showLabel&&b.createElement("span",{className:"label","aria-hidden":!0},b.createElement(k.FormattedMessage,Object.assign({},En.basketLabel)))))}pulse(){this.setState({pulse:!0}),clearTimeout(this.pulseTimeout),this.pulseTimeout=setTimeout(()=>{this.setState({pulse:!1})},1e3)}}const Pn=e=>{const t=(0,k.useIntl)();return b.createElement(vn,Object.assign({},e,{intl:t}))};var bn={toaster:"styles-module_toaster__wsyT8"},Sn=(0,k.defineMessages)({closeButton:{id:"components.CartIndicator.Toaster.closeButton"}});const kn=e=>{let{children:t,className:a="",isVisible:s,onClose:n}=e;const r=(0,k.useIntl)(),{formatMessage:i}=r;(0,b.useEffect)(()=>(document.addEventListener("keydown",o),document.addEventListener("popstate",l),()=>{document.removeEventListener("keydown",o),document.removeEventListener("popstate",l)}),[]);const o=e=>{"Escape"===e.key&&l()},l=e=>{null==e||e.preventDefault(),null==n||n()},c=`toasterContainer ${s?"visible":"hidden"} ${a}`;return b.createElement("div",{className:bn.toaster},b.createElement("div",{className:c,"data-testid":"confirmation-toaster-container"},b.createElement("div",{className:"bgFade",onClick:l}),b.createElement("section",{"aria-describedby":"add-to-cart-confirmation-desc","aria-labelledby":"add-to-cart-confirmation-label","aria-modal":"true",className:"toaster",role:"dialog"},b.createElement("button",{"aria-label":i(Sn.closeButton),className:"closeIcon",onClick:l},b.createElement(S.x8P,{viewBox:"0 0 32 32",color:"black",className:bn.close})),t)))};var In,On=(0,k.defineMessages)({addOfferToCartFailedSubText:{description:"Failed to add an offer to cart - subtext",id:"components.AddToCart.Confirmation.failure.addOfferToCart"},addToCartConfirmationFailure:{description:"Failed to add to cart title",id:"components.AddToCart.Confirmation.failure"},addToCartConfirmationFailureSubText:{description:"Failed to add to cart - subtext",id:"components.AddToCart.Confirmation.failure.subText"},addToCartConfirmationSuccess:{description:"Item added to cart confirmation",id:"components.AddToCart.Confirmation.success"},addToCartFailedChildLimit:{description:"Exceeding the household limit on child sku",id:"components.AddToCart.Confirmation.failure.childLimit"},addToCartFailedItemOutOfStock:{description:"Item is out of stock title",id:"components.AddToCart.Confirmation.failure.itemOutOfStock"},addToCartFailedItemOutOfStockSubText:{description:"Item is out of stock - subtext",id:"components.AddToCart.Confirmation.failure.itemOutOfStock.subText"},addToCartFailedLimit:{description:"Exceeding the household limit",id:"components.AddToCart.Confirmation.failureLimit"},addToCartFailedParentLimit:{description:"Exceeding the household limit on parent sku",id:"components.AddToCart.Confirmation.failure.parentLimit"},continueShopping:{description:"Continue Shopping",id:"components.AddToCart.continueShopping"},viewCart:{description:"View Cart",id:"components.AddToCart.viewCart"}});!function(e){e.GeneralError="1003",e.ParentOrderLimitExceeded="1010",e.ChildOrderLimitExceeded="1011",e.ItemOutOfStock="1099"}(In||(In={}));const _n=new Map([[In.GeneralError,{subject:On.addToCartConfirmationFailure,text:On.addOfferToCartFailedSubText}],[In.ParentOrderLimitExceeded,{subject:On.addToCartFailedLimit,text:On.addToCartFailedParentLimit}],[In.ChildOrderLimitExceeded,{subject:On.addToCartFailedLimit,text:On.addToCartFailedChildLimit}],[In.ItemOutOfStock,{subject:On.addToCartFailedItemOutOfStock,text:On.addToCartFailedItemOutOfStockSubText}]]);var Tn="styles-module_confirmation__3uxtI",Ln="styles-module_continueShopping__CBF2a",Nn="styles-module_viewCart__HDMr2";const An=e=>{let{apiStatusCode:t,onClose:a,onViewCart:s,show:n,status:r}=e;const i=(0,k.useIntl)(),{formatMessage:o}=i,l=r===u.FAILED?"failed":"success";return b.createElement("div",{className:Tn},b.createElement(S.V9e,{targetSelector:"#cartIcon",activeClassName:"fixed"},b.createElement(D(),{active:n},b.createElement("div",null,b.createElement(kn,{className:l,isVisible:n,onClose:a},b.createElement("div",{className:"confirmation"},r===u.ADDED&&b.createElement("div",null,b.createElement("h2",{id:"add-to-cart-confirmation-label"},o(On.addToCartConfirmationSuccess))),r===u.FAILED&&(()=>{const e=_n.get(t),a={subject:On.addToCartConfirmationFailure,text:On.addToCartConfirmationFailureSubText},s=e||a;return b.createElement("div",null,b.createElement("h2",{id:"add-to-cart-confirmation-label"},b.createElement(S.Pz_,null),o(s.subject)),b.createElement("p",{id:"add-to-cart-confirmation-desc"},o(s.text)))})(),r===u.ADDED&&b.createElement(b.Fragment,null,b.createElement(S.zxk,{appearance:"secondary",className:Ln,onClick:a,shouldFitContainer:!0,extraAttrs:{"data-automation":"continue-shopping"}},o(On.continueShopping)),b.createElement(S.zxk,{className:Nn,onClick:()=>{a(),s()},shouldFitContainer:!0,extraAttrs:{"data-automation":"view-cart-confirmation"}},o(On.viewCart)))))))))};var Mn="styles-module_cartIndicator__dHGVE";class Dn extends b.Component{constructor(){super(...arguments),this.handleClose=()=>{this.props.onClose&&this.props.onClose()},this.handleViewCart=()=>{this.props.onViewCart()}}componentDidMount(){this.props.onMount&&this.props.onMount()}render(){return b.createElement("div",{className:`${Mn} ${this.props.className}`,id:"cartIcon"},b.createElement(Pn,{totalQuantity:this.props.orderNumber?0:this.props.totalQuantity,onViewCart:this.handleViewCart,showLabel:this.props.showLabel}),this.props.showConfirmation&&b.createElement(An,{apiStatusCode:this.props.apiStatusCode,show:this.props.showConfirmation,onClose:this.handleClose,onViewCart:this.handleViewCart,status:this.props.status}))}}var Rn="styles-module_manufacturersWarrantyPage__-LXFZ",wn="styles-module_contentContainer__V4BjN",Bn=(0,k.defineMessages)({days:{id:"components.manufacturerWarrantyPage.days"},fallback:{id:"components.manufacturerWarrantyPage.fallback"},header:{id:"components.manufacturerWarrantyPage.header"},labourLabel:{id:"components.manufacturerWarrantyPage.labourLabel"},noWarranty:{id:"components.manufacturerWarrantyPage.noWarranty"},partsLabel:{id:"components.manufacturerWarrantyPage.partsLabel"},years:{id:"components.manufacturerWarrantyPage.years"}});class Fn extends b.Component{constructor(){super(...arguments),this.LoadingDisplay=()=>b.createElement(b.Fragment,null,b.createElement(S.oYE.Title,{maxWidth:200}),b.createElement(S.oYE.Title,{maxWidth:200})),this.renderPartsAndLabour=()=>{const{intl:{formatMessage:e}}=this.props;return this.hasManufacturerWarranty()?b.createElement("div",null,this.renderParts(),this.renderLabour()):e(Bn.noWarranty)},this.hasManufacturerWarranty=()=>{const{manufacturerWarranty:{labourInDays:e,partsInDays:t}}=this.props;return e>0||t>0},this.renderLabour=()=>{const{intl:{formatMessage:e},manufacturerWarranty:{labourInDays:t}}=this.props;return t>0?b.createElement("div",null,`${e(Bn.labourLabel)} ${this.generateDurationCopy(t)}`):null},this.renderParts=()=>{const{intl:{formatMessage:e},manufacturerWarranty:{partsInDays:t}}=this.props;return t>0?b.createElement("div",null,`${e(Bn.partsLabel)} ${this.generateDurationCopy(t)}`):null},this.generateDurationCopy=e=>{const{intl:{formatMessage:t}}=this.props;if(e>=365){const a=this.convertDaysToYears(e);return t(Bn.years,{numOfYears:a})}return t(Bn.days,{numOfDays:e})}}componentDidMount(){return G(this,void 0,void 0,function*(){this.props.retrieveManufacturerWarranty()})}render(){const{intl:{formatMessage:e},hasFetchingManufacturerWarrantyFailed:t,isFetchingManufacturerWarranty:a}=this.props;return b.createElement("div",{className:Rn,"data-automation":"manufacturers-warranty-page"},b.createElement("div",{className:wn},b.createElement("h1",null,e(Bn.header)),b.createElement(S.aNw,{loading:a,loadingDisplay:this.LoadingDisplay()},t?b.createElement("div",null,e(Bn.fallback)):this.renderPartsAndLabour())))}convertDaysToYears(e){return Math.round(e/365*10)/10}}b.Component;var xn;!function(e){e.Account="/signup/account",e.Plans="/signup/plans",e.Payment="/signup/payment",e.Confirmation="/signup/confirmation"}(xn||(xn={}));(0,k.defineMessages)({account:{id:"libs.signup.header.Account"},payment:{id:"libs.signup.header.Payment"},plans:{id:"libs.signup.header.Plans"},stepOneLabel:{id:"libs.signup.header.stepOneLabel"},stepTwoLabel:{id:"libs.signup.header.stepTwoLabel"},stepThreeLabel:{id:"libs.signup.header.stepThreeLabel"},stepOneLabelCurrent:{id:"libs.signup.header.stepOneLabelCurrent"},stepOneLabelPassed:{id:"libs.signup.header.stepOneLabelPassed"},stepTwoLabelCurrent:{id:"libs.signup.header.stepTwoLabelCurrent"},stepTwoLabelNext:{id:"libs.signup.header.stepTwoLabelNext"},stepTwoLabelPassed:{id:"libs.signup.header.stepTwoLabelPassed"},stepThreeLabelCurrent:{id:"libs.signup.header.stepThreeLabelCurrent"},stepThreeLabelNext:{id:"libs.signup.header.stepThreeLabelNext"}});(0,k.defineMessages)({fairstoneCreditProvidedBy:{id:"components.BbycaFinanceHeader.fairstoneCreditProvidedBy"},financeLogoAriaLabel:{id:"components.BbycaFinanceHeader.financeLogoAriaLabel"}});var jn={container:"styles-module_container__-i1RM",title:"styles-module_title__9jtoe",price:"styles-module_price__ib8p7",sale:"styles-module_sale__dEYZN",salePrice:"styles-module_salePrice__GuXSo"},qn=(0,k.defineMessages)({promotionalDiscount:{id:"promotionalDiscount.promotionalDiscount"}});const Un=e=>{let{amount:t}=e;const a=(0,k.useIntl)();return b.createElement("div",{className:jn.container},b.createElement("div",{className:jn.title},b.createElement(k.FormattedMessage,Object.assign({},qn.promotionalDiscount))),b.createElement("div",{className:[jn.price,jn.sale].join(" ")},b.createElement("div",{className:jn.salePrice},"-",xe(t,a.locale))))};var Wn="styles-module_title__yXEfn",Hn="styles-module_container__1lDFS";const Gn=e=>t=>({id:`${e}.${t}`}),Vn=Gn("components.WarrantyBenefitsMessage");var $n=(0,k.defineMessages)({geekSquadProtectionLink:Vn("geekSquadProtectionLink"),prpBody:Vn("prpBody"),prpTitle:Vn("prpTitle"),pspBody:Vn("pspBody"),pspTitle:Vn("pspTitle"),termsLinkText:Vn("termsLinkText")});const Yn={[y.PSP]:{body:$n.pspBody,title:$n.pspTitle},[y.PRP]:{body:$n.prpBody,title:$n.prpTitle}},Qn=[y.PSP,y.PRP],Zn=e=>{let{warrantyType:t,content:a,warrantyTermsAndConditionUrl:s,className:n=""}=e;const r=(0,k.useIntl)();if(!Qn.includes(t))return null;const{title:i,body:o}=Yn[t];let l=b.createElement(k.FormattedMessage,Object.assign({},i,{values:{obsOneFirst:b.createElement("sup",null,"1")}})),c=b.createElement(k.FormattedMessage,Object.assign({},o,{values:{geekSquadProtectionLink:b.createElement("a",{href:r.formatMessage($n.geekSquadProtectionLink),target:"_blank"},"geeksquad.ca/protection"),link:b.createElement("a",{href:s,target:"_blank"},r.formatMessage($n.termsLinkText)),obsOneContent:b.createElement(b.Fragment,null,b.createElement("br",null),b.createElement("br",null),b.createElement("sup",null,"1")),obsOneFirst:b.createElement("sup",null,"1")}}));const d=a&&a.body&&!a.title;return a&&a.body&&(l=a.title,c=b.createElement("div",{dangerouslySetInnerHTML:{__html:a.body}})),b.createElement("div",{className:`${Hn} ${n}`},!d&&b.createElement("p",{"data-testid":"warranty-benefits-message-title",className:Wn},l),c&&b.createElement("div",{"data-testid":"warranty-benefits-message-body"},c))};var zn="styles-module_optionBox__Oc9Gu",Kn="styles-module_price__TO-8-",Jn="styles-module_text__0fQYx",Xn="styles-module_flexCenter__wneLu",er="styles-module_isSelected__1HaZ1",tr="styles-module_disabled__rzHK8",ar="styles-module_srOnly__XIvwD";const sr=Gn("components.optionBox");var nr=(0,k.defineMessages)({notSelected:sr("notSelected"),selected:sr("selected")});const rr=e=>{let{id:t,className:a="",dataAutomation:s,isSelected:n,onClick:r,onKeyDown:i,children:o,disabled:l}=e;const c=[zn,a];return l?c.push(tr):c.push({[er]:n}),b.createElement("div",{id:t,className:fs(c),"data-automation":`${s||""}${n?" is-selected":""}`,onClick:e=>{l?e.preventDefault():null==r||r(e)},onKeyDown:e=>{if("Enter"===e.key||" "===e.key){if(e.preventDefault(),l)return;null==i||i(e)}},role:"button",tabIndex:0},b.createElement("span",{className:ar},n?b.createElement(k.FormattedMessage,Object.assign({},nr.selected)):b.createElement(k.FormattedMessage,Object.assign({},nr.notSelected))),o)},ir=e=>{let{id:t,className:a="",dataAutomation:s="",isSelected:n,onClick:r,onKeyDown:i,price:o,text:l,disabled:c=!1}=e;return b.createElement(rr,{id:t,className:a,dataAutomation:s,isSelected:n,onClick:r,onKeyDown:i,disabled:c},o?b.createElement(b.Fragment,null,b.createElement("p",{"data-automation":"option-box-text",className:Jn},l),b.createElement("p",{"data-automation":"option-box-price",className:Kn},o)):b.createElement("p",{"data-automation":"option-box-text",className:fs([Jn,Xn])},l))};var or=(0,k.defineMessages)({price:{id:"components.price"}});const lr=e=>{var t,a;const{value:s}=e,n=(0,k.useIntl)(),r=null!==(a=null===(t=null==n?void 0:n.formatNumber)||void 0===t?void 0:t.call(n,s,{maximumFractionDigits:2,minimumFractionDigits:2}))&&void 0!==a?a:s;return b.createElement(k.FormattedMessage,Object.assign({},or.price,{values:{price:r}}))};var cr="styles-module_warrantyBoxContainer__rknh0",dr="styles-module_warrantyConditionsText__Q2TrK",ur="styles-module_srOnly__KG7Ps";const mr=Gn("components.warrantyOptions");var pr=(0,k.defineMessages)({noPlan:mr("noPlan"),warrantyConditionsLink:mr("warrantyConditionsLink"),warrantyConditionsLinkText:mr("warrantyConditionsLinkText"),warrantyOptionsDescription:mr("warrantyOptionsDescription"),year:mr("year"),years:mr("years")});const hr=()=>b.createElement("div",{className:cr},b.createElement(S.oYE.Button,null));hr.displayName="WarrantyOptionsLoader";const Cr=(e,t)=>e.termMonths-t.termMonths,gr="WARRANTY_NO_PLAN_",yr="WARRANTY_PLAN_",fr=e=>{let{className:t="",initialOption:a,isLoading:s=!1,onOptionSelected:n,options:r=[],parentSku:i,alwaysShowWarrantyTermsAndConditions:o=!1,warrantyTermsAndConditionUrl:l,trackEngagements:c=!1,disabled:d,handleTracking:u}=e;const[m,p]=b.useState(),[h,C]=b.useState(null);b.useEffect(()=>{p(a)},[a]),b.useEffect(()=>{!s&&h&&(setTimeout(()=>{var e;null===(e=document.getElementById(h))||void 0===e||e.focus()},500),C(null))},[h,s]);const g=e=>{d||(e&&c&&(e=>{if(u&&"function"==typeof u)u(e);else{const{title:t,regularPrice:a}=e,s={111:`Warranty:Click:${t} ${a}`};R.N8.customLink("warantyengagement_c",{eVar:s,event:{2:""}})}})(e),p(e),n&&"function"==typeof n&&n(i,e))},y=(e,t)=>{t||g(e)},f=e=>{let{event:t,warranty:a,id:s,isSelected:n}=e;y(a,n),"Enter"!==t.key&&" "!==t.key||(setTimeout(()=>{var e;null===(e=document.getElementById(s))||void 0===e||e.focus()},500),C(s))},E=r.sort(Cr);return b.createElement(S.aNw,{loading:s,loadingDisplay:b.createElement(hr,null)},b.createElement("span",{className:ur,id:"warranty-options-description"},b.createElement(k.FormattedMessage,Object.assign({},pr.warrantyOptionsDescription))),b.createElement("div",{className:`${cr} ${t}`},b.createElement("div",{"aria-labelledby":"warranty-options-description","data-automation":"geeksquad-warranty-plans-container",role:"group"},b.createElement(ir,{id:gr+i,dataAutomation:"geeksquad-warranty-no-plans",isSelected:!m,onClick:()=>y(null,!m),onKeyDown:e=>f({event:e,warranty:null,id:gr+i,isSelected:!m}),price:null,disabled:d,text:b.createElement(k.FormattedMessage,Object.assign({},pr.noPlan))}),E.map((e,t)=>{const a=e.termMonths/12,s=m&&m.sku===e.sku||!1;return b.createElement(ir,{id:yr+t+`_${e.sku}`,key:e.sku,disabled:d,onClick:()=>y(e,s),onKeyDown:a=>f({event:a,warranty:e,id:yr+t+`_${e.sku}`,isSelected:s}),isSelected:s,dataAutomation:`geeksquad-warranty-${e.termMonths}`,text:b.createElement(k.FormattedPlural,{one:b.createElement(k.FormattedMessage,Object.assign({},pr.year,{values:{year:a}})),other:b.createElement(k.FormattedMessage,Object.assign({},pr.years,{values:{year:a}})),value:a}),price:b.createElement(lr,{value:e.regularPrice})})})),m||o?b.createElement("p",{className:dr,"data-automation":"warranty-options-legal-copy"},b.createElement(k.FormattedMessage,Object.assign({},pr.warrantyConditionsLink,{values:{link:b.createElement(S.rUS,{href:l},b.createElement(k.FormattedMessage,Object.assign({},pr.warrantyConditionsLinkText)))}}))):null))};fr.displayName="WarrantyOptions";var Er={planWrapper:"styles-module_planWrapper__fI4Fr",geekSquadLogo:"styles-module_geekSquadLogo__SwVjs",benefitsWrapper:"styles-module_benefitsWrapper__rgvKq",dialog:"styles-module_dialog__Y4FU7",dialogContainer:"styles-module_dialogContainer__DizxX",dialogBody:"styles-module_dialogBody__hGRpM",dialogTitle:"styles-module_dialogTitle__rTbO8",button:"styles-module_button__jK7PH",continueShopping:"styles-module_continueShopping__GdcYg",messageContainer:"styles-module_messageContainer__-P9KJ"};const vr=Gn("components.warrantyBenefits");var Pr=(0,k.defineMessages)({benefits:vr("benefits"),choosePlan:vr("choosePlan"),okay:vr("okay")});Zn.displayName="WarrantyBenefitsMessage";const br=e=>{let{className:t,onToggleBenefitsDialog:a,warrantyBenefitsMessage:s,warrantyOptions:n,warrantyTermsAndConditionUrl:r,warrantyType:i}=e;const[o,l]=b.useState(!1),c=()=>l(!1);return b.createElement("div",{className:fs([Er.warrantyMessaging,t])},b.createElement("span",{className:Er.benefitsWrapper},b.createElement(S.rUS,{onClick:()=>{l(!o),a()},chevronType:"right",targetSelf:!0,"data-automation":"geeksquad-benefits-link"},b.createElement(k.FormattedMessage,Object.assign({},Pr.benefits)))),o?b.createElement(S.u_l,{isFocusTrap:!0,visible:!0,onClose:c},b.createElement("div",{className:Er.messageContainer},b.createElement(Zn,{warrantyTermsAndConditionUrl:r,warrantyType:i,content:(()=>{if(null==s?void 0:s.body)return{body:s.body}})()}),b.createElement("h4",null,b.createElement("strong",null,b.createElement(k.FormattedMessage,Object.assign({},Pr.choosePlan)))),b.createElement(fr,Object.assign({},n,{alwaysShowWarrantyTermsAndConditions:!0}))),b.createElement(S.zxk,{className:fs([Er.button,Er.continueShopping]),onClick:c,"data-automation":"warranty-benefits-dialog-button"},b.createElement(k.FormattedMessage,Object.assign({},Pr.okay)))):null)},Sr=e=>{let{styleClass:t="",isBenefitsTextOpen:a=!1,seeBenefitTitle:s="See benefits",benefitsMessage:n,benefitsFetched:r=!1,benefitMessageBoxStyleClass:i="",warrantyType:o,warrantyTermsAndConditionUrl:l,updateBenefitsFetched:c,parentSku:d,fetchWarrantyBenefits:u,trackEngagements:m=!1,trackExpand:p=()=>{}}=e;const[h,C]=b.useState(a),[g,y]=b.useState(a);return b.useEffect(()=>{a&&u(d).then(()=>c(!0))},[]),b.createElement("section",{className:t},b.createElement(S.rUS,{ariaExpanded:h,onClick:()=>{n||g||u(d).then(()=>c(!0)),h||g||(m&&p(),y(!0)),C(!h)},targetSelf:!0,chevronType:h?"up":"down"},s),h&&(r?b.createElement(Zn,{content:{body:null==n?void 0:n.body},warrantyType:o,className:i,warrantyTermsAndConditionUrl:l}):b.createElement("div",{style:{marginTop:"10px"}},b.createElement(S.oYE.Line,{maxWidth:200}),b.createElement(S.oYE.Line,{maxWidth:600}),b.createElement(S.oYE.Line,{maxWidth:500}))))},kr=e=>{let{accordionSettings:t,benefitsMessage:a,isShowBenefitInModal:s=!1,onToggleBenefitsDialog:n,options:r,warrantyOptions:i,warrantyTermsAndConditionUrl:o}=e;var l;const[c,d]=b.useState(!!a),u=null===(l=null==r?void 0:r[0])||void 0===l?void 0:l.type;return b.createElement(b.Fragment,null,s?b.createElement(br,{onToggleBenefitsDialog:n,warrantyBenefitsMessage:a,warrantyOptions:i,warrantyTermsAndConditionUrl:o,warrantyType:u}):b.createElement(Sr,Object.assign({},t,{benefitsMessage:a,benefitsFetched:c,warrantyType:u,warrantyTermsAndConditionUrl:o,updateBenefitsFetched:e=>{d(e)}})))};var Ir="styles-module_container__59WBl",Or="styles-module_priceContainer__1Y7-a",_r="styles-module_price__-kXRM",Tr="styles-module_blockCap__PLIGp",Lr="styles-module_cap__eCr0S",Nr="styles-module_warrantyOptionsTitle__NV8Hu",Ar="styles-module_warrantyOptions__6-ujl",Mr="styles-module_warrantyBenefitsContainer__PN4xm",Dr="styles-module_warrantyBenefits__5PnD1",Rr="styles-module_logo__TDmPb",wr="styles-module_titleContainer__Hm9pe",Br="styles-module_flexColumn__EKc1Q",Fr="styles-module_subHeader__hZoak";const xr=Gn("components.BestBuyProtectionPlan");var jr=(0,k.defineMessages)({Choose:xr("Choose"),HeaderAriaLabel:xr("HeaderAriaLabel"),SeeBenefits:xr("SeeBenefits"),Subtitle:xr("Subtitle"),Title:xr("Title")});var qr="styles-module_productImagePlaceHolderContainer__xoA-N",Ur="styles-module_productImagePlaceHolderIcon__1n56d";const Wr=e=>{const t=b.createElement("div",{className:qr,style:{height:e.height||"100%",maxHeight:e.maxHeight,maxWidth:e.maxWidth,width:e.width||"100%"}},b.createElement("svg",{viewBox:"0 0 240 170",style:{height:"80%",width:"60%"},className:Ur,"data-testid":"placeholder-svg"},b.createElement("title",null,e.title),b.createElement("path",{fill:"#E0E0E0",fillRule:"evenodd",d:"M263.941172,86.3376118 C264.205224,83.6387027 263.391776,81.0077976 261.662667,78.9251748 C259.937816,76.8383017 257.501732,75.5504758 254.810114,75.2954608 L86.3667824,59.051003 C86.2092035,59.034002 85.5192635,59 85.3659434,59 C83.0916966,59 80.8728152,59.7607949 79.147965,61.1251253 L33.3010216,96.584966 C31.0863991,98.2850662 29.6596712,100.856468 29.3913612,103.627631 L24.0549729,157.631315 C23.7653684,160.372727 24.6299229,163.148141 26.4143975,165.235014 L64.3312891,209.803141 C66.0603982,211.826261 68.4709295,213.084335 71.1497709,213.33935 L240.389515,228.967521 C240.542835,228.984522 241.202962,229.010024 241.360541,229.010024 C246.637305,229.010024 250.994149,225.05304 251.483921,219.803981 L263.941172,86.3376118 Z M243.634469,94.3236824 L233.042612,207.635363 L78.0105228,193.312019 L45.5748217,155.187271 L50.0764677,109.777594 L89.2795439,79.4393048 L243.634469,94.3236824 Z",opacity:".502",transform:"translate(-24 -59)"}))),{height:a,maxHeight:s,width:n,maxWidth:r,title:i}=e,o=H(e,["height","maxHeight","width","maxWidth","title"]),l=b.createElement("div",null,b.createElement("img",Object.assign({itemProp:"image",onError:function(){d(t)},onLoad:function(){d(l)},style:{height:a,maxHeight:s,maxWidth:r,width:n},alt:i,"data-testid":"placeholder-image"},o))),[c,d]=b.useState(l);return e.src&&!e.src.includes("images/common/pictures/noimage")?c:t};var Hr={servicesContainer:"styles-module_servicesContainer__OjYk8",serviceContainer:"styles-module_serviceContainer__GOrUz",serviceAdded:"styles-module_serviceAdded__Rtg3h",serviceAddedAnimation:"styles-module_serviceAddedAnimation__4psA9",serviceRemoved:"styles-module_serviceRemoved__B6vR0",serviceRemovedAnimation:"styles-module_serviceRemovedAnimation__demTw",serviceTitle:"styles-module_serviceTitle__I7Znd",serviceDescription:"styles-module_serviceDescription__IqFo-",servicePromotion:"styles-module_servicePromotion__B7k8G",serviceIcon:"styles-module_serviceIcon__-bLV9",haulAwayIcon:"styles-module_haulAwayIcon__mYmps",serviceContent:"styles-module_serviceContent__r-Uat",benefitsContainer:"styles-module_benefitsContainer__WrZpr",benefits:"styles-module_benefits__aQBEq",content:"styles-module_content__aBB3z",open:"styles-module_open__HQJyk",selectable:"styles-module_selectable__oEKkb",selectableSection:"styles-module_selectableSection__7Aiq-",addOrRemove:"styles-module_addOrRemove__F2heJ",shortTitle:"styles-module_shortTitle__0Tnqu",type:"styles-module_type__jQhaQ",selectionDetail:"styles-module_selectionDetail__HfWsD",details:"styles-module_details__7bpCy",price:"styles-module_price__Xzqmy",sale:"styles-module_sale__OL8f1",salePrice:"styles-module_salePrice__-0gjJ",selectContainer:"styles-module_selectContainer__-ejaJ",addOrRemoveMode:"styles-module_addOrRemoveMode__w5KA8"},Gr=(0,k.defineMessages)({aboutThisService:{id:"productServices.aboutThisService"},addHaulAwayService:{id:"productServices.addHaulAwayService"},addService:{id:"productServices.addServiceCTA"},haulAwayBenefits:{id:"productServices.haulAwayBenefits"},haulAwayDescription:{id:"productServices.haulAwayDescription"},haulAwayShortTitle:{id:"productServices.haulAwayShortTitle"},haulAwayTitle:{id:"productServices.haulAwayTitle"},haulAwayType:{id:"productServices.haulAwayType"},promotionalDiscount:{id:"productServices.promotionalDiscount"},removeService:{id:"productServices.removeService"},save:{id:"productServices.save"},seeBenefits:{id:"productServices.seeBenefits"},serviceSelection:{id:"productServices.serviceSelection"},takeMyOldAppliance:{id:"productServices.takeMyOldAppliance"},type:{id:"productServices.type"}});const Vr=e=>{let{icon:t,title:a,description:s,selectable:n,price:r,salePrice:i,sku:o,benefits:l,benefitsLabel:c=b.createElement(k.FormattedMessage,Object.assign({},Gr.aboutThisService)),hideBenefits:d=!0,selected:u=!1,selectionLabel:m,addOrRemoveMode:p=!1,hideTitle:h=!1,hideDescription:C=!1,loading:g=!1,disabled:y=!1,onChange:f,promotionalDiscount:E}=e;const v=(0,k.useIntl)(),P=m||v.formatMessage(Object.assign({},Gr.serviceSelection)),[I,O]=b.useState(!1),[_,T]=b.useState(u),L=b.useRef(_);b.useEffect(()=>{L.current=_},[_]),b.useEffect(()=>{u!==L.current&&T(u)},[u]);const N="string"==typeof t?b.createElement(Wr,{src:t,title:"string"==typeof a?a:void 0}):t,A=!!i&&i<r;return b.createElement(S.aNw,{loading:g,loadingDisplay:b.createElement(S.oYE.ProductTile,null)},b.createElement("div",{className:[Hr.serviceContainer,n&&Hr.selectable,_!==u&&p&&_&&Hr.serviceAdded,L.current!==_&&p&&L.current&&Hr.serviceRemoved].filter(Boolean).join(" ")},t&&!n&&b.createElement("div",{className:Hr.serviceIcon},N),(!h&&!C&&!p||p)&&b.createElement("div",{className:Hr.serviceContent},!h&&a&&b.createElement("h5",{className:Hr.serviceTitle},b.createElement("strong",null,a)),!C&&s&&b.createElement("div",{className:Hr.serviceDescription},"string"==typeof s?b.createElement("div",{dangerouslySetInnerHTML:{__html:s}}):s)),l&&!d&&b.createElement("div",{className:Hr.benefitsContainer},b.createElement(S.rUS,{onClick:e=>{e.preventDefault(),O(e=>!e)},ariaExpanded:I,chevronType:I?"up":"down"},c),I&&b.createElement("div",{className:[Hr.benefits,I&&Hr.open].filter(Boolean).join(" ")},b.createElement("div",{className:Hr.content},"string"==typeof l?b.createElement("div",{dangerouslySetInnerHTML:{__html:l}}):l))),n&&b.createElement(b.Fragment,null,b.createElement("div",{className:[Hr.selectContainer,p&&Hr.addOrRemoveMode].filter(Boolean).join(" ")},p?b.createElement("div",{className:Hr.serviceDescription},a):b.createElement(S.XZJ,{label:P,name:o,disabled:y,value:_?"checked":"",handleAsyncChange:()=>{T(e=>(null==f||f(!e,o),!e))}}),b.createElement("div",{className:[Hr.price,A&&Hr.sale].filter(Boolean).join(" ")},A&&b.createElement("div",{className:Hr.salePrice},b.createElement(k.FormattedMessage,Object.assign({},Gr.save)),xe(r-i||0,v.locale)),b.createElement("div",null,xe(A?i:r||0,v.locale)))),E&&b.createElement(Un,{amount:E}))))};var $r;!function(e){e.medium="medium",e.large="large"}($r||($r={}));(0,k.defineMessages)({oneReviewCount:{id:"components.StarRate.oneReviewCount"},reviews:{id:"components.StarRate.reviews"},reviewsCount:{id:"components.StarRate.reviewsCount"}});(0,k.defineMessages)({addToCart:{id:"productsListItem.addToCart"}});const Yr=e=>{let{isInStorePickup:t,estimated:a,totalEHF:s,totalProductPrice:n,totalPurchasePrice:r,totalShippingPrice:i,totalTaxes:o,ehfShowStatus:l=m.SHOW,discountColorVariant:c,discounts:d}=e;const u=(0,k.useIntl)(),p=b.useMemo(()=>Object.assign(Object.assign({},Ve),a?$e:Ye),[a]),{formatMessage:h}=u;return b.createElement(b.Fragment,null,b.createElement("h2",{className:He.costSumSectionTitle},h(p.orderSummary)),b.createElement("div",{className:N()(He.costSumSection,He.container)},b.createElement(Ze,{totalEHF:s,totalProductPrice:n,ehfShowStatus:l,translations:p,intl:u}),b.createElement(ze,{discounts:d,discountColorVariant:c,translations:p,intl:u}),b.createElement(Ke,{translations:p,totalShippingPrice:i,isInStorePickup:Boolean(t),discountColorVariant:c,intl:u}),b.createElement(Je,{totalEHF:s,ehfShowStatus:l,translations:p,intl:u}),b.createElement(et,{intl:u,totalTaxes:o}),b.createElement(S.izJ,{className:He.subtotalDivider}),b.createElement(st,{isInStorePickup:Boolean(t),translations:p,intl:u,totalPurchasePrice:r}),b.createElement(S.izJ,{className:He.subtotalDivider})))},Qr=e=>{var{className:t=""}=e,a=H(e,["className"]);return b.createElement("div",{className:`${t} ${de}`},b.createElement(ce,Object.assign({},a)))},Zr=Dn,zr=e=>{let{cart:t,checkoutUri:a,analyticsPostalCodeUpdated:s,cieServiceUrl:n,cleanUp:r,dismissCartError:i,getBasketPage:o,isLightweightBasketEnabled:l,isRpuEnabled:c,lang:d,postalCode:m,regionCode:p,displayEhfRegions:h,reserveInStore:C,isQueueItEnabled:g,features:y,promotionalBadges:f,isCsr:E,removeItem:v,removeChildItem:P,updateItemQuantity:I,getProductPath:_,onGoToPath:T,goToBenefitsPage:L,goToManufacturersWarrantyPage:N,goToRequiredProducts:A,changePostalCode:M}=e;const D=(0,k.useIntl)(),[R,w]=b.useState(!1);b.useEffect(()=>{G(void 0,void 0,void 0,function*(){try{yield o(),w(!0)}catch(e){w(!0)}})},[o]),b.useEffect(()=>()=>{r&&r()},[r]);const B=e=>{s(e),M&&M(e)},F=()=>!t.totalQuantity,x=(()=>{const e=O.parse(a);let t=`/${d.toLowerCase()}/shipping`;return p&&m&&(t=t.concat(`/${p}/${m}`)),e.hash=t,g&&(e.query={qit:"1"}),O.format(e)})(),j=t.status===u.PROCESSING||t.status===u.BASKET_PROCESSING;return b.createElement(S.aNw,{loading:!R,loadingDisplay:b.createElement("div",{className:Xs},b.createElement(S.TKf,{width:"40px",containerClass:"spinner"}))},(()=>{if(t&&t.shipments){return t.shipments.reduce((e,t)=>[...e,...t.lineItems],[]).filter(e=>!0!==e.removed).length<1}return!0})()?b.createElement(en,{cart:t,lang:d,onGoToPath:T}):b.createElement("section",{className:Js},b.createElement("main",null,(()=>{if(location.search&&location.search.indexOf("paypalError=true")>-1)return b.createElement("div",{className:"cart-items"},b.createElement(S.ffo,{message:D.formatMessage(zs.paypalError)}))})(),b.createElement("form",{action:"/",id:"cart",method:"post",name:"basket-form",onSubmit:e=>e.preventDefault()},(e=>{if(!F())return b.createElement("div",{className:"cart-summary"},b.createElement("section",{className:"total-summary"},b.createElement("table",null,b.createElement("tbody",null,b.createElement("tr",null,b.createElement("th",null,D.formatMessage(zs.estimatedTotal),":"),b.createElement("td",null,b.createElement(Ks,{quantity:t.totalQuantity}),xe(t.totalPurchasePrice,D.locale))))),b.createElement(tn,{checkoutUri:e,cieServiceUrl:n,lang:d,isCsr:E})))})(x),b.createElement("div",{className:"cart-items"},b.createElement(mt,{items:t.orderLevelDiscounts}),b.createElement("section",{className:"shipment-containers"},t&&t.shipments&&t.shipments.map(e=>b.createElement(Zs,Object.assign({key:"sellerId"+e.seller.id,loading:j},e,{removeItem:v,regionCode:p,removeChildItem:P,updateItemQuantity:I,reserveInStore:C,availabilities:t.availabilities,isRpuEnabled:c,isLightweightBasketEnabled:l,displayEhfRegions:h,getProductPath:_,onGoToPath:T,features:y,errorType:t.errorType,goToBenefitsPage:L,goToManufacturersWarrantyPage:N,goToRequiredProducts:A,promotionalBadges:f,isCsr:E}))))))),b.createElement("section",{className:"basket-aside"},(()=>{if(!F())return;const{header:e,body:a}=(e=>{let t,a;const s=We(p);return e===ct.EverythingOutOfStockInRegion?(t=D.formatMessage(zs.everythingOutOfStockInRegion,{region:s}),a=D.formatMessage(zs.everythingOutOfStockInRegionBody)):e===ct.EverythingRegionRestricted?(t=D.formatMessage(zs.everythingRegionRestricted,{region:s}),a=D.formatMessage(zs.everythingRegionRestrictedBody)):e===ct.EverythingSoldOutOnline?(t=D.formatMessage(zs.everythingIsOutOfStock),a=D.formatMessage(zs.whyNotAddSomething)):e===ct.MixOfNonPurchasable&&(t=D.formatMessage(zs.mixOfNonPurchasable),a=D.formatMessage(zs.mixOfNonPurchasableBody)),{body:a,header:t}})(ut(t));return b.createElement("div",{className:"outof-stock"},b.createElement("div",{className:"text"},b.createElement("h2",null,e),b.createElement("p",null,a)),b.createElement(S.zxk,{href:"/",className:"continue",appearance:"secondary"},b.createElement("div",{"data-automation":"continue-shopping"},D.formatMessage(zs.continueShopping))))})(),!E&&b.createElement("section",{className:"enter-pc-section"},b.createElement(lt,{postalCode:m,changePostalCode:B})),((e,a)=>{if(!F())return b.createElement(b.Fragment,null,b.createElement(nt,Object.assign({},t,{estimated:!0,loading:e})),b.createElement(De,null,b.createElement(S.zxk,{className:"continue-to-checkout",href:a},b.createElement("div",{"data-automation":"continue-to-checkout"},D.formatMessage(zs.continueToCheckout)))))})(j,x))),b.createElement(S.U0v,{visible:t.errorType&&""!==t.errorType,close:i,message:(()=>{const e=zs[t.errorType];return e?D.formatMessage(e):D.formatMessage(zs.errorFallbackMessage)})()}))},Kr=e=>{const t=(0,k.useIntl)(),{formatMessage:a}=t,{servicePlanType:s}=e;return s===n.PRP?b.createElement(Cn,Object.assign({},e,{header:b.createElement("h1",null,a(gn.grpBenefitTitle)),fallbackMessage:b.createElement(b.Fragment,null,b.createElement("p",null,a(gn.grpFallbackBenefitMessage)),b.createElement("ul",null,b.createElement("li",null,b.createElement("p",null,a(gn.grpFallbackBenefitMessageLine1))),b.createElement("li",null,b.createElement("p",null,a(gn.grpFallbackBenefitMessageLine2))),b.createElement("li",null,b.createElement("p",null,a(gn.grpFallbackBenefitMessageLine3))),b.createElement("li",null,b.createElement("p",null,a(gn.grpFallbackBenefitMessageLine4)))))})):b.createElement(Cn,Object.assign({},e,{header:b.createElement("h1",null,a(gn.gspBenefitTitle)),fallbackMessage:b.createElement("p",null,a(gn.gspFallbackBenefitMessage))}))},Jr=e=>{const t=(0,k.useIntl)();return b.createElement(rn,Object.assign({},e,{intl:t}))},Xr=e=>{const t=(0,k.useIntl)();return b.createElement(Fn,Object.assign({},e,{intl:t}))},ei=e=>{let{services:t,selectable:a,selectedServices:s=[],hideBenefits:n=!0,hideLineItems:r,addOrRemoveMode:i=!1,loading:o=!1,disabled:l=!1,onChange:c}=e;const d=(e,t)=>{const a=e?[...s,t]:s.filter(e=>e!==t);null==c||c(a)},u=null==t?void 0:t.map(e=>{var t,c;const u=-1!==s.indexOf(e.sku);return b.createElement(b.Fragment,{key:e.sku||e.id},b.createElement(Vr,{selectable:a,icon:e.icon,title:e.title,description:e.description,shortTitle:e.shortTitle||e.title,type:e.type,benefits:e.benefits,benefitsLabel:e.benefitsLabel,price:e.regularPrice,salePrice:e.salePrice,sku:e.sku,hideBenefits:n,hideLineItem:r,addOrRemoveMode:i,addLabel:(null===(c=null===(t=e.addLabel)||void 0===t?void 0:t.trim)||void 0===c?void 0:c.call(t))?e.addLabel:void 0,selected:u,onChange:d,loading:o||e.loading,disabled:l||e.disabled,selectionLabel:e.selectionLabel,hideTitle:e.hideTitle,promotionalDiscount:e.promotionalDiscount}))});return(null==u?void 0:u.length)?b.createElement("div",{className:Hr.servicesContainer},u):null},ti=e=>{let{parentSku:t,initialOption:a,options:s,onOptionSelected:n,onToggleBenefitsDialog:r=()=>{},warrantyTermsAndConditionUrl:i,locale:o,fetchWarrantyBenefits:l,trackExpand:c=()=>{},benefitsMessage:d,isFullRow:u=!0,isBenefitsTextOpen:m=!1,isBbpLoading:p=!1,trackEngagements:h=!1,disableCtas:C=!1,noWidthCap:g=!1,isShowSubTitle:y=!1,isShowPlanTitle:f=!0,isShowPrice:E=!0,isShowBenefitInModal:v=!1,planTitle:P=b.createElement(k.FormattedMessage,Object.assign({},jr.Choose)),subTitle:I=b.createElement(k.FormattedMessage,Object.assign({},jr.Subtitle)),promotionalDiscount:O,isProtectionLogoAHeader:_=!1,headingLevelForProtectionLogo:T="h2"}=e;const L=(0,k.useIntl)(),N={accordionSettings:{benefitMessageBoxStyleClass:Dr,fetchWarrantyBenefits:l,isBenefitsTextOpen:m,parentSku:t,seeBenefitTitle:b.createElement(k.FormattedMessage,Object.assign({},jr.SeeBenefits)),styleClass:fs([Mr,Lr]),trackEngagements:h,trackExpand:c},benefitsMessage:d,isShowBenefitInModal:v,onToggleBenefitsDialog:r,options:s,warrantyTermsAndConditionUrl:i},A={className:Ar,disabled:C,initialOption:a,isLoading:p,onOptionSelected:n,options:s,parentSku:t,trackEngagements:h,warrantyTermsAndConditionUrl:i};return b.createElement("div",{className:fs([Ir,vs(Tr,!g)])},b.createElement("div",{className:fs([wr,vs(Br,u)])},_?b.createElement(T,{"aria-label":L.formatMessage(jr.HeaderAriaLabel),style:{margin:0}},b.createElement(S.QwU,{className:Rr,isAriaHidden:!0})):b.createElement(S.QwU,{className:Rr,title:L.formatMessage(jr.HeaderAriaLabel)}),y&&I&&b.createElement("p",{className:Fr},I)),b.createElement(kr,Object.assign({},N,{warrantyOptions:A})),b.createElement("section",null,f&&b.createElement("p",{className:Nr},P,":"),b.createElement("div",{className:Or},b.createElement(fr,Object.assign({},A)),E&&b.createElement("p",{className:_r},b.createElement("span",null,p?b.createElement(S.oYE.Price,null):xe(a?a.regularPrice:0,o)))),null!=O?b.createElement(Un,{amount:O}):null))},ai={billingAddress:{}};const si={};class ni{setBaseUri(e){this.baseUri=e}createBasket(e){const t=this.baseUri+"/cart";return fetch(t,{body:JSON.stringify(e),headers:{Accept:"application/vnd.bestbuy.guestcart.v1+json"},method:"POST"})}commitOrder(e,t){const a=this.baseUri+"/orders";return fetch(a,{body:JSON.stringify(e),headers:{Accept:"application/vnd.bestbuy.guestorder.v1+json","Accept-Language":"en",ETag:t,"content-type":"text/plain"},method:"POST"})}}const ri="checkout/SET_ORDER_NUMBER",ii="checkout/RESET_CHECKOUT",oi="checkout/UPDATE_REVIEW_ORDER",li={status:h.PENDING};const ci=e=>(t,a,s)=>{let n,{checkoutApiClient:r}=s;const i=JSON.stringify(e),{lineItems:o}=e;console.log("start creating basket ...",o),console.log("checkoutApiClient== ",r),r.createBasket(i).then(e=>{if(e.status>=400)throw new Error("Bad response from server");return n=e.headers.get("ETag"),e.json()}).then(e=>{console.log(e),t((e=>{let{createdBasket:t,etag:a,json:s}=e;return{createdBasket:t,etag:a,json:s,type:oi}})({createdBasket:di(e),etag:n,json:e}))})},di=e=>{const t=new W;t.subtotal=e.subtotal,t.orderTotal=e.orderTotal,t.tax=[];for(let a=0;a<e.tax.length;a++)console.log(e.tax[a]),t.tax=t.tax.concat({amount:e.tax[a].amount,type:e.tax[a].type});const{lineItems:a}=e;return t.lineItems=a,t},ui=()=>(e,t)=>{const{createdBasketJson:a,etag:s}=t().checkout.order;let n=null;(new ni).commitOrder(JSON.stringify(a),s).then(t=>{if(t.status>=400)throw new Error("Bad response from server");const a=t.headers.get("location");n=a.split("/").pop(),n?(console.log(`Congratz! Your order is committed, the tracking number is ${n}`),e({orderNo:n,type:ri}),e(ka())):console.log("Sorry mate, your order did NOT go through.")})};(0,w.UY)({email:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:null},order:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:li,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case oi:return Object.assign(Object.assign({},e),{createdBasket:t.createdBasket,createdBasketJson:t.json,etag:t.etag,reviewItems:t.createdBasket.lineItems,status:h.REVIEW});case ri:return Object.assign(Object.assign({},e),{orderNumber:t.orderNo,status:h.CONFIRMED});case ii:return{status:h.PENDING};default:return e}},payment:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ai;return"checkout/UPDATE_PAYMENT"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).type?Object.assign(Object.assign({},e),{cardNumber:"999999999999"}):e},shippingAddress:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:si;return"checkout/UPDATE_SHIPPING"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).type?Object.assign(Object.assign({},e),{firstName:"DD"}):e}});var mi=(0,_.connect)(e=>({cart:e.cart,checkout:e.checkout}),e=>({add:(t,a,s,n)=>e(Ra(t,a,s,n)),clearCart:()=>e(ka()),confirmOrder:()=>e(ui()),resetAddOperationDialog:()=>e(_a()),resetCheckout:()=>e({type:ii}),reviewOrder:t=>e(ci(t)),showConfirmation:()=>e(Ta())}));const pi=mi(Qr);(0,_.connect)(e=>({cart:e.cart}),(e,t)=>({analyticsCartLoaded:()=>e((e,t)=>{e({payload:{state:t().cart},type:"cart/ANALYTICS_CART_LOADED"})}),analyticsPaypalClicked:()=>e(e=>{e({type:"analytics-paypal-click"})}),analyticsPostalCodeUpdated:t=>e(Ya(t)),analyticsVisaClicked:()=>e(e=>{e({type:"analytics-visa-click"})}),cleanUp:()=>e({type:kt}),clearCart:()=>e(ka()),dismissCartError:()=>e(va()),getBasketPage:()=>e(Ba(t.getAvailabilities,t.itemsToRemove)),removeChildItem:(t,a)=>e(Ua(t,a)),removeItem:t=>e(xa(t)),resetAddOperationDialog:()=>e(_a()),updateItemQuantity:(t,a)=>e(Wa(t,a))}))(zr);const hi="servicePlanBenefits/UPDATE_BENEFITS",Ci="servicePlanBenefits/UPDATE_GET_BENEFITS_STATUS",gi=e=>{let{benefits:t,servicePlanType:a}=e;return{payload:{benefits:t,servicePlanType:a},type:hi}},yi=e=>({payload:{status:e},type:Ci}),fi={benefits:[],getBenefitsStatus:g.PROCESSING,servicePlanType:null};function Ei(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fi,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case hi:return Object.assign(Object.assign({},e),{benefits:t.payload.benefits,servicePlanType:t.payload.servicePlanType});case Ci:return Object.assign(Object.assign({},e),{getBenefitsStatus:t.payload.status});default:return e}}const vi=e=>e&&e.benefits,Pi=e=>e.servicePlanType,bi=e=>!!e&&e.getBenefitsStatus===g.PROCESSING;const Si=(0,_.connect)(e=>({benefits:vi(e.servicePlanBenefits),isLoadingBenefits:bi(e.servicePlanBenefits),servicePlanType:Pi(e.servicePlanBenefits)}),(e,t)=>({retrieveBenefits:()=>{return e((a=t.sku,(e,t,s)=>{let{apiBenefitProvider:n}=s;return G(void 0,void 0,void 0,function*(){const s=t(),r=s.intl&&s.intl.locale;try{e(yi(g.PROCESSING));const{benefitMessages:t,servicePlanType:s}=yield n.getBenefitMessages(a,r);e(gi({benefits:t,servicePlanType:s})),e(yi(g.SUCCESS))}catch(t){e(gi({benefits:[],servicePlanType:null})),e(yi(g.FAILURE))}})}));var a}}))(Kr),ki=(0,_.connect)(e=>({apiStatusCode:e.cart.apiStatusCode,orderNumber:e.order&&e.order.orderNumber,showConfirmation:e.cart.showConfirmation,status:e.cart.status,totalQuantity:e.cart.totalQuantity}),e=>({onClose:()=>e(_a()),onMount:()=>e(Fa(o.V3))}))(Zr),Ii="manufacturerWarranty/UPDATE_MANUFACTURER",Oi="manufacturerWarranty/UPDATE_GET_MANUFACTURER_STATUS",_i=e=>({payload:{manufacturerWarranty:e},type:Ii}),Ti=e=>({payload:{status:e},type:Oi}),Li={getManufacturerStatus:p.PROCESSING,manufacturerWarranty:{labourInDays:0,partsInDays:0}};function Ni(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Li,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case Ii:return Object.assign(Object.assign({},e),{manufacturerWarranty:t.payload.manufacturerWarranty});case Oi:return Object.assign(Object.assign({},e),{getManufacturerStatus:t.payload.status});default:return e}}const Ai=e=>{if(e)return e.manufacturerWarranty},Mi=(e,t)=>!!e&&e.getManufacturerStatus===t;const Di=(0,_.connect)(e=>({hasFetchingManufacturerWarrantyFailed:Mi(e.manufacturerWarranty,p.FAILURE),isFetchingManufacturerWarranty:Mi(e.manufacturerWarranty,p.PROCESSING),manufacturerWarranty:Ai(e.manufacturerWarranty)}),(e,t)=>({retrieveManufacturerWarranty:()=>{return e((a=t.sku,(e,t,s)=>{let{apiManufacturerWarrantyProvider:n}=s;return G(void 0,void 0,void 0,function*(){const s=t(),r=s.intl&&s.intl.locale;try{e(Ti(p.PROCESSING));const t=yield n.getManufacturerWarranty(a,r);e(_i(t)),e(Ti(p.SUCCESS))}catch(t){e(_i(Li.manufacturerWarranty)),e(Ti(p.FAILURE))}})}));var a}}))(Xr);class Ri{constructor(e){var t=this;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";this.getBasket=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.V2;return t.send(`/${a}/baskets/${e}`,null,"GET")},this.getLightWeightBasket=e=>this.send(`/v3/baskets/${e}`,"","GET"),this.addToBasket=(e,t)=>{const a={id:t,lineItems:e.length?e.map(this.toLineItem):[this.toLineItem(e)]};return this.send("/v2/baskets",JSON.stringify(a),"POST",{clearBfcache:!0,clearBfcacheBasketId:t})},this.deleteBasket=e=>this.send(`/v2/baskets/${e}`,"","DELETE",{clearBfcache:!1,clearBfcacheBasketId:e}),this.removeCartItem=(e,t)=>this.send(`/v2/baskets/${e}/lineItems/${t}`,"","DELETE",{clearBfcache:!0,clearBfcacheBasketId:e}),this.addChildCartItem=(e,t,a)=>this.send(`/v2/baskets/${e}/lineitems/${t}/associateditems`,JSON.stringify({lineItem:a}),"POST",{clearBfcache:!0,clearBfcacheBasketId:e}),this.removeChildCartItem=(e,t,a)=>this.send(`/v2/baskets/${e}/lineitems/${t}/associateditems/${a}`,"","DELETE",{clearBfcache:!0,clearBfcacheBasketId:e}),this.updateCartItemQuantity=(e,t,a)=>this.send(`/v2/baskets/${e}/lineItems/${t}`,JSON.stringify({quantity:a}),"PATCH",{clearBfcache:!0,clearBfcacheBasketId:e}),this.mergeBasket=(e,t)=>{const a=`/v2/baskets/${e}/merge?destinationId=${t}`;return this.send(a,"","PATCH",{clearBfcache:!0,clearBfcacheBasketId:e})},this.toLineItem=e=>Object.assign(Object.assign({quantity:1},e),{associatedItems:e.associatedItems?e.associatedItems.map(this.toLineItem):void 0}),this.send=function(e,a,s){let{clearBfcache:n,clearBfcacheBasketId:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{clearBfcache:!1};return new Promise((i,o)=>{const l=`${t.baseUri}${e}`,c={credentials:"include",headers:t.buildHeaders(),method:s};return a&&(c.body=a),fetch(l,c).then(e=>{if(204!==e.status){if(404===e.status)throw new Y;return e.status>=400?e.json().then(o):e.json()}i({})}).then(e=>{n&&r&&"GET"!==s&&t.getLightWeightBasket(r),i(e)}).catch(e=>{o(e)})})},this.buildHeaders=()=>{const e=Object.assign(Object.assign({},this.locale&&{"Accept-Language":this.locale}),{"Content-Type":"application/json","Postal-Code":this.postalCode,"Region-Code":this.regionCode});return this.accessToken&&(e.Authorization="Bearer "+this.accessToken),e},this.baseUri=e,this.postalCode=a,this.accessToken=s,this.regionCode=n,this.locale=r}}class wi{constructor(e){this.isValidPostalCode=e=>new RegExp("^[A-Za-z][0-9][A-Za-z].*").test(String(e)),this.isValidRegionCode=e=>new RegExp("^[A-Za-z][A-Za-z]$").test(String(e)),this.baseUrl=e}make(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return this.isValidPostalCode(t)&&this.isValidRegionCode(e)||(t="M5G 2C3",e="ON"),new Ri(this.baseUrl,t,this.getAccessToken(),e,a)}getAccessToken(){const e=f.cieUtilities.getAccessToken();return e||null}}const Bi=pi,Fi=Si,xi=ki,ji=Jr,qi=Di;class Ui{constructor(){this.listeners={}}addEventListener(e,t){Array.isArray(this.listeners[e])||(this.listeners[e]=[]),this.listeners[e].push(t)}removeEventListener(e,t){if(Array.isArray(this.listeners[e])){let a=this.listeners[e].indexOf(t);for(;a>-1;)this.listeners[e].splice(a,1),a=this.listeners[e].indexOf(t)}}notifyListeners(e){Array.isArray(this.listeners[e])&&this.listeners[e].forEach(e=>e())}}var Wi;!function(e){e.name="orderAttached"}(Wi||(Wi={}));class Hi{constructor(e){this.hostUrl=e,this.getAvailabilities=(e,t,a,s)=>G(this,void 0,void 0,function*(){const n=e.join("|"),r=t.join("|"),i=`${this.hostUrl}?accept=${encodeURIComponent("application/vnd.bestbuy.simpleproduct.v1+json")}&accept-language=${a}&locations=${encodeURIComponent(r)}&postalCode=${s.slice(0,3)}&skus=${encodeURIComponent(n)}`,o=yield fetch(i);return yield o.json()})}}class Gi{constructor(e){var t=this;this.getBenefitMessages=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en";return G(t,void 0,void 0,function*(){const t=yield this.send(`/${e}/warranties?lang=${a}`);return{benefitMessages:this.mapResponseToServicePlanBenefits(t),servicePlanType:this.getFirstWarrantyType(t)}})},this.send=e=>G(this,void 0,void 0,function*(){const t=`${this.baseUri}${e}`,a=yield fetch(t,{method:"GET"});if(204===a.status)return{};if(404===a.status)throw new Y;if(a.status>=400)throw new Error;return a.json()}),this.getFirstWarrantyType=e=>{const t=e.warranties&&e.warranties.find(e=>e.type===n.PSP||e.type===n.PRP);return t?t.type:null},this.getMessagesByWarrantyType=e=>{const t=this.getFirstWarrantyType(e);return[...e.warrantyBenefitsMessages?e.warrantyBenefitsMessages.filter(e=>e.warrantyType===t):[]]},this.mapResponseToServicePlanBenefits=e=>this.getMessagesByWarrantyType(e).map(e=>({messages:e.benefits?e.benefits.map(e=>e.description):[],title:e.title,warrantyType:e.warrantyType})),this.baseUri=e}}class Vi{constructor(e){this.getManufacturerWarranty=e=>G(this,void 0,void 0,function*(){const t=`${this.baseUri}/${e}/offers`,a=yield this.send(t);return this.getManufacturerWarrantyYears(a)}),this.send=e=>G(this,void 0,void 0,function*(){const t=yield fetch(e,{method:"GET"});if(200!==t.status)throw new Error;return t.json()}),this.baseUri=e}getManufacturerWarrantyYears(e){if(e&&e[0]&&e[0].warranty){const{warranty:t}=e[0],{labourCarryIn:a,parts:s}=t;return{labourInDays:a,partsInDays:s}}throw new Error}}class $i{constructor(e){var t=this;this.hostUrl=e,this.getOffers=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return G(t,void 0,void 0,function*(){return(yield fetch(`${this.hostUrl}/${e}/offers`,a)).json()})}}}const Yi=["Jan.","Feb.","Mar.","Apr.","May","June","July","Aug.","Sep.","Oct.","Nov.","Dec."],Qi=["janv.","févr.","mars","avr.","mai","juin","juill.","août","sept.","oct.","nov.","déc."];F().extend(U()),F().extend(j());const Zi=e=>{if(!e)return;const t=" -06:00";let a;if(isNaN(Number(e)))return a=F()(e,"YYYY-MM-DD h:mm:ss A",!0).utcOffset(t,!0),a.isValid()||(a=F()(e,"YYYY-MM-DD HH:mm:ss",!0).utcOffset(t,!0)),a.format();{const t="string"==typeof e?Number(e):e;return a=F().utc(t),a.format("YYYY-MM-DDTHH:mm:ss[Z]")}};class zi{constructor(e,t,a){this.hostUrl=e,this.availabilityProvider=t,this.offerProvider=a,this.getSimpleRequiredProducts=(e,t,a)=>G(this,void 0,void 0,function*(){const s=yield fetch(js(`${this.hostUrl}/${e}?currentRegion=${a}&lang=${t}&include=all`)),n=yield s.json(),{warranties:r}=n,i=n.requiredProducts?n.requiredProducts.map(e=>({availability:null,name:e.name,offer:null,sku:e.sku,status:"initial",thumbnailUrl:e.thumbnailImage})):[],o=n.SaleEndDate&&((e,t)=>{const a=Zi(e),s=F()(a).utcOffset("-08:00").format(),n=new Date(s),r=n.getMonth(),i=n.getDate();if(t&&t.startsWith("fr"))return`${Qi[r]} ${i}`;return`${Yi[r]} ${i}`})(n.SaleEndDate,t),l=n.additionalMedia&&n.additionalMedia.length&&n.additionalMedia[0].url;return{parentProduct:{ehf:n.ehf,hideSaleEndDate:n.hideSaleEndDate,name:n.name,productImageUrl:l,regularPrice:n.regularPrice,saleEndDate:o,salePrice:n.salePrice,sku:n.sku},requiredProducts:i,warranties:r}}),this.getDetailedRequiredProducts=(e,t,a,s,n)=>G(this,void 0,void 0,function*(){const r=yield this.getSimpleRequiredProducts(e,t,a),{parentProduct:i,requiredProducts:o,warranties:l}=r,c=o.reduce((e,t)=>e.concat(t.sku),[]),d=(null==o?void 0:o.length)>0&&this.availabilityProvider.getAvailabilities(c,[],t,s).catch(()=>({availabilities:[]})),u=o.map(e=>this.offerProvider.getOffers(e.sku,n).catch(()=>null)),[m,p]=yield Promise.all([d||Promise.resolve({}),Promise.all(u)]),h=o.map((e,t)=>Object.assign(Object.assign({},e),{availability:this.mapAvailability(m,t),offer:this.mapOffer(p,t,a)}));return{parentProduct:i,requiredProducts:h,warranties:l}}),this.mapAvailability=(e,t)=>e&&e.availabilities&&e.availabilities[t]?{shipping:{purchasable:e.availabilities[t].shipping.purchasable}}:null,this.mapOffer=(e,t,a)=>{if(e&&e[t]){const s=e[t].find(e=>{let{sellerId:t}=e;return"bbyca"===t});if(!s)return null;const n=s.ehf&&s.ehf.find(e=>{let{province:t}=e;return t===a});return{ehf:n&&n.amount||0,hideSavings:s.hideSavings,regularPrice:s.regularPrice,saleEndDate:s.saleEndDate,salePrice:s.salePrice}}return null}}}}}]);